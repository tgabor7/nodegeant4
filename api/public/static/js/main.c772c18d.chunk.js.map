{"version":3,"sources":["rendering/shader.js","utils/maths.js","shaders/gridshader.js","shaders/instanceshader.js","rendering/InstanceRenderer.js","rendering/grid.js","shaders/mainshader.js","rendering/model.js","entities/cube.js","rendering/renderSystem.js","detector/Detektor.js","gun/ParticleGun.js","gun/gun.js","source/ParticleSource.js","utils/STLParser.js","graphics/Canvas.js","detector/MaterialList.js","graphics/ConfirmDialog.js","volume/VolumeList.js","utils/Parser.js","graphics/MaterialTable.js","detector/DetectorEditDialog.js","detector/DetectorButton.js","detector/DetectorDialog.js","gun/GunEditDialog.js","gun/GunButton.js","gun/GunDialog.js","graphics/SourceTable.js","source/SourceEditDialog.js","source/SourceButton.js","source/SourceDialog.js","graphics/RunDialog.js","graphics/SpectrumDialog.js","volume/VolumeDialog.js","graphics/NavigationBar.js","entities/Particle.js","graphics/spectrum.js","graphics/CodeEditor.js","graphics/ModelCanvas.js","volume/VolumeEditButton.js","volume/VolumeButton.js","graphics/PopupDialog.js","volume/VolumeSelectDialog.js","App.js","serviceWorker.js","index.js","images/editicon.png"],"names":["Shader","attribs","path","gl","this","vertexShaderText","vertexShader","fragmentShaderText","fragmentShader","createShader","VERTEX_SHADER","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","program","createProgram","attachShader","i","length","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","validateProgram","VALIDATE_STATUS","console","error","getProgramInfoLog","getShaderInfoLog","useProgram","name","value","location","getUniformLocation","uniform1f","uniform1i","x","y","z","uniform3f","uniformMatrix4fv","Matrix","Float64Array","Vector3","Camera","d","p","a","Maths","mat","v","res","result","l","Math","sqrt","r","eye","center","up","forward","upt","normalize","side","cross","m","invert","inv","det","angle","c","cos","s","sin","axis","temp","R","n","j","k","rx","ry","rz","sx","sy","sz","translate","rotate","scale","camera","view","lookAt","FOV","NEAR_PLANE","FAR_PLANE","width","height","aspectRatio","y_scale","tan","x_scale","frustum_length","projectionMatrix","left","right","bottom","top","zNear","zFar","u","GridShader","InstancedShader","InstanceRenderer","vertices","vao","createVertexArray","bindVertexArray","index","vbo","createVBO","color_vbo","shader","InstanceShader","storeData","disableVertexAttribArray","addIntanceAttrib","drawLines","particles","projection","vboData","colorData","colorIndex","bind","enableVertexAttribArray","storeMatrixData","createTransformationMatrix","position","storeVectorData","color","updateVBO","drawArraysInstanced","LINES","TRIANGLES","setUniform4fv","setUniform3f","setUniform","unBind","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STREAM_DRAW","attribnumber","coordinateSize","data","STATIC_DRAW","vertexAttribPointer","FLOAT","FALSE","attribute","datasize","datalength","offset","vertexAttribDivisor","bufferSubData","GridRenderer","vertical","horizontal","verticalRenderer","horizontalRenderer","Line","lines","push","hint","f","render","createViewMatrix","MainShader","Model","normals","outline","rotation","nvbo","drawArrays","LINE_STRIP","Cube","RenderSystem","models","sources","detectors","guns","addModel","drawTracks","drawParticles","drawAxes","detector","splice","gun","source","model","particle","disable","DEPTH_TEST","enable","setUniform1i","draw","id","active_id","atan2","direction","log","Detector","material","active","deposit","hits","geometry","numberOfHits","list","sort","b","hit","no","abs","ParticleGun","energy","GunMesh","ParticleSource","STLParrser","readFloat","chars","Uint8Array","charCodeAt","buffer","size","Int32Array","readInt","ModelData","Canvas","props","state","canvas","createRef","oldX","oldY","move","keyDown","down","renderer","instanceRenderer","drawGrid","updateHint","setState","clearTracks","current","getContext","gridRenderer","requestAnimationFrame","clearColor","clear","COLOR_BUFFER_BIT","createProjectionMatrix","offsetWidth","offsetHeight","getMouseYd","PI","getMouseXd","addSource","addDetector","type","volumes","parameterize","str","modeldata","STLParser","parseData","dx","dy","dz","gun_model","addGun","removeSource","removeDetector","removeGun","ref","style","onMouseMove","e","pageX","pageY","tabIndex","onKeyDown","keyCode","onKeyUp","onMouseDown","onMouseUp","onWheel","delta","deltaY","Component","MaterialList","materials","symbol","compounds","DetectorDialog","showDialog","hideDialog","show","Modal","onHide","Header","closeButton","Title","title","Body","content","Footer","Button","variant","onClick","fun","VolumeList","Parser","f0","f1","showVolumeDialog","confirmDialog","trim","split","chunks","alert","code","me","isNaN","parseFloat","text","clearSetup","createDetector","createSource","createGun","blocks","failed_detectors","words","replace","detector_geometry","measurement","substring","indexOf","includes","substr","params","undefined","getVolume","checkFloat","checkString","checkMaterial","checkSource","forEach","MaterialTable","table","element","compound","changeTable","updateMaterials","t","filter","toUpperCase","tmp_mats","rows","ceil","tmp","className","updatematerial","floor","FormControl","onChange","target","placeholder","Row","disabled","Container","DetectorEditDialog","React","updateMaterial","detname","detposx","detposy","detposz","detrotx","detroty","detrotz","detscalex","detscaley","detscalez","detmat","geomrty","showError","display","filelabel","options","hex","bigint","parseInt","opt","map","get","ConfirmDialog","removebutton","button","Form","Col","Control","required","maxLength","event","as","evt","File","label","data-browse","custom","FileReader","onload","readAsBinaryString","files","Group","controlId","Label","onInput","hexToRgb","backgroundColor","modelData","fetch","headers","method","body","JSON","stringify","response","json","String","fromCharCode","setname","buttonid","codeeditor","updateText","updatedetails","DetectorButton","editdialog","updateDetails","setName","details","buttons","Card","Accordion","Toggle","eventKey","Collapse","ann","detectorName","createbutton","GunEditDialog","detdirx","detdiry","detdirz","GunButton","acitve_id","GunDialog","SourceTable","SourceEditDialog","SourceButton","SourceDialog","RunDialog","numberOfParticles","loading","setLoading","margin","Spinner","animation","role","runsim","SpectrumDialog","numberofparticles","now","binsize","VolumeDialog","NavigationBar","dialog","gundialog","sourcedialog","rundialog","spectrumdialog","volumedialog","showRun","showTracks","showParticles","showAxes","showGrid","showrun","showclearsetup","showclearparticles","showClearSetup","creategunbutton","createsourcebutton","run","runspectroscopy","createvolume","Navbar","bg","Brand","clearrun","showClearParticles","Nav","Dropdown","border","Menu","OverlayTrigger","overlay","Tooltip","Item","Check","checked","setshowtracks","setshowparticles","setshowaxes","setshowgrid","Particle","track_id","parent_id","totalEnergy","energyDeposit","definition","Spectrum","energies","numberofenergies","chart","Chart","labels","datasets","borderColor","responsive","plugins","zoom","pan","enabled","mode","contains","getIndex","bin","max","add","addData","destroy","ctx","scales","yAxes","scaleLabel","labelString","xAxes","ticks","userCallback","dataset","update","CodeEditor","fileinput","editor","click","parse","window","theme","fontSize","ModelCanvas","updateCanvas","onShow","VolumeEditButton","VolumeButton","arg","VolumeSelectDialog","addVolume","removeVolume","fixed","showConfirm","volume","vs","fs","updateVolume","App","spectrum","navbar","popup","volumeselect","gunbuttons","sourcebuttons","volumebuttons","page","volumebuttonheight","createVolume","runSim","runSpectroscopy","setShowParticles","setShowTracks","setShowAxes","setShowGrid","clearRun","accordion","tracks","number_of_particles","message_data","number_of_detectors","number_of_sources","number_of_guns","sendGamma","hidedialog","send","message","then","processGammaSpectrum","processResponse","floats","track_data","numberOfSteps","t_norm","tm","tmp_particles","slice","get_average","addParticle","bs","key","px","py","pz","paramterize","addSTLDetector","sourceslength","removeChunk","init","items","item","gunButtons","sourceButtons","volumeButtons","PopupDialog","Tab","defaultActiveKey","activeKey","sm","Link","Content","Pane","innerHeight","Boolean","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","module","exports"],"mappings":"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SACA,SACA,QACA,SACA,SACA,QACA,QACA,QACA,OACA,QACA,QACA,SACA,SACA,QACA,QACA,OACA,QACA,QACA,QACA,QACA,QACA,UACA,UACA,QACA,QACA,QACA,QACA,SACA,SACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SACA,SACA,QACA,SACA,SACA,QACA,QACA,QACA,QACA,SACA,SACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,QAzGFgH,EA2GKG,UAAY,CACf,eACA,UACA,YACA,UACA,sBACA,MACA,UACA,iBACA,QACA,UACA,UACA,aACA,aACA,WACA,kBACA,iBACA,UACA,kBACA,MACA,aACA,oBACA,qBACA,gBACA,cACA,aACA,SACA,kBACA,QACA,oBACA,oBACA,oBACA,mBACA,gBACA,kBACA,oBACA,iBACA,uBACA,uBACA,qBACA,oBACA,gBACA,kBACA,gBACA,gBACA,aACA,WACA,cACA,sBACA,wBACA,qBACA,gBACA,yBACA,qBACA,SACA,gBACA,kBACA,WACA,gBACA,eACA,cACA,gBACA,kBACA,WACA,aACA,WACA,aACA,aACA,wBACA,mBACA,qBACA,cACA,aACA,cACA,YACA,WACA,UACA,SACA,YACA,WACA,SACA,uBACA,uBACA,aACA,gBACA,oBACA,mBACA,kBACA,iBACA,gBACA,sBACA,YACA,SACA,sBACA,qBACA,kBACA,wBACA,kBACA,UACA,WACA,YACA,cACA,uBACA,uBACA,sBACA,yBACA,cACA,eACA,gBACA,aACA,YACA,aACA,kBACA,SACA,WACA,YACA,iBACA,0BACA,oBACA,oBACA,gBACA,oBACA,eACA,QACA,aACA,mBACA,gBACA,cACA,SACA,8BACA,oBACA,oBACA,oBACA,qBACA,0BACA,0BACA,wBACA,mBACA,kBACA,UACA,WACA,mBACA,WACA,eA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","file":"static/js/main.c772c18d.chunk.js","sourcesContent":["class Shader {\r\n    constructor(attribs,path ,gl){\r\n        this.gl = gl;\r\n        var vertexShaderText = path.vertexShader;\r\n        var fragmentShaderText = path.fragmentShader;\r\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n    \r\n        gl.shaderSource(vertexShader, vertexShaderText);\r\n        gl.shaderSource(fragmentShader, fragmentShaderText);\r\n    \r\n        gl.compileShader(vertexShader);\r\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling vertex shader!', gl.getShaderInfoLog(vertexShader));\r\n            return;\r\n        }\r\n    \r\n        gl.compileShader(fragmentShader);\r\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling fragment shader!', gl.getShaderInfoLog(fragmentShader));\r\n            return;\r\n        }\r\n    \r\n        this.program = gl.createProgram();\r\n        gl.attachShader(this.program, vertexShader);\r\n        gl.attachShader(this.program, fragmentShader);\r\n\r\n        for(var i = 0;i<attribs.length;i++){\r\n            gl.bindAttribLocation(this.program, attribs[i][0], attribs[i][1]);\r\n        }\r\n\r\n        gl.linkProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\r\n            console.error('ERROR linking program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        gl.validateProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.VALIDATE_STATUS)) {\r\n            console.error('ERROR validating program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        /*var positionAttribLocation = gl.getAttribLocation(this.program, 'vertPosition');\r\n        var normalAttribLocation = gl.getAttribLocation(this.program, 'normal');*/\r\n        \r\n        \r\n\r\n        /*for(var i = 0;i<attribs.length;i++){\r\n            gl.vertexAttribPointer(positionAttribLocation, attribs[i], gl.FLOAT,gl.FALSE,0,0);\r\n        }*/\r\n        \r\n        /*gl.vertexAttribPointer(\r\n            normalAttribLocation, 3, gl.FLOAT, gl.FALSE,\r\n            0,\r\n            0 \r\n        );*/\r\n        \r\n    }\r\n    bind(){\r\n        this.gl.useProgram(this.program);\r\n    }\r\n    unBind(){\r\n        this.gl.useProgram(null);\r\n    }\r\n    setUniform(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1f(location,value);\r\n        }\r\n    }\r\n    setUniform1i(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1i(location,value);\r\n        }\r\n    }\r\n    setUniform3f(name,x,y,z){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform3f(location,x,y,z);\r\n        }\r\n    }\r\n    setUniform4fv(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniformMatrix4fv(location,false,value);\r\n        }\r\n        \r\n    }\r\n}\r\nexport default Shader;","class Matrix extends Float64Array {\r\n    constructor() {\r\n        super(16);\r\n        this[0] = 1.0;\r\n        this[5] = 1.0;\r\n        this[10] = 1.0;\r\n        this[15] = 1.0;\r\n    }\r\n}\r\nclass Vector4 {\r\n    constructor(x, y, z, w) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n}\r\nclass Vector3 {\r\n    constructor(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n\r\n}\r\nclass Camera {\r\n    constructor(x, y, d, p, a) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.d = d;\r\n        this.p = p;\r\n        this.a = a;\r\n    }\r\n\r\n}\r\nclass Maths {\r\n    static scale(mat, v) {\r\n        var res = new Matrix();\r\n        for(var i = 0;i<16;i++){\r\n            res[i] = mat[i];\r\n        }\r\n        res[0] = res[0] * v.x;\r\n        res[1] = res[1] * v.x;\r\n        res[2] = res[2] * v.x;\r\n\r\n        res[4] = res[4] * v.y;\r\n        res[5] = res[5] * v.y;\r\n        res[6] = res[6] * v.y;\r\n\r\n        res[8] = res[8] * v.z;\r\n        res[9] = res[9] * v.z;\r\n        res[10] = res[10] * v.z;\r\n\r\n        return res;\r\n\r\n    }\r\n    static translate(mat, v) {\r\n        var res = new Matrix();\r\n        for(var i = 0;i<16;i++){\r\n            res[i] = mat[i];\r\n        }\r\n        res[12] = mat[0] * v.x + mat[4] * v.y + mat[8] * v.z + mat[12];\r\n        res[13] = mat[1] * v.x + mat[5] * v.y + mat[9] * v.z + mat[13];\r\n        res[14] = mat[2] * v.x + mat[6] * v.y + mat[10] * v.z + mat[14];\r\n        res[15] = mat[3] * v.x + mat[7] * v.y + mat[11] * v.z + mat[15];\r\n\r\n        return res;\r\n    }\r\n    static normalize(v) {\r\n        var result = new Vector3();\r\n        result.x = v.x;\r\n        result.y = v.y;\r\n        result.z = v.z;\r\n        \r\n        var l = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\r\n        result.x /= l;\r\n        result.y /= l;\r\n        result.z /= l;\r\n        \r\n        return result;\r\n    }\r\n    static mulVectorDouble(v, d) {\r\n        var res = new Vector3(0,0,0);\r\n        res.x = v.x;\r\n        res.y = v.y;\r\n        res.z = v.z;\r\n        \r\n        res.x *= d;\r\n        res.y *= d;\r\n        res.z *= d;\r\n\r\n        return res;\r\n    }\r\n    static cross(v, p) {\r\n        var r = new Vector3(0,0,0);\r\n\r\n        r.x = v.y * p.z - v.z * p.y;\r\n        r.y = v.z * p.x - v.x * p.z;\r\n        r.z = v.x * p.y - v.y * p.x;\r\n\r\n        return r;\r\n    }\r\n    static lookAt(eye, center, up) {\r\n        var forward = new Vector3(0,0,0);\r\n        var upt = new Vector3(0,0,0);\r\n\r\n        forward.x = center.x - eye.x;\r\n        forward.y = center.y - eye.y;\r\n        forward.z = center.z - eye.z;\r\n        \r\n        forward = this.normalize(forward);\r\n\r\n        \r\n        var side = new Vector3(0,0,0);\r\n        side = this.cross(forward, up);\r\n  \r\n        \r\n        side = this.normalize(side);\r\n       \r\n        \r\n\r\n        upt = this.cross(side, forward);\r\n        \r\n\r\n        var m = new Matrix();\r\n        m[0] = side.x;\r\n        m[1] = side.y;\r\n        m[2] = side.z;\r\n        m[4] = upt.x;\r\n        m[5] = upt.y;\r\n        m[6] = upt.z;\r\n        m[8] = -forward.x;\r\n        m[9] = -forward.y;\r\n        m[10] = -forward.z;\r\n        \r\n        m = this.invert(m);\r\n\r\n        return m;\r\n    }\r\n    static invert(m) {\r\n        var result = new Matrix();\r\n        var inv = new Matrix();\r\n        \r\n        var det = 0.0;\r\n        inv[0] = m[5] * m[10] * m[15] -\r\n            m[5] * m[11] * m[14] -\r\n            m[9] * m[6] * m[15] +\r\n            m[9] * m[7] * m[14] +\r\n            m[13] * m[6] * m[11] -\r\n            m[13] * m[7] * m[10];\r\n\r\n        inv[4] = -m[4] * m[10] * m[15] +\r\n            m[4] * m[11] * m[14] +\r\n            m[8] * m[6] * m[15] -\r\n            m[8] * m[7] * m[14] -\r\n            m[12] * m[6] * m[11] +\r\n            m[12] * m[7] * m[10];\r\n\r\n        inv[8] = m[4] * m[9] * m[15] -\r\n            m[4] * m[11] * m[13] -\r\n            m[8] * m[5] * m[15] +\r\n            m[8] * m[7] * m[13] +\r\n            m[12] * m[5] * m[11] -\r\n            m[12] * m[7] * m[9];\r\n\r\n        inv[12] = -m[4] * m[9] * m[14] +\r\n            m[4] * m[10] * m[13] +\r\n            m[8] * m[5] * m[14] -\r\n            m[8] * m[6] * m[13] -\r\n            m[12] * m[5] * m[10] +\r\n            m[12] * m[6] * m[9];\r\n\r\n        inv[1] = -m[1] * m[10] * m[15] +\r\n            m[1] * m[11] * m[14] +\r\n            m[9] * m[2] * m[15] -\r\n            m[9] * m[3] * m[14] -\r\n            m[13] * m[2] * m[11] +\r\n            m[13] * m[3] * m[10];\r\n\r\n        inv[5] = m[0] * m[10] * m[15] -\r\n            m[0] * m[11] * m[14] -\r\n            m[8] * m[2] * m[15] +\r\n            m[8] * m[3] * m[14] +\r\n            m[12] * m[2] * m[11] -\r\n            m[12] * m[3] * m[10];\r\n\r\n        inv[9] = -m[0] * m[9] * m[15] +\r\n            m[0] * m[11] * m[13] +\r\n            m[8] * m[1] * m[15] -\r\n            m[8] * m[3] * m[13] -\r\n            m[12] * m[1] * m[11] +\r\n            m[12] * m[3] * m[9];\r\n\r\n        inv[13] = m[0] * m[9] * m[14] -\r\n            m[0] * m[10] * m[13] -\r\n            m[8] * m[1] * m[14] +\r\n            m[8] * m[2] * m[13] +\r\n            m[12] * m[1] * m[10] -\r\n            m[12] * m[2] * m[9];\r\n\r\n        inv[2] = m[1] * m[6] * m[15] -\r\n            m[1] * m[7] * m[14] -\r\n            m[5] * m[2] * m[15] +\r\n            m[5] * m[3] * m[14] +\r\n            m[13] * m[2] * m[7] -\r\n            m[13] * m[3] * m[6];\r\n\r\n        inv[6] = -m[0] * m[6] * m[15] +\r\n            m[0] * m[7] * m[14] +\r\n            m[4] * m[2] * m[15] -\r\n            m[4] * m[3] * m[14] -\r\n            m[12] * m[2] * m[7] +\r\n            m[12] * m[3] * m[6];\r\n\r\n        inv[10] = m[0] * m[5] * m[15] -\r\n            m[0] * m[7] * m[13] -\r\n            m[4] * m[1] * m[15] +\r\n            m[4] * m[3] * m[13] +\r\n            m[12] * m[1] * m[7] -\r\n            m[12] * m[3] * m[5];\r\n\r\n        inv[14] = -m[0] * m[5] * m[14] +\r\n            m[0] * m[6] * m[13] +\r\n            m[4] * m[1] * m[14] -\r\n            m[4] * m[2] * m[13] -\r\n            m[12] * m[1] * m[6] +\r\n            m[12] * m[2] * m[5];\r\n\r\n        inv[3] = -m[1] * m[6] * m[11] +\r\n            m[1] * m[7] * m[10] +\r\n            m[5] * m[2] * m[11] -\r\n            m[5] * m[3] * m[10] -\r\n            m[9] * m[2] * m[7] +\r\n            m[9] * m[3] * m[6];\r\n\r\n        inv[7] = m[0] * m[6] * m[11] -\r\n            m[0] * m[7] * m[10] -\r\n            m[4] * m[2] * m[11] +\r\n            m[4] * m[3] * m[10] +\r\n            m[8] * m[2] * m[7] -\r\n            m[8] * m[3] * m[6];\r\n\r\n        inv[11] = -m[0] * m[5] * m[11] +\r\n            m[0] * m[7] * m[9] +\r\n            m[4] * m[1] * m[11] -\r\n            m[4] * m[3] * m[9] -\r\n            m[8] * m[1] * m[7] +\r\n            m[8] * m[3] * m[5];\r\n\r\n        inv[15] = m[0] * m[5] * m[10] -\r\n            m[0] * m[6] * m[9] -\r\n            m[4] * m[1] * m[10] +\r\n            m[4] * m[2] * m[9] +\r\n            m[8] * m[1] * m[6] -\r\n            m[8] * m[2] * m[5];\r\n\r\n        det = m[0] * inv[0] + m[1] * inv[4] + m[2] * inv[8] + m[3] * inv[12];\r\n        det = 1.0 / det;\r\n        \r\n        for (var i = 0; i < 16; i++)\r\n            result[i] = inv[i] * det;\r\n\r\n        return result;\r\n    }\r\n    \r\n    static rotate(mat, angle, v) {\r\n        var result = new Matrix();\r\n        var a = angle;\r\n        var c = Math.cos(a);\r\n        var s = Math.sin(a);\r\n\r\n        var axis = new Vector3(0,0,0);\r\n        axis.x = v.x;\r\n        axis.y = v.y;\r\n        axis.z = v.z;\r\n        var temp = new Vector3(axis.x * (1.0 - c),axis.y * (1.0 - c),axis.z * (1.0 - c));\r\n       \r\n        result[0] = c + temp.x * axis.x;\r\n        result[1] = temp.x * axis.y + s * axis.z;\r\n        result[2] = temp.x * axis.z - s * axis.y;\r\n\r\n        result[4] = temp.y * axis.x - s * axis.z;\r\n        result[5] = c + temp.y * axis.y;\r\n        result[6] = temp.y * axis.z + s * axis.x;\r\n\r\n        result[8] = temp.z * axis.x + s * axis.y;\r\n        result[9] = temp.z * axis.y - s * axis.x;\r\n        result[10] = c + temp.z * axis.z;\r\n\r\n        var R = new Matrix();\r\n        for(var i = 0;i<16;i++){\r\n            R[i] = mat[i];\r\n        }\r\n        R[0] = mat[0] * result[0] + mat[4] * result[1] + mat[8] * result[2];\r\n        R[1] = mat[1] * result[0] + mat[5] * result[1] + mat[9] * result[2];\r\n        R[2] = mat[2] * result[0] + mat[6] * result[1] + mat[10] * result[2];\r\n\r\n        R[4] = mat[0] * result[4] + mat[4] * result[5] + mat[8] * result[6];\r\n        R[5] = mat[1] * result[4] + mat[5] * result[5] + mat[9] * result[6];\r\n        R[6] = mat[2] * result[4] + mat[6] * result[5] + mat[10] * result[6];\r\n        \r\n        R[8] = mat[0] * result[8] + mat[4] * result[9] + mat[8] * result[10];\r\n        R[9] = mat[1] * result[8] + mat[5] * result[9] + mat[9] * result[10];\r\n        R[10] = mat[2] * result[8] + mat[6] * result[9] + mat[10] * result[10];\r\n        \r\n        R[12] = mat[12];\r\n        R[13] = mat[13];\r\n        R[14] = mat[14];\r\n        return R;\r\n    }\r\n    static mul(m,n){\r\n        var res = new Matrix();\r\n\r\n        for (var i = 0; i < 4; i++) {\r\n            for (var j = 0; j < 4; j++) {\r\n                res[i*4+j] = 0;\r\n                for (var k = 0; k < 4; k++) {\r\n                    res[i*4+j] += n[i*4+k] * m[k*4+j];\r\n                }\r\n            }\r\n        }\r\n\r\n\t    return res;\r\n    }\r\n    static createTransformationMatrix(x, y, z, rx, ry, rz, sx, sy, sz) {\r\n        var res = new Matrix();\r\n        res = Maths.translate(res, new Vector3(x, y, z));\r\n        \r\n        res = Maths.rotate(res, rx, new Vector3(1, 0, 0));\r\n        res = Maths.rotate(res, ry, new Vector3(0, 1, 0));\r\n        res = Maths.rotate(res, rz, new Vector3(0, 0, 1));\r\n\r\n        res = Maths.scale(res, new Vector3(sx, sy, sz));\r\n\r\n        return res;\r\n    }\r\n    static createViewMatrix(camera) {\r\n        var view = new Matrix();\r\n        \r\n        view = this.lookAt(camera.p, camera.a, new Vector3(0, 1 ,0));\r\n        view = this.translate(view, new Vector3(-camera.p.x, -camera.p.y, -camera.p.z));\r\n\r\n        return view;\r\n    }\r\n    static createBillBoardMatrix(camera){\r\n        var view = new Matrix();\r\n        \r\n        view = this.lookAt(camera.p, camera.a, new Vector3(0, 1 ,0));\r\n        view = this.translate(view, new Vector3(-camera.p.x, -camera.p.y, -camera.p.z));\r\n\r\n        return view;\r\n    }\r\n    static createProjectionMatrix(FOV, NEAR_PLANE, FAR_PLANE, width, height) {\r\n        var aspectRatio = width / height;\r\n        var y_scale = ((1.0 / Math.tan(((FOV / 2.0) / 360.0) * 3.14)) * aspectRatio);\r\n        var x_scale = y_scale / aspectRatio;\r\n        var frustum_length = FAR_PLANE - NEAR_PLANE;\r\n\r\n        var projectionMatrix = new Matrix();\r\n        \r\n        projectionMatrix[0] = x_scale;\r\n        projectionMatrix[5] = y_scale;\r\n        projectionMatrix[10] = -((FAR_PLANE + NEAR_PLANE) / frustum_length);\r\n        projectionMatrix[11] = -1.0;\r\n        projectionMatrix[14] = -((2.0 * NEAR_PLANE * FAR_PLANE) / frustum_length);\r\n        projectionMatrix[15] = 0.0;\r\n\r\n        return projectionMatrix;\r\n    }\r\n    static ortho(left, right, bottom, top, zNear, zFar) {\r\n        var res = new Matrix();\r\n\r\n        res[0] = 2.0 / (right - left);\r\n        res[5] = 2.0 / (top - bottom);\r\n        res[10] = -2 / (zFar - zNear);\r\n        res[12] = -((right + left) / (right - left));\r\n        res[13] = -((top + bottom) / (top - bottom));\r\n        res[14] = -((zFar + zNear) / (zFar - zNear));\r\n\r\n        return res;\r\n    }\r\n    static distance(v, u){\r\n        return Math.sqrt(v.x*u.x+v.y*u.y+v.z*u.z);\r\n    }\r\n}\r\n\r\nexport default Matrix;\r\nexport { Maths, Vector3, Camera }","export class GridShader{\r\n   \r\n    static vertexShader = \"precision mediump float;\" + \r\n\r\n    \"attribute vec2 vertPosition;\"+\r\n    \r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 transformation;\"+\r\n    \"uniform mat4 view;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n        \r\n     \"vec4 pos =  projection * view * transformation * vec4(vertPosition, 0.0, 1.0);\"+\r\n      \"tex_coords = vertPosition * 0.5 + 0.5;\"+\r\n      \"tex_coords.y = 1.0-tex_coords.y;\"+\r\n      \"gl_Position = pos;\"+\r\n      \r\n      \r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n    \r\n    \"uniform sampler2D sampler;\"+\r\n    \r\n    \"uniform float width;\"+\r\n    \"uniform float height;\"+\r\n    \"uniform float distance;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \r\n    \"int mod(int a, int b)\"+\r\n    \"{\"+\r\n    \"\treturn a - b * int(a/b);\"+\r\n    \"}\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"vec4 color = vec4(1.0);\"+\r\n      \r\n      \r\n      \"gl_FragColor = color;\"+\r\n    \"}\";\r\n}\r\n\r\n","export class InstancedShader{\r\n   \r\n    static vertexShader = \"precision mediump float;\"+\r\n\r\n    \"attribute vec3 vertPosition;\"+\r\n    \"attribute vec3 normal;\"+\r\n    \"attribute mat4 transformation;\"+\r\n    \"attribute vec3 color;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \"varying vec3 out_color;\"+\r\n    \r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 view;\"+\r\n    \"uniform float camera;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_Position = projection * view * transformation * vec4(vec3(vertPosition*camera*0.2), 1.0);\"+\r\n      \"out_color = color;\"+\r\n      \"fragPos = vec3(transformation * vec4(vertPosition, 1.0));\"+\r\n      \"Normal = normal;\"+\r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n\r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \r\n    \"varying vec3 out_color;\"+\r\n    \r\n    \"uniform sampler2D sampler;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"vec3 norm = normalize(Normal);\"+\r\n      \"vec3 lightDir = normalize(vec3(100) - fragPos);\"+ \r\n      \"float diff = max(dot(norm, lightDir), 0.0); \"+\r\n      \"vec3 diffuse = diff * vec3(1); \"+\r\n      \"gl_FragColor = vec4(out_color,1.0);\"+\r\n     \"}\";\r\n}\r\n\r\n","import Matrix, { Maths } from \"../utils/maths.js\";\r\nimport {InstancedShader} from \"../shaders/instanceshader\";\r\n\r\nexport class InstanceRenderer {\r\n    constructor(vertices, gl){\r\n        this.vao = gl.createVertexArray();\r\n        gl.bindVertexArray(this.vao);\r\n        this.vertices = vertices;\r\n        this.index = 0;\r\n        this.vbo = this.createVBO(gl);\r\n        this.color_vbo = this.createVBO(gl);\r\n        this.shader = new InstanceShader(gl);\r\n        this.storeData(0, 3, vertices, gl);\r\n        gl.bindVertexArray(null);\r\n        gl.disableVertexAttribArray(0);\r\n\r\n        this.addIntanceAttrib(this.vao, this.vbo, 1, 4, 16, 0, gl);\r\n        this.addIntanceAttrib(this.vao, this.vbo, 2, 4, 16, 4, gl);\r\n        this.addIntanceAttrib(this.vao, this.vbo, 3, 4, 16, 8, gl);\r\n        this.addIntanceAttrib(this.vao, this.vbo, 4, 4, 16, 12, gl);\r\n        this.addIntanceAttrib(this.vao, this.color_vbo, 5, 3, 3, 0, gl);\r\n        \r\n        this.drawLines = false;\r\n    }  \r\n    render(particles,view, projection,d, gl){\r\n        let vboData = [];\r\n        let colorData = [];\r\n        this.index = 0;\r\n        this.colorIndex = 0;\r\n        this.shader.bind();\r\n        gl.bindVertexArray(this.vao);\r\n        gl.enableVertexAttribArray(0);\r\n        gl.enableVertexAttribArray(1);\r\n        gl.enableVertexAttribArray(2);\r\n        gl.enableVertexAttribArray(3);\r\n        gl.enableVertexAttribArray(4);\r\n        gl.enableVertexAttribArray(5);\r\n        \r\n        for(let i = 0;i<particles.length;i++){\r\n            this.storeMatrixData(Maths.createTransformationMatrix(particles[i].position.x,particles[i].position.y,particles[i].position.z,0,0,0,\r\n                particles[i].scale.x,particles[i].scale.y,particles[i].scale.z), vboData);\r\n            this.storeVectorData(particles[i].color, colorData);\r\n        }\r\n        this.updateVBO(this.vbo, vboData, gl);\r\n        this.updateVBO(this.color_vbo, colorData, gl);\r\n        if(this.drawLines){\r\n            gl.drawArraysInstanced(gl.LINES, 0, this.vertices.length / 2, particles.length);\r\n\r\n        }else{\r\n            gl.drawArraysInstanced(gl.TRIANGLES, 0, this.vertices.length / 3, particles.length);\r\n        }\r\n\r\n        this.shader.setUniform4fv(\"view\", view);\r\n        this.shader.setUniform4fv(\"projection\", projection);\r\n        this.shader.setUniform3f(\"color\", 1,1,1);\r\n        this.shader.setUniform(\"camera\", d);\r\n\r\n        gl.bindVertexArray(null);\r\n        gl.disableVertexAttribArray(0);\r\n        gl.disableVertexAttribArray(1);\r\n        gl.disableVertexAttribArray(2);\r\n        gl.disableVertexAttribArray(3);\r\n        gl.disableVertexAttribArray(4);\r\n        gl.disableVertexAttribArray(5);\r\n        \r\n        this.shader.unBind();\r\n    }\r\n    createVBO(gl){\r\n        let vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(99999999), gl.STREAM_DRAW, 0);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n        return vbo;\r\n    }\r\n    storeVectorData(v, vboData){\r\n        vboData[this.colorIndex++] = v.x;\r\n        vboData[this.colorIndex++] = v.y;\r\n        vboData[this.colorIndex++] = v.z;\r\n        \r\n    }\r\n    storeMatrixData(mat, vboData){\r\n        /*for(let i = 0;i<4;i++){\r\n            vboData.push(mat[12-i*4]);\r\n            vboData.push(mat[13-i*4]);\r\n            vboData.push(mat[14-i*4]);\r\n            vboData.push(mat[15-i*4]);\r\n        }*/\r\n        for(let i = 0;i<16;i++){\r\n            vboData[this.index++] = mat[i];\r\n        }\r\n    }\r\n    storeData(attribnumber, coordinateSize, data, gl){\r\n        let vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER,vbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW, 0);\r\n        gl.vertexAttribPointer(attribnumber, coordinateSize, gl.FLOAT, gl.FALSE, 0, 0);\r\n    }\r\n    addIntanceAttrib(vao, vbo, attribute, datasize, datalength, offset, gl){\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\t    gl.bindVertexArray(vao);\r\n\t    gl.vertexAttribPointer(attribute, datasize, gl.FLOAT, false, datalength * 4, (offset * 4));\r\n\t    gl.vertexAttribDivisor(attribute, 1);\r\n\t    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\t    gl.bindVertexArray(null);\r\n    }\r\n    updateVBO(vbo, data, gl){\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\t    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STREAM_DRAW);\r\n\t    gl.bufferSubData(gl.ARRAY_BUFFER, 0, new Float32Array(data));\r\n\t    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n    }\r\n}\r\n\r\nexport class InstanceShader {\r\n    constructor(gl){\r\n        this.gl = gl;\r\n        var vertexShaderText = InstancedShader.vertexShader;\r\n        var fragmentShaderText = InstancedShader.fragmentShader;\r\n\r\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n    \r\n        gl.shaderSource(vertexShader, vertexShaderText);\r\n        gl.shaderSource(fragmentShader, fragmentShaderText);\r\n    \r\n        gl.compileShader(vertexShader);\r\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling vertex shader!', gl.getShaderInfoLog(vertexShader));\r\n            return;\r\n        }\r\n    \r\n        gl.compileShader(fragmentShader);\r\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling fragment shader!', gl.getShaderInfoLog(fragmentShader));\r\n            return;\r\n        }\r\n    \r\n        this.program = gl.createProgram();\r\n        gl.attachShader(this.program, vertexShader);\r\n        gl.attachShader(this.program, fragmentShader);\r\n\r\n\r\n        gl.bindAttribLocation(this.program, 0, \"vertPosition\");\r\n        gl.bindAttribLocation(this.program, 1, \"transformation\");\r\n        gl.bindAttribLocation(this.program, 5, \"color\");\r\n        \r\n\r\n        gl.linkProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\r\n            console.error('ERROR linking program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        gl.validateProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.VALIDATE_STATUS)) {\r\n            console.error('ERROR validating program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        \r\n    }\r\n    bind(){\r\n        this.gl.useProgram(this.program);\r\n    }\r\n    unBind(){\r\n        this.gl.useProgram(null);\r\n    }\r\n    setUniform(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1f(location,value);\r\n        }\r\n    }\r\n    setUniform1i(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1i(location,value);\r\n        }\r\n    }\r\n    setUniform3f(name,x,y,z){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform3f(location,x,y,z);\r\n        }\r\n    }\r\n    setUniform4fv(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniformMatrix4fv(location,false,value);\r\n        }\r\n        \r\n    }\r\n}","import Shader from \"./shader.js\";\r\nimport Matrix, {Maths, Vector3} from \"../utils/maths.js\";\r\nimport { Texture } from \"./texture.js\";\r\nimport { GridShader } from \"../shaders/gridshader.js\";\r\nimport {InstanceRenderer} from './InstanceRenderer';\r\n\r\nexport class GridRenderer {\r\n    constructor(gl){\r\n        this.gl = gl;\r\n        this.shader = new Shader([0, 'vertPosition'],GridShader, gl);\r\n        this.vertices = [ -1, 1, 1, 1, -1, -1,\r\n             1, -1, 1, 1, -1, -1];\r\n\r\n\r\n        this.vertical = [1,0,0,-1,0,0];\r\n        this.horizontal = [0,0,1,0,0,-1];\r\n            \r\n        this.vao = this.gl.createVertexArray();\r\n        this.gl.bindVertexArray(this.vao);\r\n        this.gl.enableVertexAttribArray(0);\r\n\r\n        this.vbo = gl.createBuffer();\r\n        this.gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\r\n        this.gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertical), gl.STATIC_DRAW, 0);\r\n        this.gl.vertexAttribPointer(0, 2, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n\r\n        this.gl.bindVertexArray(null);\r\n        this.gl.disableVertexAttribArray(0);\r\n\r\n        this.verticalRenderer = new InstanceRenderer(this.vertical, this.gl);\r\n        this.verticalRenderer.drawLines = true;\r\n        this.horizontalRenderer = new InstanceRenderer(this.horizontal, this.gl);\r\n        this.horizontalRenderer.drawLines = true;\r\n        \r\n        class Line {\r\n            constructor(x,y,z,sx,sy,sz){\r\n                this.position = new Vector3(x,y,z);\r\n                this.scale = new Vector3(sx,sy,sz);\r\n                this.color = new Vector3(1,1,1);\r\n            }\r\n        }\r\n        this.lines = [];\r\n\r\n        for(let i = -100;i<100;i++){\r\n            this.lines.push(new Line(0,0,i*100,10,1,1));\r\n        }\r\n        for(let i = -100;i<100;i++){\r\n            this.lines.push(new Line(i*100,0,0,1,1,10));\r\n        }\r\n    }\r\n    draw(projection, camera, width, height, d, hint){\r\n        let f = 100;\r\n        if(d > 1000) f = 5000;\r\n        if(d > 200 && d < 1000) f = 500;\r\n        if(d < 200 && d > 20) f = 100;\r\n        if(d < 20) f = 10;\r\n        hint(f / 100 + \" cm\");\r\n\r\n        for(let i = 0;i<200;i++){\r\n            this.lines[i].position.z = ((f*i) / 100) - f;\r\n            this.lines[i].scale.x = f / 200;\r\n        }\r\n        for(let i = 200;i<400;i++){\r\n            this.lines[i].position.x = ((f*(i-200)) / 100) - f;\r\n            this.lines[i].scale.z = f / 200;\r\n        }\r\n        this.verticalRenderer.render(this.lines, Maths.createViewMatrix(camera),projection, 1000, this.gl);\r\n        this.horizontalRenderer.render(this.lines, Maths.createViewMatrix(camera),projection, 1000, this.gl);\r\n    }\r\n} ","export class MainShader{\r\n   \r\n    static vertexShader = \"precision mediump float;\"+\r\n\r\n    \"attribute vec3 vertPosition;\"+\r\n    \"attribute vec3 normal;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 transformation;\"+\r\n    \"uniform mat4 view;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_Position = projection * view * transformation * vec4(vertPosition, 1.0);\"+\r\n      \"fragPos = vec3(transformation * vec4(vertPosition, 1.0));\"+\r\n      \"Normal = normal;\"+\r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n\r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \r\n    \"uniform vec3 color;\"+\r\n    \"uniform sampler2D sampler;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"vec3 norm = normalize(Normal);\"+\r\n      \"vec3 lightDir = normalize(vec3(100) - fragPos);\"+ \r\n      \"float diff = max(dot(norm, lightDir), 0.0); \"+\r\n      \"vec3 diffuse = diff * vec3(1); \"+\r\n      \"gl_FragColor = vec4((vec3(.1)+diffuse)*color,1.0);\"+\r\n     \"}\";\r\n}\r\n\r\n","import { Vector3 } from '../utils/maths.js';\r\n\r\nclass Model {\r\n\r\n    constructor(vertices,normals, gl) {\r\n\r\n        this.vertices = vertices;\r\n        this.normals = normals;\r\n        this.gl = gl;\r\n        this.color = new Vector3(.1,.1,.1);\r\n        this.drawLines = true;\r\n        \r\n        this.outline = true;\r\n\r\n        this.position = new Vector3(0,0,0);\r\n        this.rotation = new Vector3(0,0,0);\r\n        this.scale = new Vector3(1,1,1);\r\n        this.vao = gl.createVertexArray();\r\n        gl.bindVertexArray(this.vao);\r\n\r\n        this.vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW, 0);\r\n        gl.vertexAttribPointer(0, 3, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n        this.nvbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.nvbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.normals), gl.STATIC_DRAW, 0);\r\n        gl.vertexAttribPointer(1, 3, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n        gl.bindVertexArray(null);\r\n    }\r\n    draw() {\r\n        if(this.drawLines) this.gl.drawArrays(this.gl.LINE_STRIP, 0, this.vertices.length / 3);\r\n        else this.gl.drawArrays(this.gl.TRIANGLES, 0, this.vertices.length / 3);\r\n    }\r\n};\r\n\r\nexport default Model;","export class Cube {\r\n    static vertices = [0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,\r\n        0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,\r\n        0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,\r\n        -0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5];\r\n    static normals = \r\n         [0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,\r\n            -1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,\r\n            0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0];\r\n}","import Shader from './shader.js'\r\nimport {MainShader} from '../shaders/mainshader.js';\r\nimport {Maths, Vector3} from '../utils/maths.js';\r\nimport Model from './model';\r\nimport {Cube} from '../entities/cube';\r\n\r\nclass RenderSystem {\r\n    constructor(gl){\r\n        this.shader = new Shader([[0,'vertPosition'],[1, 'normal']],MainShader,gl);\r\n        this.models = [];\r\n        this.sources = [];\r\n        this.detectors = [];\r\n        this.guns = [];\r\n        this.particles = [];\r\n        this.gl = gl;\r\n\r\n        this.addModel(new Model([1, 0, 0, -1, 0, 0], [1, 1, 1, 1, 1, 1], gl));\r\n        this.addModel(new Model([0, 1, 0, 0, -1, 0], [1, 1, 1, 1, 1, 1], gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], gl));\r\n\r\n        this.models[0].color = new Vector3(1,0,0);\r\n        this.models[1].color = new Vector3(0,1,0);\r\n        this.models[2].color = new Vector3(0,0,1);\r\n        this.models[3].color = new Vector3(0,0,1);\r\n        \r\n        \r\n        this.drawTracks = true;\r\n        this.drawParticles = true;\r\n        this.drawAxes = true;\r\n    }\r\n      static active_id = -1;\r\n\r\n    removeDetector(detector){\r\n        for(let i = 0;i<this.detectors.length;i++){\r\n            if(this.detectors[i] == detector){\r\n                this.detectors.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    removeGun(gun){\r\n        for(let i = 0;i<this.guns.length;i++){\r\n            if(this.guns[i] == gun){\r\n                this.guns.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    removeSource(source){\r\n        for(let i = 0;i<this.sources.length;i++){\r\n            if(this.sources[i] == source){\r\n                this.sources.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    addModel(model){\r\n        this.models.push(model);\r\n    }\r\n    addParticles(particle){\r\n        this.particles.push(particle);\r\n    }\r\n    addGun(gun){\r\n        this.guns.push(gun);\r\n    }\r\n    addSource(source){\r\n        this.sources.push(source);\r\n    }\r\n    addDetector(detector){\r\n        this.detectors.push(detector);\r\n    }\r\n    clearTracks(){\r\n        this.models = [];\r\n        this.addModel(new Model([1, 0, 0, -1, 0, 0], [1, 1, 1, 1, 1, 1], this.gl));\r\n        this.addModel(new Model([0, 1, 0, 0, -1, 0], [1, 1, 1, 1, 1, 1], this.gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], this.gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], this.gl));\r\n\r\n        this.models[0].color = new Vector3(1,0,0);\r\n        this.models[1].color = new Vector3(0,1,0);\r\n        this.models[2].color = new Vector3(0,0,1);\r\n        this.models[3].color = new Vector3(0,0,1);\r\n        //this is whack\r\n    }\r\n    draw(projection, camera){\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        this.shader.bind();\r\n\r\n\r\n        for(let i = 0;i<this.detectors.length;i++){\r\n            this.gl.enable(this.gl.DEPTH_TEST);\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(this.detectors[i].model.vao);\r\n            let mat = Maths.createTransformationMatrix(this.detectors[i].model.position.x, this.detectors[i].model.position.y, this.detectors[i].model.position.z,\r\n                this.detectors[i].model.rotation.x, this.detectors[i].model.rotation.y, this.detectors[i].model.rotation.z, this.detectors[i].model.scale.x,\r\n                 this.detectors[i].model.scale.y,\r\n                this.detectors[i].model.scale.z);\r\n            this.shader.setUniform3f(\"color\", this.detectors[i].model.color.x, this.detectors[i].model.color.y, this.detectors[i].model.color.z);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            this.detectors[i].model.draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n        }\r\n\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        for(let i = 0;i<this.detectors.length;i++){\r\n            if(this.detectors[i].id != RenderSystem.active_id) continue;\r\n            if(this.detectors[i].id == RenderSystem.active_id){\r\n                this.gl.enableVertexAttribArray(0);\r\n                this.gl.enableVertexAttribArray(1);\r\n                this.gl.bindVertexArray(this.detectors[i].model.vao);\r\n                let mat = Maths.createTransformationMatrix(this.detectors[i].model.position.x, this.detectors[i].model.position.y, this.detectors[i].model.position.z,\r\n                    this.detectors[i].model.rotation.x, this.detectors[i].model.rotation.y, this.detectors[i].model.rotation.z,\r\n                     this.detectors[i].model.scale.x * (1.01),\r\n                     this.detectors[i].model.scale.y * (1.01),\r\n                    this.detectors[i].model.scale.z * (1.01));\r\n                this.shader.setUniform3f(\"color\", 1, .4, 0);\r\n                this.shader.setUniform1i(\"sampler\", 0);\r\n                this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n                this.shader.setUniform4fv(\"projection\", projection);\r\n                this.shader.setUniform4fv(\"transformation\", mat);\r\n                this.detectors[i].model.draw();\r\n                this.gl.disableVertexAttribArray(0);\r\n                this.gl.disableVertexAttribArray(1);\r\n            }\r\n            \r\n        }\r\n        \r\n        \r\n        for (var i = 0; i < this.guns.length; i++) {\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(this.guns[i].model.vao);\r\n            \r\n            \r\n            let rotation = new Vector3(0,0,0);\r\n            rotation.x = Math.atan2(-this.guns[i].direction.y, this.guns[i].direction.z);\r\n            rotation.z = Math.atan2(this.guns[i].direction.x, -this.guns[i].direction.y);\r\n            rotation.y = Math.atan2(this.guns[i].direction.x, this.guns[i].direction.z);\r\n\r\n            let mat = Maths.createTransformationMatrix(this.guns[i].model.position.x, this.guns[i].model.position.y, this.guns[i].model.position.z,\r\n                rotation.x, rotation.y, rotation.z, camera.d*0.01,camera.d*0.01,camera.d*0.01);\r\n\r\n\r\n            \r\n            this.shader.setUniform3f(\"color\", this.guns[i].model.color.x, this.guns[i].model.color.y, this.guns[i].model.color.z);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            this.guns[i].model.draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n            console.log(this.guns[i].model.position.x);\r\n        }\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        for (var i = 0; i < this.sources.length; i++) {\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(this.sources[i].model.vao);\r\n            let mat = Maths.createTransformationMatrix(this.sources[i].model.position.x, this.sources[i].model.position.y, this.sources[i].model.position.z,\r\n                this.sources[i].model.rotation.x, this.sources[i].model.rotation.y, this.sources[i].model.rotation.z, camera.d*0.004,camera.d*0.004,camera.d*0.004);\r\n\r\n            this.shader.setUniform3f(\"color\", this.sources[i].model.color.x, this.sources[i].model.color.y, this.sources[i].model.color.z);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            this.sources[i].model.draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n        }\r\n        this.gl.enable(this.gl.DEPTH_TEST);\r\n\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        if(this.drawAxes){\r\n            for(let i = 0;i<4;i++){\r\n                this.gl.enableVertexAttribArray(0);\r\n                this.gl.enableVertexAttribArray(1);\r\n                this.gl.bindVertexArray(this.models[i].vao);\r\n                let mat = Maths.createTransformationMatrix(this.models[i].position.x, this.models[i].position.y, this.models[i].position.z,\r\n                    this.models[i].rotation.x, this.models[i].rotation.y, this.models[i].rotation.z,\r\n                    camera.d,\r\n                     camera.d,\r\n                    camera.d);\r\n                this.shader.setUniform3f(\"color\", this.models[i].color.x, this.models[i].color.y, this.models[i].color.z);\r\n                this.shader.setUniform1i(\"sampler\", 0);\r\n                this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n                this.shader.setUniform4fv(\"projection\", projection);\r\n                this.shader.setUniform4fv(\"transformation\", mat);\r\n                this.models[i].draw();\r\n                this.gl.disableVertexAttribArray(0);\r\n                this.gl.disableVertexAttribArray(1);\r\n            }\r\n            console.log(this.drawAxes);\r\n        }\r\n        \r\n        if(!this.drawTracks){\r\n            this.shader.unBind();\r\n            return;\r\n        }\r\n        \r\n        for(let i = 3;i<this.models.length;i++){\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(this.models[i].vao);\r\n            let mat = Maths.createTransformationMatrix(this.models[i].position.x, this.models[i].position.y, this.models[i].position.z,\r\n                this.models[i].rotation.x, this.models[i].rotation.y, this.models[i].rotation.z,\r\n                this.models[i].scale.x, this.models[i].scale.y, this.models[i].scale.z);\r\n            this.shader.setUniform3f(\"color\", this.models[i].color.x, this.models[i].color.y, this.models[i].color.z);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            this.models[i].draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n        }\r\n        this.shader.unBind();\r\n        \r\n    }\r\n}\r\nexport default RenderSystem;","class Detector {\r\n    constructor(m) {\r\n        this.model = m;\r\n        this.material = 'Pb';\r\n        this.active = false;\r\n        this.deposit = 0;\r\n        this.name = \"\";\r\n        this.id = 0;\r\n        this.hits = [];\r\n        this.geometry = 'cube';\r\n        this.numberOfHits = [];\r\n    }\r\n    contains(f) {\r\n        for (var i = 0; i < this.hits.length; i++) {\r\n            if (f == this.hits[i]) return true;\r\n        }\r\n        return false;\r\n    }\r\n    clearDeposit(){\r\n        this.hits = [];\r\n        this.numberOfHits = [];\r\n    }\r\n    sort() {\r\n        var list = [];\r\n        for (var j = 0; j < this.hits.length; j++)\r\n            list.push({ 'hit': this.hits[j], 'no': this.numberOfHits[j] });\r\n\r\n        list.sort(function (a, b) {\r\n            return ((a.hit < b.hit) ? -1 : ((a.hit == b.hit) ? 0 : 1));\r\n        });\r\n        \r\n        for (var k = 0; k < list.length; k++) {\r\n            this.hits[k] = list[k].hit;\r\n            this.numberOfHits[k] = list[k].no;\r\n        }\r\n    }\r\n    getIndex(f) {\r\n        for (var i = 0; i < this.hits.length; i++) {\r\n            if (Math.abs(f-this.hits[i]) == 0) return i;\r\n        }\r\n        return -1;\r\n    }\r\n};\r\n\r\nexport default Detector;","export class ParticleGun {\r\n    constructor(model, position, direction, energy){\r\n        this.position = position;\r\n        this.direction = direction;\r\n        this.energy = energy;\r\n        this.model = model;\r\n        this.name = \"Particle Gun\";\r\n    }\r\n}","export class GunMesh {\r\n    constructor(){}\r\n    static vertices = [-1,-1,-1,0,0,1,0,0,1,-1,-1,-1,0,0,1,-1,1,-1,-1,1,-1,0,0,1,0,0,1,-1,1,-1,0,0,1,1,1,-1,1,1,-1,0,0,1,0,0,1,1,1,-1,0,0,1,1,-1,-1,1,-1,-1,0,0,1,0,0,1,1,-1,-1,0,0,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1];\r\n    static normals = [0,0,0,0,0,0,0,0,0,-0.8944271802902222,0,0.4472135901451111,-0.8944271802902222,0,0.4472135901451111,-0.8944271802902222,0,0.4472135901451111,0,0,0,0,0,0,0,0,0,0,0.8944271802902222,0.4472135901451111,0,0.8944271802902222,0.4472135901451111,0,0.8944271802902222,0.4472135901451111,0,0,0,0,0,0,0,0,0,0.8944271802902222,0,0.4472135901451111,0.8944271802902222,0,0.4472135901451111,0.8944271802902222,0,0.4472135901451111,0,0,0,0,0,0,0,0,0,0,-0.8944271802902222,0.4472135901451111,0,-0.8944271802902222,0.4472135901451111,0,-0.8944271802902222,0.4472135901451111,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\r\n}","import { Vector3 } from \"../utils/maths.js\";\r\n\r\nexport class ParticleSource {\r\n    constructor(model, position, material){\r\n        this.position = position;\r\n        this.name = \"Particle Source\";\r\n        this.scale = new Vector3(1,1,1);\r\n        this.material = material;\r\n        this.model = model;\r\n        this.model.color = new Vector3(0,1,0);\r\n        this.active = false;\r\n        this.id = 0;\r\n    }\r\n}","class STLParrser {\r\n    \r\n    static parseData(data){\r\n\r\n        function readInt(data, i) {\r\n            var chars = new Uint8Array([data.charCodeAt(i), data.charCodeAt(i + 1), data.charCodeAt(i + 2), data.charCodeAt(i + 3)]);\r\n    \r\n            return new Int32Array(chars.buffer)[0];\r\n        }\r\n        function readFloat(data, i) {\r\n            var chars = new Uint8Array([data.charCodeAt(i), data.charCodeAt(i + 1), data.charCodeAt(i + 2), data.charCodeAt(i + 3)]);\r\n    \r\n            return new Float32Array(chars.buffer)[0];\r\n        }\r\n\r\n        let res = [];\r\n        var normals = [];\r\n        var size = readInt(data, 80);\r\n        for (var k = 0; k < size; k++) {\r\n            for (var j = 0; j < 9; j++) {\r\n                res.push(readFloat(data, 96 + j * 4 + k * 50));\r\n            }\r\n        }\r\n        for (var k = 0; k < size; k++) {\r\n            for (var j = 0; j < 3; j++) {\r\n                normals.push(readFloat(data, 84 + j * 4 + k * 50));\r\n            }\r\n            for (var j = 0; j < 3; j++) {\r\n                normals.push(readFloat(data, 84 + j * 4 + k * 50));\r\n            }\r\n            for (var j = 0; j < 3; j++) {\r\n                normals.push(readFloat(data, 84 + j * 4 + k * 50));\r\n            }\r\n        }\r\n        let m = new ModelData();\r\n        m.vertices = res;\r\n        m.normals = normals;\r\n\r\n        return m;\r\n    }\r\n}\r\nclass ModelData {\r\n    constructor(){\r\n        this.vertices = [];\r\n        this.normals = [];\r\n    }\r\n}\r\n\r\nexport default STLParrser;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\nimport { GridRenderer } from '../rendering/grid.js';\r\nimport { Maths,Camera,Vector3 } from '../utils/maths.js';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport { render } from '@testing-library/react';\r\nimport Detector from '../detector/Detektor.js';\r\nimport Model from '../rendering/model';\r\nimport {Cube} from '../entities/cube';\r\nimport {ParticleGun} from '../gun/ParticleGun';\r\nimport {GunMesh} from '../gun/gun';\r\nimport {ParticleSource} from '../source/ParticleSource';\r\nimport { InstanceRenderer } from '../rendering/InstanceRenderer';\r\n\r\nimport STLParser from '../utils/STLParser';\r\n\r\n\r\nclass Canvas extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = ({hint: \" \"});\r\n    this.canvas = createRef();\r\n    this.camera = new Camera(45, -45, 100, new Vector3(0, 0, 0), new Vector3(0, 0, 0));\r\n    this.oldX = 0;\r\n    this.oldY = 0;\r\n    this.move = false;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.keyDown = ` ${0}`;\r\n    this.down = false;\r\n    this.renderer = null;\r\n    this.instanceRenderer = null;\r\n    this.particles = [];\r\n    this.drawTracks = false;\r\n    this.drawParticles = true;\r\n    this.drawGrid = false;\r\n    this.gl = null;\r\n    this.updateHint = this.updateHint.bind(this);\r\n  }\r\n  updateHint(s){\r\n    this.setState({hint: s});\r\n  }\r\n  setShowTracks(b){\r\n    this.renderer.drawTracks = b;\r\n  }\r\n  setShowAxes(b){\r\n    this.renderer.drawAxes = b;\r\n  }\r\n  getMouseXd(){\r\n    return this.oldX - this.x;\r\n  }\r\n  getMouseYd(){\r\n    return this.oldY - this.y;\r\n  }\r\n  clearRun(){\r\n    this.particles = [];\r\n    this.renderer.clearTracks();\r\n  }\r\n  componentDidMount() {\r\n    function updateCamera(camera) {\r\n      if (camera.y > 89.0) {\r\n          camera.y = 89.0;\r\n      }\r\n      if (camera.y < -89.0) {\r\n          camera.y = -89.0;\r\n      }\r\n  \r\n      camera.p.x = (camera.d * -Math.sin(camera.x * Math.PI / 180.0)\r\n          * Math.cos(camera.y * Math.PI / 180.0) + camera.a.x);\r\n      camera.p.y = (camera.d * -Math.sin(camera.y * Math.PI / 180.0)\r\n          + camera.a.y);\r\n      camera.p.z = (-camera.d * Math.cos(camera.x * Math.PI / 180.0)\r\n          * Math.cos(camera.y * Math.PI / 180.0) + camera.a.z);\r\n  \r\n\r\n      return camera;\r\n  }\r\n    this.gl = this.canvas.current.getContext(\"webgl2\");\r\n    let color = 0;  \r\n    let gridRenderer = new GridRenderer(this.gl);\r\n    this.renderer = new RenderSystem(this.gl);\r\n    this.instanceRenderer = new InstanceRenderer(Cube.vertices, this.gl);\r\n    var draw = ()=>{\r\n      color += .001;\r\n      this.gl.clearColor(.2,.2,.2,1.0);\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n      \r\n\r\n      let projection = Maths.createProjectionMatrix(70,.1 * this.camera.d,1000 * this.camera.d, this.canvas.current.offsetWidth,this.canvas.current.offsetHeight);\r\n      if(this.down && this.move){\r\n        if (this.keyDown === 17) {\r\n          this.camera.a.y -= .01 * (this.getMouseYd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n          this.camera.a.z += .01 * (Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d);\r\n\r\n              this.camera.a.z -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * -this.getMouseXd() * .01 * this.camera.d);\r\n\r\n\r\n\r\n      } else {\r\n        this.camera.x += this.getMouseXd() / 2;\r\n        this.camera.y += this.getMouseYd() / 2;\r\n      }\r\n      }\r\n      \r\n      if(this.drawGrid) gridRenderer.draw(projection, this.camera, this.canvas.current.offsetWidth,this.canvas.current.offsetHeight, this.camera.d, this.updateHint);\r\n      this.renderer.draw(projection, this.camera);\r\n      if(this.drawParticles) this.instanceRenderer.render(this.particles, Maths.createViewMatrix(this.camera),projection, this.camera.d, this.gl);\r\n      updateCamera(this.camera);\r\n      this.move = false;\r\n      requestAnimationFrame(draw);\r\n      \r\n    }\r\n    requestAnimationFrame(draw);\r\n  }\r\n  addSource(x,y,z,mat){\r\n    let source = new ParticleSource(new Model(Cube.vertices, Cube.normals,this.gl),new Vector3(x,y,z),mat);\r\n    source.model.drawLines = false;\r\n    source.model.position = new Vector3(x,y,z);\r\n    this.renderer.addSource(source);\r\n\r\n    return source;\r\n  }\r\n  addParticle(particle){\r\n    this.particles.push(particle);\r\n  }\r\n  addSTLDetector(x,y,z,rx,ry,rz,sx,sy,sz,mat,data){\r\n    let detector = new Detector(new Model(data.vertices, data.normals, this.gl));\r\n    detector.model.drawLines = false;\r\n    detector.model.color = new Vector3(1,1,1);\r\n    detector.model.position.x = x;\r\n    detector.model.position.y = y;\r\n    detector.model.position.z = z;\r\n\r\n    detector.model.rotation.x = rx;\r\n    detector.model.rotation.y = ry;\r\n    detector.model.rotation.z = rz;\r\n\r\n    detector.model.scale.x = sx;\r\n    detector.model.scale.y = sy;\r\n    detector.model.scale.z = sz;\r\n    \r\n    detector.material = mat;\r\n\r\n    this.renderer.addDetector(detector);\r\n    \r\n    return detector;\r\n  }\r\n  async addDetector(x,y,z,rx,ry,rz,sx,sy,sz, mat, type, volumes){\r\n    let detector = null;\r\n    let parameterize = ()=>{\r\n      detector.model.drawLines = false;\r\n      detector.model.color = new Vector3(1,1,1);\r\n      detector.model.position.x = x;\r\n      detector.model.position.y = y;\r\n      detector.model.position.z = z;\r\n  \r\n      detector.model.rotation.x = rx;\r\n      detector.model.rotation.y = ry;\r\n      detector.model.rotation.z = rz;\r\n  \r\n      detector.model.scale.x = sx;\r\n      detector.model.scale.y = sy;\r\n      detector.model.scale.z = sz;\r\n      \r\n      detector.material = mat;\r\n  \r\n      this.renderer.addDetector(detector);\r\n    };\r\n      let str = \"\";\r\n        for(let i = 0;i<volumes.length;i++){\r\n          if(type==volumes[i].name) str = volumes[i].data;\r\n        }\r\n        let modeldata = STLParser.parseData(str);\r\n        detector = new Detector(new Model(modeldata.vertices, modeldata.normals, this.gl));\r\n    parameterize();\r\n    return detector;\r\n    \r\n  }\r\n  addModel(vertices, normals){\r\n    let model = new Model(vertices, normals, this.gl);\r\n\r\n    this.renderer.addModel(model);\r\n\r\n    return model;\r\n  }\r\n  addGun(x,y,z,dx,dy,dz,energy){\r\n    let gun_model = new Model(GunMesh.vertices, GunMesh.normals, this.gl);\r\n    gun_model.drawLines = false;\r\n    let gun = new ParticleGun(gun_model,new Vector3(x,y,z),new Vector3(dx,dy,dz),energy);\r\n    gun.model.position = new Vector3(x,y,z);\r\n    \r\n    this.renderer.addGun(gun);\r\n\r\n    return gun;\r\n\r\n  }\r\n  removeSource(source){\r\n    this.renderer.removeSource(source);\r\n  }\r\n  removeDetector(detector){\r\n    this.renderer.removeDetector(detector);\r\n  }\r\n  removeGun(gun){\r\n    this.renderer.removeGun(gun);\r\n  }\r\n  render(){\r\n    return <div>\r\n      <p ref={this.hint} style={{\"position\":\"fixed\", \"bottom\" : \"10%\", \"left\" : \"20%\", \"z-index\" : \"4\", \"color\" : \"white\"}}>{this.state.hint}</p>\r\n    <canvas ref={this.canvas} onMouseMove={(e)=>{ \r\n      this.move = true;\r\n      this.oldX = this.x;\r\n      this.oldY = this.y;\r\n      this.x = e.pageX;\r\n      this.y = e.pageY;\r\n    }}\r\n    tabIndex=\"0\" \r\n    width='2000'\r\n    height='2000'\r\n    style={{position: 'fixed', right: 0, left: 0, width: '100%', height: '100%'}}\r\n    onKeyDown={(e)=>{this.keyDown = e.keyCode;}}\r\n    onKeyUp={(e)=>{this.keyDown = ` ${0}`;}}\r\n    onMouseDown={()=>{this.down = true;}} \r\n    onMouseUp={()=>{this.down = false;}}\r\n    onWheel={(e)=>{\r\n      let delta = 0;\r\n      if(e.deltaY > 0) delta = 1;\r\n      else delta = -1;\r\n      this.camera.d += (this.camera.d / (delta*100)) * 10;\r\n      }}/>\r\n  </div>\r\n    \r\n   \r\n  }\r\n}\r\n\r\nexport default Canvas;\r\n","class MaterialList {\r\n    static sources = [\"Ac225\",\r\n        \"Ac227A\",\r\n        \"Ac227B\",\r\n        \"Ac228A\",\r\n        \"Ac228B\",\r\n        \"Am241\",\r\n        \"Am243\",\r\n        \"Am245\",\r\n        \"At215\",\r\n        \"At217A\",\r\n        \"At217B\",\r\n        \"At218A\",\r\n        \"At218B\",\r\n        \"At219A\",\r\n        \"At219B\",\r\n        \"Bi209\",\r\n        \"Bi210A\",\r\n        \"Bi210B\",\r\n        \"Bi211A\",\r\n        \"Bi211B\",\r\n        \"Bi212A\",\r\n        \"Bi212B\",\r\n        \"Bi213A\",\r\n        \"Bi213B\",\r\n        \"Bi214A\",\r\n        \"Bi214B\",\r\n        \"Bi215\",\r\n        \"Bk249A\",\r\n        \"Bk249B\",\r\n        \"Cf249\",\r\n        \"Cf253A\",\r\n        \"Cf253B\",\r\n        \"Cm244\",\r\n        \"Cm245\",\r\n        \"Cm249\",\r\n        \"Co60\",\r\n        \"Es253\",\r\n        \"Fr221\",\r\n        \"Fr223A\",\r\n        \"Fr223B\",\r\n        \"Fr224\",\r\n        \"Hg206\",\r\n        \"Ni60\",\r\n        \"Np237\",\r\n        \"Np239\",\r\n        \"Pa231\",\r\n        \"Pa233\",\r\n        \"Pa234\",\r\n        \"Pa234MB\",\r\n        \"Pa234MI\",\r\n        \"Pb206\",\r\n        \"Pb207\",\r\n        \"Pb208\",\r\n        \"Pb209\",\r\n        \"Pb210A\",\r\n        \"Pb210B\",\r\n        \"Pb211\",\r\n        \"Pb212\",\r\n        \"Pb214\",\r\n        \"Po210\",\r\n        \"Po211\",\r\n        \"Po212\",\r\n        \"Po213\",\r\n        \"Po214\",\r\n        \"Po215A\",\r\n        \"Po215B\",\r\n        \"Po216\",\r\n        \"Po218A\",\r\n        \"Po218B\",\r\n        \"Pu236\",\r\n        \"Pu238\",\r\n        \"Pu239\",\r\n        \"Pu240\",\r\n        \"Pu241A\",\r\n        \"Pu241B\",\r\n        \"Pu242\",\r\n        \"Ra223\",\r\n        \"Ra224\",\r\n        \"Ra225\",\r\n        \"Ra226\",\r\n        \"Ra228\",\r\n        \"Rn217\",\r\n        \"Rn218\",\r\n        \"Rn219\",\r\n        \"Rn220\",\r\n        \"Rn222\",\r\n        \"Th227\",\r\n        \"Th228\",\r\n        \"Th229\",\r\n        \"Th230\",\r\n        \"Th231\",\r\n        \"Th232\",\r\n        \"Th234\",\r\n        \"Tl206\",\r\n        \"Tl207\",\r\n        \"Tl208\",\r\n        \"Tl209\",\r\n        \"Tl210\",\r\n        \"U232\",\r\n        \"U233\",\r\n        \"U234\",\r\n        \"U235\",\r\n        \"U236\",\r\n        \"U237\",\r\n        \"U238\"\r\n    ];\r\n    static compounds = [\r\n        \"A-150_TISSUE\",\r\n        \"ACETONE\",\r\n        \"ACETYLENE\",\r\n        \"ADENINE\",\r\n        \"ADIPOSE_TISSUE_ICRP\",\r\n        \"AIR\",\r\n        \"ALANINE\",\r\n        \"ALUMINUM_OXIDE\",\r\n        \"AMBER\",\r\n        \"AMMONIA\",\r\n        \"ANILINE\",\r\n        \"ANTHRACENE\",\r\n        \"B-100_BONE\",\r\n        \"BAKELITE\",\r\n        \"BARIUM_FLUORIDE\",\r\n        \"BARIUM_SULFATE\",\r\n        \"BENZENE\",\r\n        \"BERYLLIUM_OXIDE\",\r\n        \"BGO\",\r\n        \"BLOOD_ICRP\",\r\n        \"BONE_COMPACT_ICRU\",\r\n        \"BONE_CORTICAL_ICRP\",\r\n        \"BORON_CARBIDE\",\r\n        \"BORON_OXIDE\",\r\n        \"BRAIN_ICRP\",\r\n        \"BUTANE\",\r\n        \"N-BUTYL_ALCOHOL\",\r\n        \"C-552\",\r\n        \"CADMIUM_TELLURIDE\",\r\n        \"CADMIUM_TUNGSTATE\",\r\n        \"CALCIUM_CARBONATE\",\r\n        \"CALCIUM_FLUORIDE\",\r\n        \"CALCIUM_OXIDE\",\r\n        \"CALCIUM_SULFATE\",\r\n        \"CALCIUM_TUNGSTATE\",\r\n        \"CARBON_DIOXIDE\",\r\n        \"CARBON_TETRACHLORIDE\",\r\n        \"CELLULOSE_CELLOPHANE\",\r\n        \"CELLULOSE_BUTYRATE\",\r\n        \"CELLULOSE_NITRATE\",\r\n        \"CERIC_SULFATE\",\r\n        \"CESIUM_FLUORIDE\",\r\n        \"CESIUM_IODIDE\",\r\n        \"CHLOROBENZENE\",\r\n        \"CHLOROFORM\",\r\n        \"CONCRETE\",\r\n        \"CYCLOHEXANE\",\r\n        \"1,2-DICHLOROBENZENE\",\r\n        \"DICHLORODIETHYL_ETHER\",\r\n        \"1,2-DICHLOROETHANE\",\r\n        \"DIETHYL_ETHER\",\r\n        \"N,N-DIMETHYL_FORMAMIDE\",\r\n        \"DIMETHYL_SULFOXIDE\",\r\n        \"ETHANE\",\r\n        \"ETHYL_ALCOHOL\",\r\n        \"ETHYL_CELLULOSE\",\r\n        \"ETHYLENE\",\r\n        \"EYE_LENS_ICRP\",\r\n        \"FERRIC_OXIDE\",\r\n        \"FERROBORIDE\",\r\n        \"FERROUS_OXIDE\",\r\n        \"FERROUS_SULFATE\",\r\n        \"FREON-12\",\r\n        \"FREON-12B2\",\r\n        \"FREON-13\",\r\n        \"FREON-13B1\",\r\n        \"FREON-13I1\",\r\n        \"GADOLINIUM_OXYSULFIDE\",\r\n        \"GALLIUM_ARSENIDE\",\r\n        \"GEL_PHOTO_EMULSION\",\r\n        \"Pyrex_Glass\",\r\n        \"GLASS_LEAD\",\r\n        \"GLASS_PLATE\",\r\n        \"GLUTAMINE\",\r\n        \"GLYCEROL\",\r\n        \"GUANINE\",\r\n        \"GYPSUM\",\r\n        \"N-HEPTANE\",\r\n        \"N-HEXANE\",\r\n        \"KAPTON\",\r\n        \"LANTHANUM_OXYBROMIDE\",\r\n        \"LANTHANUM_OXYSULFIDE\",\r\n        \"LEAD_OXIDE\",\r\n        \"LITHIUM_AMIDE\",\r\n        \"LITHIUM_CARBONATE\",\r\n        \"LITHIUM_FLUORIDE\",\r\n        \"LITHIUM_HYDRIDE\",\r\n        \"LITHIUM_IODIDE\",\r\n        \"LITHIUM_OXIDE\",\r\n        \"LITHIUM_TETRABORATE\",\r\n        \"LUNG_ICRP\",\r\n        \"M3_WAX\",\r\n        \"MAGNESIUM_CARBONATE\",\r\n        \"MAGNESIUM_FLUORIDE\",\r\n        \"MAGNESIUM_OXIDE\",\r\n        \"MAGNESIUM_TETRABORATE\",\r\n        \"MERCURIC_IODIDE\",\r\n        \"METHANE\",\r\n        \"METHANOL\",\r\n        \"MIX_D_WAX\",\r\n        \"MS20_TISSUE\",\r\n        \"MUSCLE_SKELETAL_ICRP\",\r\n        \"MUSCLE_STRIATED_ICRU\",\r\n        \"MUSCLE_WITH_SUCROSE\",\r\n        \"MUSCLE_WITHOUT_SUCROSE\",\r\n        \"NAPHTHALENE\",\r\n        \"NITROBENZENE\",\r\n        \"NITROUS_OXIDE\",\r\n        \"NYLON-8062\",\r\n        \"NYLON-6-6\",\r\n        \"NYLON-6-10\",\r\n        \"NYLON-11_RILSAN\",\r\n        \"OCTANE\",\r\n        \"PARAFFIN\",\r\n        \"N-PENTANE\",\r\n        \"PHOTO_EMULSION\",\r\n        \"PLASTIC_SC_VINYLTOLUENE\",\r\n        \"PLUTONIUM_DIOXIDE\",\r\n        \"POLYACRYLONITRILE\",\r\n        \"POLYCARBONATE\",\r\n        \"POLYCHLOROSTYRENE\",\r\n        \"POLYETHYLENE\",\r\n        \"MYLAR\",\r\n        \"PLEXIGLASS\",\r\n        \"POLYOXYMETHYLENE\",\r\n        \"POLYPROPYLENE\",\r\n        \"POLYSTYRENE\",\r\n        \"TEFLON\",\r\n        \"POLYTRIFLUOROCHLOROETHYLENE\",\r\n        \"POLYVINYL_ACETATE\",\r\n        \"POLYVINYL_ALCOHOL\",\r\n        \"POLYVINYL_BUTYRAL\",\r\n        \"POLYVINYL_CHLORIDE\",\r\n        \"POLYVINYLIDENE_CHLORIDE\",\r\n        \"POLYVINYLIDENE_FLUORIDE\",\r\n        \"POLYVINYL_PYRROLIDONE\",\r\n        \"POTASSIUM_IODIDE\",\r\n        \"POTASSIUM_OXIDE\",\r\n        \"PROPANE\",\r\n        \"lPROPANE\",\r\n        \"N-PROPYL_ALCOHOL\",\r\n        \"PYRIDINE\",\r\n        \"RUBBER_BUTYL\",\r\n        \"RUBBER_NATURAL\",\r\n        \"RUBBER_NEOPRENE\",\r\n        \"SILICON_DIOXIDE\",\r\n        \"SILVER_BROMIDE\",\r\n        \"SILVER_CHLORIDE\",\r\n        \"SILVER_HALIDES\",\r\n        \"SILVER_IODIDE\",\r\n        \"SKIN_ICRP\",\r\n        \"SODIUM_CARBONATE\",\r\n        \"SODIUM_IODIDE\",\r\n        \"SODIUM_MONOXIDE\",\r\n        \"SODIUM_NITRATE\",\r\n        \"STILBENE\",\r\n        \"SUCROSE\",\r\n        \"TERPHENYL\",\r\n        \"TESTIS_ICRP\",\r\n        \"TETRACHLOROETHYLENE\",\r\n        \"THALLIUM_CHLORIDE\",\r\n        \"TISSUE_SOFT_ICRP\",\r\n        \"TISSUE_SOFT_ICRU-4\",\r\n        \"TISSUE-METHANE\",\r\n        \"TISSUE-PROPANE\",\r\n        \"TITANIUM_DIOXIDE\",\r\n        \"TOLUENE\",\r\n        \"TRICHLOROETHYLENE\",\r\n        \"TRIETHYL_PHOSPHATE\",\r\n        \"TUNGSTEN_HEXAFLUORIDE\",\r\n        \"URANIUM_DICARBIDE\",\r\n        \"URANIUM_MONOCARBIDE\",\r\n        \"URANIUM_OXIDE\",\r\n        \"UREA\",\r\n        \"VALINE\",\r\n        \"VITON\",\r\n        \"WATER\",\r\n        \"WATER_VAPOR\",\r\n        \"XYLENE\",\r\n        \"GRAPHITE\"\r\n    ];\r\n    static materials = [{ symbol: \"H\", z: 1, name: \"Hydrogen\" },\r\n    { symbol: \"He\", z: 2, name: \"Helium\" },\r\n    { symbol: \"Li\", z: 3, name: \"Lithium\" },\r\n    { symbol: \"Be\", z: 4, name: \"Beryllium\" },\r\n    { symbol: \"B\", z: 5, name: \"Boron\" },\r\n    { symbol: \"C\", z: 6, name: \"Carbon\" },\r\n    { symbol: \"N\", z: 7, name: \"Nitrogen\" },\r\n    { symbol: \"O\", z: 8, name: \"Oxygen\" },\r\n    { symbol: \"F\", z: 9, name: \"Fluorine\" },\r\n    { symbol: \"Ne\", z: 10, name: \"Neon\" },\r\n    { symbol: \"Na\", z: 11, name: \"Sodium\" },\r\n    { symbol: \"Mg\", z: 12, name: \"Magnesium\" },\r\n    { symbol: \"Al\", z: 13, name: \"Aluminium\" },\r\n    { symbol: \"Si\", z: 14, name: \"Silicon\" },\r\n    { symbol: \"P\", z: 15, name: \"Phosphorus\" },\r\n    { symbol: \"S\", z: 16, name: \"Sulfur\" },\r\n    { symbol: \"Cl\", z: 17, name: \"Chlorine\" },\r\n    { symbol: \"Ar\", z: 18, name: \"Argon\" },\r\n    { symbol: \"K\", z: 19, name: \"Potassium\" },\r\n    { symbol: \"Ca\", z: 20, name: \"Calcium\" },\r\n    { symbol: \"Sc\", z: 21, name: \"Scandium\" },\r\n    { symbol: \"Ti\", z: 22, name: \"Titanium\" },\r\n    { symbol: \"V\", z: 23, name: \"Vanadium\" },\r\n    { symbol: \"Cr\", z: 24, name: \"Chromium\" },\r\n    { symbol: \"Mn\", z: 25, name: \"Manganese\" },\r\n    { symbol: \"Fe\", z: 26, name: \"Iron\" },\r\n    { symbol: \"Co\", z: 27, name: \"Cobalt\" },\r\n    { symbol: \"Ni\", z: 28, name: \"Nickel\" },\r\n    { symbol: \"Cu\", z: 29, name: \"Copper\" },\r\n    { symbol: \"Zn\", z: 30, name: \"Zinc\" },\r\n    { symbol: \"Ga\", z: 31, name: \"Gallium\" },\r\n    { symbol: \"Ge\", z: 32, name: \"Germanium\" },\r\n    { symbol: \"As\", z: 33, name: \"Arsenic\" },\r\n    { symbol: \"Se\", z: 34, name: \"Selenium\" },\r\n    { symbol: \"Br\", z: 35, name: \"Bromine\" },\r\n    { symbol: \"Kr\", z: 36, name: \"Krypton\" },\r\n    { symbol: \"Rb\", z: 37, name: \"Rubidium\" },\r\n    { symbol: \"Sr\", z: 38, name: \"Strontium\" },\r\n    { symbol: \"Y\", z: 39, name: \"Yttrium\" },\r\n    { symbol: \"Zr\", z: 40, name: \"Zirconium\" },\r\n    { symbol: \"Nb\", z: 41, name: \"Niobium\" },\r\n    { symbol: \"Mo\", z: 42, name: \"Molybdenum\" },\r\n    { symbol: \"Tc\", z: 43, name: \"Technetium\" },\r\n    { symbol: \"Ru\", z: 44, name: \"Ruthenium\" },\r\n    { symbol: \"Rh\", z: 45, name: \"Rhodium\" },\r\n    { symbol: \"Pd\", z: 46, name: \"Palladium\" },\r\n    { symbol: \"Ag\", z: 47, name: \"Silver\" },\r\n    { symbol: \"Cd\", z: 48, name: \"Cadmium\" },\r\n    { symbol: \"In\", z: 49, name: \"Indium\" },\r\n    { symbol: \"Sn\", z: 50, name: \"\" },\r\n    { symbol: \"Sb\", z: 51, name: \"Antimony\" },\r\n    { symbol: \"Te\", z: 52, name: \"Tellurium\" },\r\n    { symbol: \"I\", z: 53, name: \"Iodine\" },\r\n    { symbol: \"Xe\", z: 54, name: \"Xenon\" },\r\n    { symbol: \"Cs\", z: 55, name: \"Caesium\" },\r\n    { symbol: \"Ba\", z: 56, name: \"Barium\" },\r\n    { symbol: \"La\", z: 57, name: \"Lanthanum\" },\r\n    { symbol: \"Ce\", z: 58, name: \"Cerium\" },\r\n    { symbol: \"Pr\", z: 59, name: \"Praseodymium\" },\r\n    { symbol: \"Nd\", z: 60, name: \"Neodymium\" },\r\n    { symbol: \"Pm\", z: 61, name: \"Promethium\" },\r\n    { symbol: \"Sm\", z: 62, name: \"Samarium\" },\r\n    { symbol: \"Eu\", z: 63, name: \"Europium\" },\r\n    { symbol: \"Gd\", z: 64, name: \"Gadolinium\" },\r\n    { symbol: \"Tb\", z: 65, name: \"Terbium\" },\r\n    { symbol: \"Dy\", z: 66, name: \"Dysprosium\" },\r\n    { symbol: \"Ho\", z: 67, name: \"Holmium\" },\r\n    { symbol: \"Er\", z: 68, name: \"Erbium\" },\r\n    { symbol: \"Tm\", z: 69, name: \"Thulium\" },\r\n    { symbol: \"Yb\", z: 70, name: \"Ytterbium\" },\r\n    { symbol: \"Lu\", z: 71, name: \"Lutetium\" },\r\n    { symbol: \"Hf\", z: 72, name: \"Hafnium\" },\r\n    { symbol: \"Ta\", z: 73, name: \"Tantalum\" },\r\n    { symbol: \"W\", z: 74, name: \"Tungsten\" },\r\n    { symbol: \"Re\", z: 75, name: \"Rhenium\" },\r\n    { symbol: \"Os\", z: 76, name: \"Osmium\" },\r\n    { symbol: \"Ir\", z: 77, name: \"Iridium\" },\r\n    { symbol: \"Pt\", z: 78, name: \"Platinum\" },\r\n    { symbol: \"Au\", z: 79, name: \"Gold\" },\r\n    { symbol: \"Hg\", z: 80, name: \"Mercury\" },\r\n    { symbol: \"Tl\", z: 81, name: \"Thallium\" },\r\n    { symbol: \"Pb\", z: 82, name: \"Lead\" },\r\n    { symbol: \"Bi\", z: 83, name: \"Bismuth\" },\r\n    { symbol: \"Po\", z: 84, name: \"Polonium\" },\r\n    { symbol: \"At\", z: 85, name: \"Astatine\" },\r\n    { symbol: \"Rn\", z: 86, name: \"Radon\" },\r\n    { symbol: \"Fr\", z: 87, name: \"Francium\" },\r\n    { symbol: \"Ra\", z: 88, name: \"Radium\" },\r\n    { symbol: \"Ac\", z: 89, name: \"Actinium\" },\r\n    { symbol: \"Th\", z: 90, name: \"Thorium\" },\r\n    { symbol: \"Pa\", z: 91, name: \"Protactinium\" },\r\n    { symbol: \"U\", z: 92, name: \"Uranium\" },\r\n    { symbol: \"Np\", z: 93, name: \"Neptunium\" },\r\n    { symbol: \"Pu\", z: 94, name: \"Plutonium\" },\r\n    { symbol: \"Am\", z: 95, name: \"Americium\" },\r\n    { symbol: \"Cm\", z: 96, name: \"Curium\" },\r\n    { symbol: \"Bk\", z: 97, name: \"Berkelium\" },\r\n    { symbol: \"Cf\", z: 98, name: \"Californium\" }];\r\n    static get(name) {\r\n        for (let i = 0; i < MaterialList.materials.length; i++) {\r\n            if (name == MaterialList.materials[i].symbol) return MaterialList.materials[i];\r\n        }\r\n        return name;\r\n    }\r\n    static check(s) {\r\n        for (let i = 0; i < MaterialList.materials.length; i++) {\r\n            if (s == MaterialList.materials[i]) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static checkMaterial(mat, f) {\r\n        for (let i = 0; i < MaterialList.materials.length; i++) {\r\n            if (mat == MaterialList.materials[i].symbol){\r\n                return true;\r\n            }\r\n        }\r\n        for(let i = 0;i<MaterialList.compounds.length;i++){\r\n            if(mat == MaterialList.compounds[i]){\r\n                return true;\r\n            }\r\n        }\r\n        f();\r\n        return false;\r\n    }\r\n    static checkSource(source, f){\r\n        for(let i = 0;i<MaterialList.sources.length;i++){\r\n            if(source == MaterialList.sources[i]){\r\n                return true;\r\n            }\r\n        }\r\n        f();\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default MaterialList;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false }\r\n     \r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  showDialog(){\r\n      \r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{this.props.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        {this.props.content}\r\n      \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            No\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n              this.props.fun();\r\n              this.hideDialog();\r\n          }}>\r\n            Yes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","class VolumeList {\r\n    static addVolume(v){\r\n        VolumeList.volumes.push(v);\r\n    }\r\n    static removeVolume(v){\r\n        for(let i = 0;i<VolumeList.volumes.length;i++){\r\n            if(v == VolumeList[i]){\r\n                VolumeList.volumes.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    static getVolume(n){\r\n        for(let i = 0;i<VolumeList.volumes.length;i++){\r\n            if(VolumeList.volumes[i].name == n) return VolumeList.volumes[i];\r\n        }\r\n    }\r\n    static updateVolume(v){\r\n\r\n    }\r\n    static volumes = [];\r\n} \r\n\r\nexport default VolumeList;","import Detector from '../detector/Detektor';\r\nimport Model from '../rendering/model';\r\nimport { Cube } from '../entities/cube';\r\nimport { ParticleSource } from '../source/ParticleSource';\r\nimport { Vector3 } from '../utils/maths';\r\nimport { ParticleGun } from '../gun/ParticleGun';\r\nimport GunMesh from '../gun/gun';\r\nimport DetectorButton from '../detector/DetectorButton';\r\nimport React, { Component, createRef } from 'react';\r\nimport MaterialList from '../detector/MaterialList';\r\nimport VolumeList from '../volume/VolumeList';\r\n\r\n//TO-DO\r\n//position[cm]\r\nvar m = 100;\r\nvar dm = 10;\r\nvar cm = 1;\r\nvar mm = .1;\r\nvar eV = .001;\r\nvar keV = 1;\r\nvar MeV = 1000;\r\nvar GeV = 1000000;\r\nvar deg = 0.0174527777777778;\r\nvar rad = 1;\r\nclass Parser {\r\n    static showVolumeDialog = null;\r\n    static confirmDialog = null;\r\n\r\n    static init(f0, f1) {\r\n        Parser.showVolumeDialog = f0;\r\n        Parser.confirmDialog = f1;\r\n    }\r\n    static checkString(s) {\r\n        s = s.trim();\r\n        if (s.split('\"').length % 2 == 0) {\r\n            return false;\r\n        }\r\n        if (s[0] != '\"') return false;\r\n        if (s[s.length - 1] != '\"') return false;\r\n        return true;\r\n    }\r\n    static chunks = [];\r\n\r\n    static removeChunk(id) {\r\n        let result = \" \";\r\n\r\n        for (let i = 0; i < Parser.chunks.length; i++) {\r\n            if (Parser.chunks[i].id == id) {\r\n                Parser.chunks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        alert(id);\r\n        for (let i = 0; i < Parser.chunks.length; i++) {\r\n            alert(Parser.chunks[i].code);\r\n            alert(Parser.chunks[i].id);\r\n            result += Parser.chunks[i].code;\r\n        }\r\n        return result;\r\n    }\r\n    static checkFloat(s, v, me) {\r\n        if (isNaN(parseFloat(s.split(',')[0]))) return false;\r\n        if (isNaN(parseFloat(s.split(',')[1]))) return false;\r\n        if (isNaN(parseFloat(s.split(',')[2]))) return false;\r\n        v.x = parseFloat(s.split(',')[0]) * me;\r\n        v.y = parseFloat(s.split(',')[1]) * me;\r\n        v.z = parseFloat(s.split(',')[2]) * me;\r\n        return true;\r\n    }\r\n    static parse(text, canvas, clearSetup, createDetector, createSource, createGun) {\r\n        let detectors = [];\r\n        let sources = [];\r\n        let guns = [];\r\n        let gl = canvas.gl;\r\n        let blocks = text.split(\"\\\\\");\r\n        let error = false;\r\n        let failed_detectors = [];\r\n        for (let i = 0; i < blocks.length; i++) {\r\n            let words = blocks[i].split(\"{\");\r\n            words[0] = words[0].replace(' ', '');\r\n            let detector = null;\r\n            let source = null;\r\n            let gun = null;\r\n            let detector_geometry = 'cube';\r\n            if (words[0] == 'Detector') {\r\n                detector = new Detector(new Model(Cube.vertices, Cube.normals, gl));\r\n            }\r\n            if (words[0] == 'Source') {\r\n                source = new ParticleSource(new Model(Cube.vertices, Cube.normals, gl), new Vector3(0, 0, 0), \"U235\");\r\n            }\r\n            if (words[0] == 'Gun') {\r\n                gun = new ParticleGun(new Model(Cube.vertices, Cube.normals, gl), new Vector3(0, 0, 0), new Vector3(0, 0, 0), 0);\r\n            }\r\n            for (let j = 0; j < words.length; j++) {\r\n                let lines = words[j].split(\";\");\r\n                for (let k = 0; k < lines.length; k++) {\r\n                    if (lines[k].split(\"(\")[0].trim() == 'clear') {\r\n\r\n                    }\r\n                    if (lines[k].split(\":\").length == 1) continue;\r\n                    let attribute = lines[k].split(\":\")[0].trim();\r\n                    let measurement = cm;\r\n                    switch (attribute.substring(attribute.indexOf(\"[\") + 1, attribute.indexOf(\"]\"))) {\r\n                        case (\"eV\"):\r\n                            measurement = eV;\r\n                            break;\r\n                        case (\"keV\"):\r\n                            measurement = keV;\r\n                            break;\r\n                        case (\"MeV\"):\r\n                            measurement = MeV;\r\n                            break;\r\n                        case (\"GeV\"):\r\n                            measurement = GeV;\r\n                            break;\r\n                        case (\"mm\"):\r\n                            measurement = mm;\r\n                            break;\r\n                        case (\"deg\"):\r\n                            measurement = deg;\r\n                            break;\r\n                        case (\"rad\"):\r\n                            measurement = rad;\r\n                            break;\r\n                        case (\"cm\"):\r\n                            measurement = cm;\r\n                            break;\r\n                        case (\"dm\"):\r\n                            measurement = dm;\r\n                            break;\r\n                        case (\"m\"):\r\n                            measurement = m;\r\n                            break;\r\n                        default:\r\n                            measurement = cm;\r\n                    }\r\n                    if (attribute.includes(\"[\")) attribute = attribute.substr(0, attribute.indexOf(\"[\"));\r\n                    let params = lines[k].split(\":\")[1].replace(/\\n/g, '');\r\n                    if (words[0] == 'Detector') {\r\n                        switch (attribute) {\r\n                            case ('geometry'):\r\n                                detector_geometry = params.trim().substring(1, params.trim().length - 1);\r\n                                detector.geometry = detector_geometry;\r\n                                if (VolumeList.getVolume(detector_geometry) == undefined) {\r\n                                    error = true;\r\n                                    if(!failed_detectors.includes(detector_geometry))failed_detectors.push(detector_geometry);\r\n                                }\r\n                                break;\r\n                            case ('position'):\r\n                                if (!this.checkFloat(params, detector.model.position, measurement)) alert(\"position incorrec format\");\r\n                                break;\r\n                            case ('rotation'):\r\n                                if (!this.checkFloat(params, detector.model.rotation, measurement)) alert(\"rotation incorrec format\");\r\n                                break;\r\n                            case ('scale'):\r\n                                if (!this.checkFloat(params, detector.model.scale, measurement)) alert(\"scale incorrec format\");\r\n\r\n                                break;\r\n                            case ('material'):\r\n                                if (!this.checkString(params)) alert(\"meterial incorrect format\");\r\n                                detector.material = params.trim().substring(1, params.trim().length - 1);\r\n                                MaterialList.checkMaterial(detector.material, () => {\r\n                                    alert(\"No material named: \" + detector.material + \"\\nMaterial set to Lead(Pb)!\");\r\n                                    detector.material = \"Pb\";\r\n                                });\r\n                                break;\r\n                            case ('name'):\r\n                                if (!this.checkString(params)) alert(\"name incorrect format\");\r\n                                detector.name = params.trim().substring(1, params.trim().length - 1);\r\n                                break;\r\n\r\n                            default:\r\n                                alert(\"No such property: \" + attribute);\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (words[0] == 'Source') {\r\n                        switch (attribute) {\r\n                            case ('position'):\r\n                                if (!this.checkFloat(params, source.model.position, measurement)) alert(\"position incorrec format\");\r\n                                break;\r\n                            case ('material'):\r\n                                if (!this.checkString(params)) alert(\"material incorrect format\");\r\n                                source.material = params.trim().substring(1, params.trim().length - 1);\r\n                                MaterialList.checkSource(source.material, () => {\r\n                                    alert(\"No source named: \" + source.material + \"\\nSource set to Cobalt(Co60)!\");\r\n                                    source.material = \"Co60\";\r\n                                });\r\n                                break;\r\n                            case ('name'):\r\n                                if (!this.checkString(params)) alert(\"name incorrect format\");\r\n                                source.name = params.trim().substring(1, params.trim().length - 1);\r\n                                break;\r\n                            default:\r\n                                alert(\"No such property: \" + attribute);\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (words[0] == 'Gun') {\r\n                        switch (attribute) {\r\n                            case ('position'):\r\n                                if (!this.checkFloat(params, gun.model.position, measurement)) alert(\"position incorrec format\");\r\n                                break;\r\n                            case ('direction'):\r\n                                if (!this.checkFloat(params, gun.direction, measurement)) alert(\"direction incorrec format\");\r\n                                break;\r\n                            case ('energy'):\r\n                                alert(measurement);\r\n                                gun.energy = parseFloat(params) * measurement;\r\n                                break;\r\n                            case ('name'):\r\n                                if (!this.checkString(params)) alert(\"name incorrect format\");\r\n                                gun.name = params.trim().substring(1, params.trim().length - 1);\r\n                                break;\r\n                            default:\r\n                                alert(\"No such property: \" + attribute);\r\n                                break;\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n            if (gun != null) {\r\n                //createGun(gun.name, gun.model.position.x, gun.model.position.y, gun.model.position.z, gun.direction.x, gun.direction.y, gun.direction.z, gun.energy, false);\r\n                guns.push(gun);\r\n            }\r\n            if (source != null) {\r\n                //createSource(source.name, source.model.position.x, source.model.position.y, source.model.position.z, source.material, false);\r\n                sources.push(source);\r\n            }\r\n            if (detector != null) {\r\n                // createDetector(detector.name, detector.model.position.x, detector.model.position.y, detector.model.position.z,\r\n                //     detector.model.rotation.x, detector.model.rotation.y, detector.model.rotation.z,\r\n                //     detector.model.scale.x, detector.model.scale.y, detector.model.scale.z, detector.material, 'stl', VolumeList.getVolume(detector_geometry).data, new Vector3(.5, .5, .5), false);\r\n                if (VolumeList.getVolume(detector_geometry) != undefined) detectors.push(detector);\r\n            }\r\n        }\r\n        //TO_DO\r\n        if (error) {\r\n\r\n            Parser.confirmDialog(\"Volume not found!\", \"Add the volume to the volume list before referencing it in the script then click 'Run script' again.\",\r\n                () => {\r\n                    Parser.showVolumeDialog.showDialog(failed_detectors, () => {\r\n                        //Parser.parse(text, canvas, clearSetup, createDetector, createSource, createGun);\r\n                    });\r\n\r\n                });\r\n            return;\r\n        }\r\n        clearSetup();\r\n        guns.forEach(gun => {\r\n            createGun(gun.name, gun.model.position.x, gun.model.position.y, gun.model.position.z, gun.direction.x, gun.direction.y, gun.direction.z, gun.energy, false);\r\n        });\r\n\r\n        sources.forEach(source => {\r\n            createSource(source.name, source.model.position.x, source.model.position.y, source.model.position.z, source.material, false);\r\n        });\r\n\r\n        detectors.forEach(detector => {\r\n            createDetector(detector.name, detector.model.position.x, detector.model.position.y, detector.model.position.z,\r\n                detector.model.rotation.x, detector.model.rotation.y, detector.model.rotation.z,\r\n                detector.model.scale.x, detector.model.scale.y, detector.model.scale.z, detector.material, detector.geometry, VolumeList.getVolume(detector.geometry).data, new Vector3(.5, .5, .5), false);\r\n        });\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default Parser;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Modal, Button, Table, Container, Col, FormControl, Row} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport MaterialList from '../detector/MaterialList';\r\n\r\nclass MaterialTable extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false, materials: [], table: \"elements\", element: true, compound: false};\r\n    this.changeTable = this.changeTable.bind(this);\r\n  }\r\n  changeTable(s){\r\n    if(s==\"elements\"){\r\n      this.setState({element: true});\r\n      this.setState({compound: false});\r\n    }\r\n    if(s==\"compounds\"){\r\n      this.setState({element: false});\r\n      this.setState({compound: true});  \r\n    }\r\n    this.setState({table: s});\r\n    this.updateMaterials(\"\", s);\r\n  }\r\n  componentDidMount(){\r\n   this.updateMaterials(\"\", this.state.table);\r\n    \r\n  }\r\n  showDialog(){\r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  updateMaterials(s, t){\r\n    if(t == \"elements\"){\r\n      let list = MaterialList.materials.filter(x => x.name.toUpperCase().includes(s.toUpperCase()) || x.symbol.toUpperCase().includes(s.toUpperCase()));\r\n      let tmp_mats = [];\r\n      let rows = Math.ceil(list.length / 5);    \r\n      for(let i = 0;i<rows;i++){\r\n        let tmp = [];\r\n        for(let j = Math.floor((i/rows)*list.length);j<Math.floor((i/rows)*list.length)+5;j++){\r\n              if(list[j] === undefined) break;\r\n              tmp.push(<th className=\"tablebutton\" onClick={e=>{this.props.updatematerial(list[j].symbol);this.hideDialog();}}>\r\n                <p style={{\"font-size\":'12px'}}>{list[j].z}</p>\r\n                <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\"}}>{list[j].symbol}</h1>\r\n                <p style={{\"font-size\":'12px'}}>{list[j].name}</p>\r\n                </th>);\r\n        }\r\n        tmp_mats.push(<tr>{tmp}</tr>);\r\n      }\r\n      this.setState({materials: tmp_mats});\r\n    }\r\n    if(t == \"compounds\"){\r\n      let list = MaterialList.compounds.filter(x => x.toUpperCase().includes(s.toUpperCase()));\r\n      let tmp_mats = [];\r\n      let rows = Math.ceil(list.length / 3);    \r\n      for(let i = 0;i<rows;i++){\r\n        let tmp = [];\r\n        for(let j = Math.floor((i/rows)*list.length);j<Math.floor((i/rows)*list.length)+3;j++){\r\n              if(list[j] === undefined) break;\r\n              tmp.push(<th className=\"tablebutton\" onClick={e=>{this.props.updatematerial(list[j]);this.hideDialog();}}>\r\n                <h1 style={{\"font-size\":'10px',\"font-weight\":\"bold\"}}>{list[j]}</h1>\r\n                </th>);\r\n        }\r\n        tmp_mats.push(<tr>{tmp}</tr>);\r\n      }\r\n      this.setState({materials: tmp_mats});\r\n    }\r\n    \r\n  }\r\n  render(){\r\n    \r\n\r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Choose a material</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <FormControl type=\"text\" onChange={v=>{this.updateMaterials(v.target.value, this.state.table);}}placeholder=\"Search\" style={{\"margin\":\"20px\",\"width\":\"200px\"}}/>\r\n        <Row style={{\"margin\" : \"auto\"}}>\r\n        <Button style={{\"background-color\":\"gray\", \"color\": \"white\", \"border-radius\" : \"0\", \"border\": \"1px solid black\"}} disabled={this.state.element} onClick={()=>{this.changeTable(\"elements\");}}>Elements</Button>\r\n        <Button style={{\"background-color\":\"gray\", \"color\": \"white\", \"border-radius\" : \"0\", \"border\": \"1px solid black\"}} disabled={this.state.compound} onClick={()=>{this.changeTable(\"compounds\");}}>Compounds</Button>\r\n        </Row>\r\n            <Container style={{\"margin\" : \"auto\"}}>\r\n             {this.state.materials}\r\n\r\n            </Container>\r\n            \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default MaterialTable;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport { Button, Nav, Navbar, FormControl, Container, Col, Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { Vector3 } from '../utils/maths';\r\nimport MaterialList from './MaterialList';\r\nimport ConfirmDialog from '../graphics/ConfirmDialog';\r\nimport Parser from '../utils/Parser';\r\nimport MaterialTable from '../graphics/MaterialTable';\r\nimport STLParser from '../utils/STLParser';\r\nimport Model from '../rendering/model';\r\n\r\nclass DetectorEditDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.confirmDialog = React.createRef();\r\n    this.table = React.createRef();\r\n    this.updateMaterial = this.updateMaterial.bind(this);\r\n\r\n    this.state = {\r\n      show: false,\r\n      detname: this.props.detector.name,\r\n      detposx: this.props.detector.model.position.x,\r\n      detposy: this.props.detector.model.position.y,\r\n      detposz: this.props.detector.model.position.z,\r\n      detrotx: this.props.detector.model.rotation.x,\r\n      detroty: this.props.detector.model.rotation.y,\r\n      detrotz: this.props.detector.model.rotation.z,\r\n      detscalex: this.props.detector.model.scale.x,\r\n      detscaley: this.props.detector.model.scale.y,\r\n      detscalez: this.props.detector.model.scale.z,\r\n      detmat: this.props.detector.material,\r\n      geomrty: this.props.detector.geometry,\r\n      showError: 'none',\r\n      modeldata: [],\r\n      display: 'none',\r\n      filelabel: \"\",\r\n      color: this.props.detector.model.color,\r\n      options: []\r\n    }\r\n    this.materials = [];\r\n\r\n  }\r\n  updateMaterial(m) {\r\n    this.setState({ detmat: m });\r\n  }\r\n  hexToRgb(hex) {\r\n    hex = hex.substr(1);\r\n    var bigint = parseInt(hex, 16);\r\n    var r = (bigint >> 16) & 255;\r\n    var g = (bigint >> 8) & 255;\r\n    var b = bigint & 255;\r\n\r\n    return new Vector3(r / 255, g / 255, b / 255);\r\n  }\r\n  componentDidMount() {\r\n\r\n  }\r\n  async showDialog(volumes) {\r\n    this.setState({ showError: 'none' });\r\n    this.setState({show: true});\r\n    \r\n    \r\n    let opt = volumes.map(e=>{\r\n    return <option value={e.name}>{e.name}</option>;\r\n    });\r\n    this.setState({options: opt});\r\n  }\r\n  hideDialog() {\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  static id = 0;\r\n  render() {\r\n    const handleDelete = () => {\r\n      this.hideDialog();\r\n      this.props.removebutton(this.props.detector, this.props.button);\r\n    }\r\n    let mat = [];\r\n    if (MaterialList.get(this.state.detmat) == this.state.detmat) {\r\n      mat = <th className=\"tablebutton\" onClick={() => { this.table.current.showDialog(); }}><h1 style={{ \"font-size\": '10px', \"font-weight\": \"bold\" }}>{this.state.detmat}</h1></th>;\r\n    } else {\r\n      mat = <th className=\"tablebutton\" onClick={() => { this.table.current.showDialog(); }}>\r\n        <p style={{ \"font-size\": '12px' }}>{MaterialList.get(this.state.detmat).z}</p>\r\n        <h1 style={{ \"font-size\": '15px', \"font-weight\": \"bold\" }}>{MaterialList.get(this.state.detmat).symbol}</h1>\r\n        <p style={{ \"font-size\": '12px' }}>{MaterialList.get(this.state.detmat).name}</p></th>;\r\n    }\r\n    return <>\r\n      <MaterialTable ref={this.table} updatematerial={this.updateMaterial}></MaterialTable>\r\n      <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete this component?\" fun={handleDelete}></ConfirmDialog>\r\n      <Modal show={this.state.show} onHide={() => { this.hideDialog(); }}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify Detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form>\r\n            <Container>\r\n              <Row>\r\n                Name <Col><Form.Control\r\n                  className=\"name\"\r\n                  required\r\n                  type=\"text\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detname}\r\n                  onChange={(event) => { this.setState({ detname: event.target.value }); }} />\r\n                </Col>\r\n              </Row>\r\n              <hr />\r\n              <Row>\r\n                Geometry\r\n            </Row>\r\n\r\n              <Form.Control as=\"select\" value={this.state.geomrty} onChange={(evt) => {\r\n                this.setState({ geomrty: evt.target.value });\r\n                if (evt.target.value == \"stl\") this.setState({ display: 'block' });\r\n                else this.setState({ display: 'none' });\r\n              }}>\r\n\r\n                {/* <option value=\"cube\">Cube</option>\r\n            <option value=\"cylinder\">Cylinder</option>\r\n            <option value=\"sphere\">Sphere</option> */}\r\n                {this.state.options}\r\n\r\n                <option value=\"stl\">Custom (.STL)</option>\r\n              </Form.Control>\r\n\r\n              <Form.File\r\n                style={{ 'display': this.state.display }}\r\n                id=\"stl-file\"\r\n                label={this.state.filelabel}\r\n                data-browse=\"Open\"\r\n                custom\r\n                onChange={(evt) => {\r\n\r\n\r\n                  var r = new FileReader();\r\n\r\n                  r.onload = () => {\r\n                    var data = r.result;\r\n                    this.setState({ modeldata: data });\r\n                  }\r\n                  r.readAsBinaryString(evt.target.files[0]);\r\n\r\n                  let path = evt.target.value;\r\n                  path = path.split(\"\\\\\")[path.split(\"\\\\\").length - 1];\r\n                  this.setState({ filelabel: path });\r\n                }}\r\n              />\r\n              <hr />\r\n              <Row>Position</Row>\r\n              <Row>\r\n                x<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detposx}\r\n                  onChange={(event) => { this.setState({ detposx: event.target.value }); }} />\r\n                </Col>\r\n            y<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detposy}\r\n                  onChange={(event) => { this.setState({ detposy: event.target.value }); }} />\r\n                </Col>\r\n            z<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detposz}\r\n                  onChange={(event) => { this.setState({ detposz: event.target.value }); }} />\r\n                </Col>\r\n              </Row>\r\n              <br />\r\n              <hr />\r\n              <Row>Rotation</Row>\r\n              <Row>\r\n                x<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detrotx}\r\n                  onChange={(event) => { this.setState({ detrotx: event.target.value }); }} />\r\n                </Col>\r\n            y<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detroty}\r\n                  onChange={(event) => { this.setState({ detroty: event.target.value }); }} />\r\n                </Col>\r\n            z<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detrotz}\r\n                  onChange={(event) => { this.setState({ detrotz: event.target.value }); }} />\r\n                </Col>\r\n              </Row>\r\n              <br />\r\n              <hr />\r\n              <Row>Scale</Row>\r\n              <Row>\r\n                x<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detscalex}\r\n                  onChange={(event) => { this.setState({ detscalex: event.target.value }); }} />\r\n                </Col>\r\n            y<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detscaley}\r\n                  onChange={(event) => { this.setState({ detscaley: event.target.value }); }} />\r\n                </Col>\r\n            z<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detscalez}\r\n                  onChange={(event) => { this.setState({ detscalez: event.target.value }); }} />\r\n                </Col>\r\n              </Row>\r\n              <br />\r\n              <hr />\r\n              <Row>\r\n                <Form.Group controlId=\"exampleForm.SelectCustom\">\r\n                  <Form.Label>Material</Form.Label>\r\n                  {mat}\r\n                  <Button onClick={() => { this.table.current.showDialog(); }}>Choose</Button>\r\n                </Form.Group>\r\n\r\n              </Row>\r\n              <hr />\r\n              <Row>\r\n                Color: <span style={{ 'padding-left': '20px' }}>\r\n                  <input type=\"color\"\r\n                    onInput={(evt) => {\r\n                      this.setState({ color: this.hexToRgb(evt.target.value) });\r\n                    }}></input>\r\n                </span>\r\n              </Row>\r\n            </Container>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => {\r\n            this.confirmDialog.current.showDialog();\r\n          }} style={{ backgroundColor: 'red', color: 'white' }}>\r\n            Delete\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={async () => {\r\n\r\n            this.hideDialog();\r\n            if (this.state.geomrty == 'stl') {\r\n              let modelData = STLParser.parseData(this.state.modeldata);\r\n              this.props.detector.model = new Model(modelData.vertices, modelData.normals, this.props.canvas.current.gl);\r\n              this.props.detector.model.drawLines = false;\r\n            } else {\r\n              let response = await fetch(\"http://localhost/database\", {\r\n                headers: {\r\n                  'Accept': 'application/json',\r\n                  'Content-Type': 'application/json'\r\n                },\r\n                method: 'POST',\r\n                body: JSON.stringify({ name: this.state.geomrty })\r\n              });\r\n              let json = await response.json();\r\n              let data = new String(json[0].data.data);\r\n              var str = '';\r\n              for (let i = 0; i < json[0].data.data.length; i++) {\r\n                str += String.fromCharCode(json[0].data.data[i]);\r\n              }\r\n              let modeldata = STLParser.parseData(str);\r\n              this.props.detector.model = new Model(modeldata.vertices, modeldata.normals, this.props.canvas.current.gl);\r\n              this.props.detector.model.drawLines = false;\r\n            }\r\n\r\n            this.props.detector.name = this.state.detname;\r\n\r\n            this.props.detector.model.position.x = this.state.detposx;\r\n            this.props.detector.model.position.y = this.state.detposy;\r\n            this.props.detector.model.position.z = this.state.detposz;\r\n\r\n            this.props.detector.model.rotation.x = this.state.detrotx;\r\n            this.props.detector.model.rotation.y = this.state.detroty;\r\n            this.props.detector.model.rotation.z = this.state.detrotz;\r\n\r\n            this.props.detector.model.scale.x = this.state.detscalex;\r\n            this.props.detector.model.scale.y = this.state.detscaley;\r\n            this.props.detector.model.scale.z = this.state.detscalez;\r\n\r\n            this.props.detector.material = this.state.detmat;\r\n\r\n            this.props.detector.model.color = this.state.color;\r\n\r\n            this.props.setname(this.state.detname);\r\n\r\n            let text = \"\";\r\n            for (let i = 0; i < Parser.chunks.length; i++) {\r\n              if (this.props.buttonid == Parser.chunks[i].id) {\r\n                Parser.chunks[i].code = \"\\\\Detector{\\n\" +\r\n                  \"\\tname: \" + '\"' + this.state.detname + '\";\\n' +\r\n                  \"\\tposition[cm]: \" + this.state.detposx + \", \" + this.state.detposy + \", \" + this.state.detposz + \";\\n\" +\r\n                  \"\\trotation[rad]: \" + this.state.detrotx + \", \" + this.state.detroty + \", \" + this.state.detrotz + \";\\n\" +\r\n                  \"\\tscale[cm]: \" + this.state.detscalex + \", \" + this.state.detscaley + \", \" + this.state.detscalez + \";\\n\" +\r\n                  \"\\tmaterial: \" + '\"' + this.state.detmat + '\";\\n' +\r\n                  \"\\tgeometry: \" + '\"' + this.state.geomrty + '\";\\n' + \r\n                  \"}\\n\";\r\n              }\r\n              text += Parser.chunks[i].code;\r\n            }\r\n\r\n            this.props.codeeditor.current.updateText(text);\r\n\r\n            this.props.updatedetails(\r\n              <>\r\n                <Row>\r\n                  <Col>Position: </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>x: {this.state.detposx} cm</Col>\r\n                  <Col>y: {this.state.detposy} cm</Col>\r\n                  <Col>z: {this.state.detposz} cm</Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>Rotation: </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>x: {this.state.detrotx} deg</Col>\r\n                  <Col>y: {this.state.detroty} deg</Col>\r\n                  <Col>z: {this.state.detrotz} deg</Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>Scale: </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>x: {this.state.detscalex}</Col>\r\n                  <Col>y: {this.state.detscaley}</Col>\r\n                  <Col>z: {this.state.detscalez}</Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>Material: </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>{this.state.detmat}</Col>\r\n                </Row>\r\n              </>\r\n            );\r\n          }}>\r\n            Modify\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  }\r\n}\r\n\r\nexport default DetectorEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport image from '../images/editicon.png';\r\nimport DetectorEditDialog from './DetectorEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\n\r\nclass DetectorButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.setName = this.setName.bind(this);\r\n    this.state = {details: this.props.details,name: this.props.name};\r\n    this.id = this.props.id;\r\n  }\r\n  static id = 0;\r\n  componentDidMount(){\r\n    \r\n  }\r\n  updateDetails(d){\r\n    this.setState({details: d});\r\n  }\r\n  setName(n){\r\n    this.setState({name: n});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <DetectorEditDialog setname={this.setName} canvas={this.props.canvas} name={this.props.name} buttonid={this.id} codeeditor={this.props.codeeditor} updatedetails={this.updateDetails} button={this} removebutton={this.props.removebutton}\r\n      detector={this.props.detector} ref={this.editdialog} buttons={this.props.buttons} details={this.props.details}></DetectorEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} onClick={()=>{\r\n          if(RenderSystem.active_id == this.props.detector.id){\r\n            RenderSystem.active_id = -1;\r\n            return;\r\n          }\r\n          RenderSystem.active_id = this.props.detector.id;\r\n          }} variant=\"link\" eventKey={this.id}>\r\n          {this.state.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog(this.props.volumes);}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey={this.id}>\r\n        <Card.Body>{this.state.details}</Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default DetectorButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport DetectorButton from './DetectorButton';\r\nimport MaterialList from './MaterialList';\r\nimport { Vector3 } from '../utils/maths';\r\nimport MaterialTable from '../graphics/MaterialTable';\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.updateMaterial = this.updateMaterial.bind(this);\r\n    this.table = React.createRef();\r\n    this.state = {show: false, \r\n      detname: 'Detector',\r\n      detposx: 0,\r\n      detposy: 0,\r\n      detposz: 0,\r\n      detrotx: 0,\r\n      detroty: 0,\r\n      detrotz: 0,\r\n      detscalex: 10,\r\n      detscaley: 10,\r\n      detscalez: 10,\r\n      detmat: 'Pb',\r\n      geomrty: 'cube',\r\n      display: 'none',\r\n      filelabel: 'Path to STL',\r\n      modeldata: null,\r\n      showError: 'none',\r\n      color: new Vector3(.5,.5,.5),\r\n      options: []\r\n     }\r\n     \r\n  }\r\n  updateMaterial(m){\r\n    this.setState({detmat: m});\r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  hexToRgb(hex) {\r\n    hex = hex.substr(1);\r\n    var bigint = parseInt(hex, 16);\r\n    var r = (bigint >> 16) & 255;\r\n    var g = (bigint >> 8) & 255;\r\n    var b = bigint & 255;\r\n\r\n    return new Vector3(r / 255, g / 255, b / 255);\r\n  }\r\n  addMaterial(ann, mat){\r\n    this.materials.push(<option value={ann}>{mat}</option>)\r\n  }\r\n  async showDialog(volumes){\r\n      this.setState({show: true});\r\n      let detectorName = 'Detector' + this.props.buttons.length;\r\n      this.setState({detname: detectorName});\r\n\r\n      \r\n      let opt = volumes.map(e=>{\r\n      return <option value={e.name}>{e.name}</option>;\r\n      });\r\n      this.setState({options: opt});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    let mat = [];\r\n    if(MaterialList.get(this.state.detmat) == this.state.detmat){\r\n      mat = <th className=\"tablebutton\" onClick={()=>{this.table.current.showDialog();}}><h1 style={{\"font-size\":'10px',\"font-weight\":\"bold\"}}>{this.state.detmat}</h1></th>;\r\n    }else{\r\n      mat = <th className=\"tablebutton\" onClick={()=>{this.table.current.showDialog();}}>\r\n      <p style={{\"font-size\":'12px'}}>{MaterialList.get(this.state.detmat).z}</p>\r\n      <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\"}}>{MaterialList.get(this.state.detmat).symbol}</h1>\r\n      <p style={{\"font-size\":'12px'}}>{MaterialList.get(this.state.detmat).name}</p></th>;\r\n    }\r\n    return <>\r\n        <MaterialTable ref={this.table} updatematerial={this.updateMaterial}></MaterialTable>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Create detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <hr />\r\n            <Row>\r\n              Geometry\r\n            </Row>\r\n\r\n            <Form.Control as=\"select\" value={this.state.geomrty} onChange={(evt)=>{\r\n              this.setState({geomrty: evt.target.value});\r\n              if(evt.target.value == \"stl\") this.setState({display: 'block'});\r\n              else this.setState({display: 'none'});}}>\r\n\r\n            {/* <option value=\"cube\">Cube</option>\r\n            <option value=\"cylinder\">Cylinder</option>\r\n            <option value=\"sphere\">Sphere</option> */}\r\n            {this.state.options}\r\n\r\n            <option value=\"stl\">Custom (.STL)</option>\r\n            </Form.Control>\r\n\r\n            <Form.File \r\n            style={{'display':this.state.display}}\r\n            id=\"stl-file\"\r\n            label={this.state.filelabel}\r\n            data-browse=\"Open\"\r\n            custom\r\n            onChange={(evt)=>{\r\n\r\n\r\n              var r = new FileReader();\r\n\r\n              r.onload = ()=>{\r\n                var data = r.result;\r\n                this.setState({modeldata: data});\r\n              }\r\n              r.readAsBinaryString(evt.target.files[0]);\r\n\r\n              let path = evt.target.value;\r\n              path = path.split(\"\\\\\")[path.split(\"\\\\\").length-1];\r\n              this.setState({filelabel: path});\r\n            }}\r\n          />\r\n            <hr />\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>Rotation</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detrotx}\r\n            onChange={(event)=>{this.setState({detrotx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detroty}\r\n            onChange={(event)=>{this.setState({detroty: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detrotz}\r\n            onChange={(event)=>{this.setState({detrotz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>Scale</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscalex}\r\n            onChange={(event)=>{this.setState({detscalex: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscaley}\r\n            onChange={(event)=>{this.setState({detscaley: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscalez}\r\n            onChange={(event)=>{this.setState({detscalez: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>\r\n            \r\n          <Form.Group controlId=\"exampleForm.SelectCustom\">\r\n            \r\n            <Form.Label>Material</Form.Label>\r\n           {mat}\r\n            <Button onClick={()=>{this.table.current.showDialog();}}>Choose</Button>\r\n            \r\n          </Form.Group>\r\n          \r\n          </Row>\r\n          <hr />\r\n          <Row>\r\n          Color: <span style={{'padding-left':'20px'}}>\r\n          <input type=\"color\"\r\n          onInput={(evt)=>{\r\n            this.setState({color: this.hexToRgb(evt.target.value)});\r\n          }}></input>\r\n            </span>\r\n        </Row>\r\n          </Container>\r\n        </Form>\r\n      \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n          \r\n          this.hideDialog();\r\n          this.props.createbutton(this.state.detname, this.state.detposx, this.state.detposy,this.state.detposz,\r\n            this.state.detrotx, this.state.detroty, this.state.detrotz, this.state.detscalex, this.state.detscaley, this.state.detscalez, this.state.detmat, this.state.geomrty,\r\n            this.state.modeldata,this.state.color);}}>\r\n            Create\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport ConfirmDialog from '../graphics/ConfirmDialog';\r\nimport Parser from '../utils/Parser';\r\n\r\nclass GunEditDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.confirmDialog = React.createRef();\r\n\r\n    this.state = {show: false, \r\n      detname: this.props.detector.name,\r\n      detposx: this.props.detector.model.position.x,\r\n      detposy: this.props.detector.model.position.y,\r\n      detposz: this.props.detector.model.position.z,\r\n      detdirx: this.props.detector.direction.x,\r\n      detdiry: this.props.detector.direction.y,\r\n      detdirz: this.props.detector.direction.z,\r\n      energy: this.props.detector.energy}\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    const handleDelete = ()=>{\r\n      this.hideDialog();\r\n      this.props.removebutton(this.props.detector, this.props.button);\r\n    }\r\n    return <>\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete this component?\" fun={handleDelete}></ConfirmDialog>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify Detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <Row>Direction</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirx}\r\n            onChange={(event)=>{this.setState({detdirx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdiry}\r\n            onChange={(event)=>{this.setState({detdiry: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirz}\r\n            onChange={(event)=>{this.setState({detdirz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          \r\n          <br/>\r\n          <Row>\r\n            Energy <Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.energy}\r\n            onChange={(event)=>{this.setState({energy: event.target.value});}} />\r\n            </Col> keV\r\n          </Row>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{\r\n            this.confirmDialog.current.showDialog();\r\n          }} style={{backgroundColor: 'red', color: 'white'}}>\r\n            Delete\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();\r\n\r\n            this.props.detector.name = this.state.name;\r\n\r\n            this.props.detector.model.position.x = this.state.detposx;\r\n            this.props.detector.model.position.y = this.state.detposy;\r\n            this.props.detector.model.position.z = this.state.detposz;\r\n            \r\n            this.props.detector.direction.x = this.state.detdirx;\r\n            this.props.detector.direction.y = this.state.detdiry;\r\n            this.props.detector.direction.z = this.state.detdirz;\r\n            \r\n            \r\n            this.props.detector.energy = this.state.energy;\r\n\r\n            let text = \"\";\r\n            for(let i = 0;i<Parser.chunks.length;i++){\r\n              if(this.props.buttonid == Parser.chunks[i].id){\r\n                Parser.chunks[i].code = \"\\\\Gun{\\n\" +\r\n                \"\\tname: \" + '\"' + this.props.name + '\";\\n' + \r\n                \"\\tposition[cm]: \" + this.state.detposx + \", \" + this.state.detposy + \", \" + this.state.detposz + \";\\n\" + \r\n                \"\\tdirection: \" + this.state.detdirx + \", \" + this.state.detdiry + \", \" + this.state.detdirz + \";\\n\" + \r\n                \"\\tenergy[keV]: \" +  this.state.energy + ';\\n' + \r\n                \"}\\n\";\r\n              }\r\n              text += Parser.chunks[i].code;\r\n            }\r\n\r\n            this.props.codeeditor.current.updateText(text);\r\n\r\n            this.props.updatedetails(\r\n            <Container>\r\n                  <Row>\r\n                  <Col>Position: </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col>x: {this.state.detposx} cm</Col>\r\n                    <Col>y: {this.state.detposy} cm</Col>\r\n                    <Col>z: {this.state.detposz} cm</Col>\r\n                  </Row>\r\n                  <Row>\r\n                  <Col>Direction: </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col>x: {this.state.detdirx} </Col>\r\n                    <Col>y: {this.state.detdiry} </Col>\r\n                    <Col>z: {this.state.detdirz} </Col>\r\n                  </Row>\r\n                  <Row>\r\n                  <Col>Energy: {this.state.energy} keV</Col>\r\n                  </Row>\r\n                  </Container>\r\n            );            \r\n            }}>\r\n            Modify\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default GunEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure, Row, Col, Container} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport image from '../images/editicon.png';\r\nimport GunEditDialog from './GunEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport DetectorButton from '../detector/DetectorButton';\r\n\r\nclass GunButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.state = {details: this.props.details};\r\n    this.id = this.props.id;\r\n  }\r\n  static id = 0;\r\n  updateDetails(d){\r\n    this.setState({details: d});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <GunEditDialog buttonid={this.id} codeeditor={this.props.codeeditor} name={this.props.name} updatedetails={this.updateDetails} button={this} removebutton={this.props.removebutton}\r\n      detector={this.props.detector} ref={this.editdialog} buttons={this.props.buttons} details={this.props.details}></GunEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} onClick={()=>{\r\n          if(RenderSystem.acitve_id == this.id){\r\n            RenderSystem.acitve_id = -1;\r\n            return;\r\n          }\r\n          RenderSystem.acitve_id = this.id;\r\n          }} variant=\"link\" eventKey={this.id}>\r\n          {this.props.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog();}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey={this.id}>\r\n        <Card.Body><Container>\r\n      <Row>\r\n      <Col>Position: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.props.detector.model.position.x} cm</Col>\r\n        <Col>y: {this.props.detector.model.position.y} cm</Col>\r\n        <Col>z: {this.props.detector.model.position.z} cm</Col>\r\n      </Row>\r\n      <Row>\r\n      <Col>Direction: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.props.detector.direction.x} </Col>\r\n        <Col>y: {this.props.detector.direction.y} </Col>\r\n        <Col>z: {this.props.detector.direction.z} </Col>\r\n      </Row>\r\n      <Row>\r\n      <Col>Energy: {this.props.detector.energy} keV</Col>\r\n      </Row>\r\n      </Container></Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default GunButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport GunButton from '../gun/GunButton';\r\n\r\nclass GunDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false, \r\n      detname: 'Detector',\r\n      detposx: 0,\r\n      detposy: 0,\r\n      detposz: 0,\r\n      detdirx: 0,\r\n      detdiry: 0,\r\n      detdirz: 0,\r\n      energy: 100 }\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Create Particle Gun</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <Row>Direction</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirx}\r\n            onChange={(event)=>{this.setState({detdirx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdiry}\r\n            onChange={(event)=>{this.setState({detdiry: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirz}\r\n            onChange={(event)=>{this.setState({detdirz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          \r\n          <Row>\r\n            Energy <Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.energy}\r\n            onChange={(event)=>{this.setState({energy: event.target.value});}} />\r\n            </Col> keV\r\n          </Row>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();this.props.createbutton(this.state.detname, this.state.detposx, this.state.detposy, this.state.detposz,\r\n            this.state.detdirx, this.state.detdiry, this.state.detdirz, this.state.energy);}}>\r\n            Create\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default GunDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Modal, Button, Table, Container, Col, FormControl, Row} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport MaterialList from '../detector/MaterialList';\r\n\r\nclass SourceTable extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false, materials: []};\r\n  }\r\n  componentDidMount(){\r\n   this.updateMaterials(\"\", this.state.table);\r\n    \r\n  }\r\n  showDialog(){\r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  updateMaterials(s, t){\r\n      let list = MaterialList.sources.filter(x => x.toUpperCase().includes(s.toUpperCase()));\r\n      let tmp_mats = [];\r\n      let rows = Math.ceil(list.length / 5);    \r\n      for(let i = 0;i<rows;i++){\r\n        let tmp = [];\r\n        for(let j = Math.floor((i/rows)*list.length);j<Math.floor((i/rows)*list.length)+5;j++){\r\n              if(list[j] === undefined) break;\r\n              tmp.push(<th className=\"tablebutton\" onClick={e=>{this.props.updatematerial(list[j]);this.hideDialog();}}>\r\n                \r\n                <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\"}}>{list[j]}</h1>\r\n               \r\n                </th>);\r\n        }\r\n        tmp_mats.push(<tr>{tmp}</tr>);\r\n      }\r\n      this.setState({materials: tmp_mats});\r\n    \r\n    \r\n  }\r\n  render(){\r\n    \r\n\r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Choose a material</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <FormControl type=\"text\" onChange={v=>{this.updateMaterials(v.target.value, this.state.table);}}placeholder=\"Search\" style={{\"margin\":\"20px\",\"width\":\"200px\"}}/>\r\n        <Row style={{\"margin\" : \"auto\"}}>\r\n        </Row>\r\n            <Container style={{\"margin\" : \"auto\"}}>\r\n             {this.state.materials}\r\n\r\n            </Container>\r\n            \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default SourceTable;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport ConfirmDialog from '../graphics/ConfirmDialog';\r\nimport Parser from '../utils/Parser';\r\nimport SourceTable from '../graphics/SourceTable';\r\n\r\nclass SourceEditDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.updateMaterial = this.updateMaterial.bind(this);\r\n\r\n    this.confirmDialog = React.createRef();\r\n    this.table = React.createRef();\r\n    this.state = {show: false, \r\n      detname: this.props.detector.name,\r\n      detposx: this.props.detector.model.position.x,\r\n      detposy: this.props.detector.model.position.y,\r\n      detposz: this.props.detector.model.position.z,\r\n      material: this.props.detector.material}\r\n    \r\n  }\r\n  updateMaterial(m){\r\n    this.setState({material: m});\r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    const handleDelete = ()=>{\r\n      this.hideDialog();\r\n      this.props.removebutton(this.props.detector, this.props.button);\r\n    }\r\n    return <>\r\n        <SourceTable ref={this.table} updatematerial={this.updateMaterial}></SourceTable>\r\n\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete this component?\" fun={handleDelete}></ConfirmDialog>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify Detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <hr />\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          \r\n          <br/>\r\n          <hr />\r\n          <Form.Group>\r\n          Material \r\n                <th className=\"tablebutton\" onClick={e=>{this.table.current.showDialog();}}>\r\n                <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}}>{this.state.material}</h1>\r\n                </th>\r\n          </Form.Group>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{\r\n             this.confirmDialog.current.showDialog();\r\n          }} style={{backgroundColor: 'red', color: 'white'}}>\r\n            Delete\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();\r\n\r\n            this.props.detector.name = this.state.name;\r\n\r\n            this.props.detector.model.position.x = this.state.detposx;\r\n            this.props.detector.model.position.y = this.state.detposy;\r\n            this.props.detector.model.position.z = this.state.detposz;\r\n            \r\n            \r\n            this.props.detector.material = this.state.material;\r\n\r\n            let text = \"\";\r\n            for(let i = 0;i<Parser.chunks.length;i++){\r\n              if(this.props.buttonid == Parser.chunks[i].id){\r\n                Parser.chunks[i].code = \"\\\\Source{\\n\" +\r\n                \"\\tname: \" + '\"' + this.props.name + '\";\\n' + \r\n                \"\\tposition[cm]: \" + this.state.detposx + \", \" + this.state.detposy + \", \" + this.state.detposz + \";\\n\" + \r\n                \"\\tmaterial: \" + '\"' + this.state.material + '\";\\n' + \r\n              \"}\\n\";\r\n              }\r\n              text += Parser.chunks[i].code;\r\n            }\r\n\r\n            this.props.codeeditor.current.updateText(text);\r\n\r\n            this.props.updatedetails(<Container>\r\n                <Row>\r\n                <Col>Position: </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>x: {this.state.detposx} cm</Col>\r\n                  <Col>y: {this.state.detposy} cm</Col>\r\n                  <Col>z: {this.state.detposz} cm</Col>\r\n                </Row>\r\n                <Row>\r\n                <Col>Material: {this.state.material}</Col>\r\n                </Row>\r\n                </Container>);            \r\n            }}>\r\n            Modify\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default SourceEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure, Row, Container, Col} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport image from '../images/editicon.png';\r\nimport SourceEditDialog from './SourceEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport DetectorButton from '../detector/DetectorButton';\r\n\r\nclass SourceButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.state = {details: this.props.details};\r\n    this.id = this.props.id;\r\n  }\r\n  static id = 0;\r\n  componentDidMount(){\r\n  }\r\n  updateDetails(d){\r\n    this.setState({details: d});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <SourceEditDialog codeeditor={this.props.codeeditor} name={this.props.name} buttonid={this.id} updatedetails={this.updateDetails} button={this} removebutton={this.props.removebutton}\r\n      detector={this.props.detector} ref={this.editdialog} buttons={this.props.buttons} details={this.props.details}></SourceEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} onClick={()=>{\r\n          if(RenderSystem.acitve_id == this.id){\r\n            RenderSystem.acitve_id = -1;\r\n            return;\r\n          }\r\n          RenderSystem.acitve_id = this.id;\r\n          }} variant=\"link\" eventKey={this.id}>\r\n          {this.props.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog();}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey={this.id}>\r\n        <Card.Body><Container>\r\n      <Row>\r\n      <Col>Position: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.props.detector.model.position.x} cm</Col>\r\n        <Col>y: {this.props.detector.model.position.y} cm</Col>\r\n        <Col>z: {this.props.detector.model.position.z} cm</Col>\r\n      </Row>\r\n      <Row>\r\n      <Col>Material: {this.props.detector.material}</Col>\r\n      </Row>\r\n      </Container>\r\n      </Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default SourceButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport SourceButton from '../source/SourceButton';\r\nimport SourceTable from '../graphics/SourceTable';\r\n\r\nclass SourceDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.updateMaterial = this.updateMaterial.bind(this);\r\n    this.table = React.createRef();\r\n    this.state = {show: false, \r\n      detname: 'Detector',\r\n      detposx: 0,\r\n      detposy: 0,\r\n      detposz: 0,\r\n      material: 'Co60' }\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  updateMaterial(m){\r\n    this.setState({material: m});\r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n      let detectorName = 'Source' + this.props.buttons.length;\r\n      this.setState({detname: detectorName});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    \r\n    return <>\r\n        <SourceTable ref={this.table} updatematerial={this.updateMaterial}></SourceTable>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Create Particle Source</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <hr />\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          \r\n          <br/>\r\n          <br/>\r\n          <hr />\r\n          <Form.Group>\r\n          Material \r\n                <th className=\"tablebutton\" onClick={e=>{this.table.current.showDialog();}}>\r\n                <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}}>{this.state.material}</h1>\r\n                </th>\r\n          </Form.Group>\r\n           \r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();this.props.createbutton(this.state.detname,  this.state.detposx, this.state.detposy, this.state.detposz,\r\n            this.state.material);}}>\r\n            Create\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default SourceDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal, Spinner} from 'react-bootstrap';\r\n\r\nclass RunDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {numberOfParticles: 100,show: false, loading: false}\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.setLoading = this.setLoading.bind(this);\r\n    }\r\n    hideDialog(){\r\n        this.setState({show: false});\r\n    }\r\n    showDialog(){\r\n        this.setState({show: true,loading: false});\r\n    }\r\n    setLoading(b){\r\n      this.setState({loading: b});\r\n    }\r\n    render(){\r\n      if(this.state.loading){\r\n        return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Run simulation</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Row style={{margin: '5px'}}>\r\n                Runnig simulation\r\n            </Row>\r\n            <Spinner animation=\"border\" role=\"status\">\r\n            </Spinner>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n            this.props.runsim(this.state.numberOfParticles);}}>\r\n            Run\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n      }\r\n        return <>\r\n    <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n    <Modal.Header closeButton>\r\n      <Modal.Title>Run simulation</Modal.Title>\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n        <Row style={{margin: '5px'}}>\r\n            Number of particles: \r\n        </Row>\r\n    <Form>\r\n        <Form.Control required\r\n        type=\"number\"\r\n        value={this.state.numberOfParticles}\r\n        onChange={(evt)=>{this.setState({numberOfParticles: evt.target.value});}}>\r\n        </Form.Control>\r\n    </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n    <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n        Cancel\r\n      </Button>\r\n      <Button variant=\"primary\" onClick={()=>{\r\n        this.setLoading(true);\r\n        this.props.runsim(this.state.numberOfParticles, this.hideDialog);}}>\r\n        Run\r\n      </Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n</> \r\n    \r\n      \r\n        \r\n    }\r\n}\r\nexport default RunDialog;","import React, { Component, createRef } from 'react';\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal, ProgressBar, Spinner} from 'react-bootstrap';\r\n\r\nclass SpectrumDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {numberofparticles: 1000, detector: 0,show: false, loading: false, now: 60, binsize: 1}\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.setLoading = this.setLoading.bind(this);\r\n    }\r\n    hideDialog(){\r\n        this.setState({show: false});\r\n    }\r\n    setLoading(b){\r\n        this.setState({loading: b});\r\n    }\r\n    showDialog(){\r\n        this.setState({show: true, loading: false});\r\n    }\r\n    render(){\r\n        if(this.state.loading){\r\n            return <Modal show={this.state.show}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Configure Spectroscopy</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n            <Row style={{margin: '5px'}}>\r\n                Runnig simulation\r\n            </Row>\r\n            <Spinner animation=\"border\" role=\"status\">\r\n            </Spinner>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n        }\r\n        let options = [];\r\n        for(let i = 0;i<this.props.detectors.length;i++){\r\n            options.push(<option value={this.props.detectors[i].id}>{this.props.detectors[i].name}</option>)\r\n        }\r\n\r\n        return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Configure Spectroscopy</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n            <Row style={{margin: '5px'}}>\r\n                Select detector \r\n            </Row>\r\n        <Form>\r\n        <Form.Control as=\"select\" value={this.state.detector} onChange={(evt)=>{this.setState({detector: evt.target.value});}}>\r\n            {options}\r\n            </Form.Control>\r\n            <hr />\r\n            <Row style={{margin: '5px'}}>\r\n                Number of particles\r\n            </Row>\r\n        <Form.Control\r\n        className=\"numspinner\"\r\n        required\r\n        value='0'\r\n        type=\"number\"\r\n        maxLength=\"10\"\r\n        value = {this.state.numberofparticles}\r\n        onChange={(event)=>{this.setState({numberofparticles: event.target.value});}} />\r\n        <hr />\r\n        <Row style={{margin: '5px'}}>\r\n                Bin size\r\n            </Row>\r\n            <Row>\r\n            <Form.Control\r\n        className=\"numspinner\"\r\n        required\r\n        value='0'\r\n        type=\"number\"\r\n        maxLength=\"10\"\r\n        value = {this.state.binsize}\r\n        style={{'width':'20%','margin':'15px'}}\r\n        onChange={(event)=>{this.setState({binsize: event.target.value});}} />\r\n        <span style={{'padding':'20px'}}>\r\n        keV\r\n\r\n        </span>\r\n            </Row>\r\n        \r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n              this.setLoading(true);\r\n              this.props.runsim(this.state.numberofparticles, this.state.detector, this.hideDialog, this.state.binsize);}}>\r\n            Run\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n    }\r\n}\r\nexport default SpectrumDialog;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport { Button, Modal, Row, Col, Form, Container } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass VolumeDialog extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.state = {\r\n            show: false,\r\n            name: \"model\",\r\n            filelabel: \"\",\r\n            modeldata: []\r\n        }\r\n\r\n    }\r\n    componentDidMount() {\r\n\r\n\r\n    }\r\n    showDialog(name) {\r\n       this.setState({name: name});\r\n        this.setState({ show: true });\r\n        \r\n    }\r\n    hideDialog() {\r\n        this.setState({ show: false });\r\n    }\r\n\r\n    static id = 0;\r\n    render() {\r\n        return <>\r\n            <Modal show={this.state.show} onHide={() => { this.hideDialog(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Choose a geometry</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Container>\r\n                        Name\r\n                            <Row>\r\n                                \r\n                       \r\n                                <Col><Form.Control\r\n                                    className=\"name\"\r\n                                    required\r\n                                    type=\"text\"\r\n                                    maxLength=\"10\"\r\n                                    value={this.state.name}\r\n                                    onChange={(event) => { this.setState({ name: event.target.value }); }} />\r\n                                </Col>\r\n                            </Row>\r\n                        <hr />\r\n\r\n                            STL File\r\n                            <Form.File\r\n                                id=\"stl-file\"\r\n                                label={this.state.filelabel}\r\n                                data-browse=\"Open\"\r\n                                custom\r\n                                onChange={(evt) => {\r\n\r\n\r\n                                    var r = new FileReader();\r\n\r\n                                    r.onload = () => {\r\n                                        var data = r.result;\r\n                                        this.setState({ modeldata: data });\r\n                                    }\r\n                                    r.readAsBinaryString(evt.target.files[0]);\r\n\r\n                                    let path = evt.target.value;\r\n                                    path = path.split(\"\\\\\")[path.split(\"\\\\\").length - 1];\r\n                                    this.setState({ filelabel: path });\r\n                                }}\r\n                            />\r\n                        </Container>\r\n                   </Form>\r\n                </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button variant=\"secondary\" onClick={() => { this.hideDialog(); }}>\r\n                            Cancel\r\n          </Button>\r\n                        <Button variant=\"primary\" onClick={() => {\r\n                            if(this.state.modeldata.length == 0){\r\n                                alert(\"Select an stl file!\");\r\n                                return;\r\n                            }\r\n                            this.hideDialog(); \r\n                            this.props.createbutton(this.state.name, this.state.modeldata);\r\n                        }}>\r\n                            Create\r\n          </Button>\r\n                    </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    }\r\n}\r\n\r\nexport default VolumeDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Form, Dropdown, OverlayTrigger, Tooltip, Modal } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport DetectorDialog from '../detector/DetectorDialog';\r\nimport GunDialog from '../gun/GunDialog';\r\nimport SourceDialog from '../source/SourceDialog';\r\nimport RunDialog from './RunDialog';\r\nimport SpectrumDialog from './SpectrumDialog';\r\nimport ConfirmDialog from './ConfirmDialog';\r\nimport VolumeDialog from '../volume/VolumeDialog';\r\n\r\nclass NavigationBar extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.dialog = React.createRef();\r\n    this.gundialog = React.createRef();\r\n    this.sourcedialog = React.createRef();\r\n    this.rundialog = React.createRef();\r\n    this.spectrumdialog = React.createRef();\r\n    this.confirmDialog = React.createRef();\r\n    this.volumedialog = React.createRef();\r\n    this.showRun = this.showRun.bind(this);\r\n    this.state = {showTracks: true, showParticles: true, showAxes: true, showGrid: false, showrun: \"none\", showclearsetup: \"none\", showclearparticles: \"none\"};\r\n  }\r\n  static id = 0;\r\n  showRun(b){\r\n    if(b) this.setState({showrun: \"block\"});\r\n    else this.setState({showrun: \"none\"});\r\n  }\r\n  showClearParticles(b){\r\n    if(b) this.setState({showclearparticles: \"block\"});\r\n    else this.setState({showclearparticles: \"none\"});\r\n  }\r\n  showClearSetup(b){\r\n    if(b) this.setState({showclearsetup: \"block\"});\r\n    else this.setState({showclearsetup: \"none\"});\r\n  }\r\n  render(){\r\n\r\n    const handleDelete = ()=>{\r\n      this.props.clearSetup();\r\n      this.showClearSetup(false);\r\n    }\r\n\r\n    return <>\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete all components?\" fun={handleDelete}>\r\n\r\n    </ConfirmDialog>\r\n   <DetectorDialog ref={this.dialog} createbutton={this.props.createbutton} buttons={this.props.buttons}></DetectorDialog>\r\n   <GunDialog ref={this.gundialog} createbutton={this.props.creategunbutton} buttons={this.props.buttons}></GunDialog>\r\n   <SourceDialog ref={this.sourcedialog} createbutton={this.props.createsourcebutton} buttons={this.props.buttons}></SourceDialog>\r\n   <RunDialog ref={this.rundialog} runsim={this.props.run}></RunDialog>\r\n   <SpectrumDialog ref={this.spectrumdialog} runsim={this.props.runspectroscopy} detectors={this.props.detectors}></SpectrumDialog>\r\n   <VolumeDialog ref={this.volumedialog} createbutton={this.props.createvolume}></VolumeDialog>\r\n\r\n   <Navbar bg=\"light\" variant=\"light\" style={{position: 'fixed', 'z-index': '4'}}>\r\n        <Navbar.Brand>Geant4</Navbar.Brand>\r\n        <Button style={{\"display\": this.state.showrun}} variant=\"primary\" onClick={()=>{\r\n          this.rundialog.current.showDialog();}} >Run</Button>\r\n\r\n        <Button variant=\"primary\" style={{backgroundColor: 'green', \"display\" : this.state.showrun}} onClick={()=>{\r\n          this.spectrumdialog.current.showDialog();}}>Spectroscopy</Button>\r\n\r\n        <Button variant=\"primary\" style={{\"display\" : this.state.showclearparticles, backgroundColor: 'red'}} onClick={()=>{\r\n                  this.props.clearrun();\r\n                  this.showClearParticles(false);\r\n                  }}>Clear particles</Button>\r\n\r\n        <Button variant=\"primary\" style={{\"display\" : this.state.showclearsetup, backgroundColor: 'red'}} onClick={()=>{\r\n                  this.confirmDialog.current.showDialog();\r\n                  \r\n                  }}>Clear setup</Button>\r\n\r\n        <Nav className=\"mr-auto\">\r\n        <Dropdown>\r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={{backgroundColor: 'white', border: 'none', color: 'black'}}>\r\n          Add\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">Particle Detector</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{this.dialog.current.showDialog(this.props.volumes);}}>Detector</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        <br/>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">General Particle Source</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{this.sourcedialog.current.showDialog();}}>GPS</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        <br/>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">Directed Particle Gun</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{this.gundialog.current.showDialog();}}>Gun</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">Detector volume</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{\r\n            this.volumedialog.current.showDialog();\r\n            }}>Volume</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n      <Dropdown>\r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={{backgroundColor: 'white', border: 'none', color: 'black'}}>\r\n          View\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu>\r\n        <Form.Check type=\"checkbox\" label=\"Show Tracks\" checked={this.state.showTracks} onChange={(evt)=>{\r\n          this.setState({showTracks: evt.target.checked});\r\n          this.props.setshowtracks(this.state.showTracks);}} style={{margin: '12px'}} />\r\n        <Form.Check type=\"checkbox\" label=\"Show Particles\" checked={this.state.showParticles} onChange={(evt)=>{\r\n          this.setState({showParticles: evt.target.checked});\r\n          this.props.setshowparticles(this.state.showParticles);}}\r\n          style={{margin: '12px'}}/>\r\n\r\n<Form.Check type=\"checkbox\" label=\"Show Axes\" checked={this.state.showAxes} onChange={(evt)=>{\r\n          this.setState({showAxes: evt.target.checked});\r\n          this.props.setshowaxes(this.state.showAxes);}}\r\n          style={{margin: '12px'}}/>\r\n\r\n<Form.Check type=\"checkbox\" label=\"Show Grid\" checked={this.state.showGrid} onChange={(evt)=>{\r\n          this.setState({showGrid: evt.target.checked});\r\n          if(this.state.showGrid) this.props.canvas.current.updateHint(\" \");\r\n          this.props.setshowgrid(this.state.showGrid);}}\r\n          style={{margin: '12px'}}/>\r\n        \r\n\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n        </Nav>\r\n        \r\n      </Navbar>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default NavigationBar;\r\n","import { Vector3 } from '../utils/maths';\r\n\r\nclass Particle {\r\n    constructor(){\r\n        this.track_id = 0;\r\n        this.parent_id = 0;\r\n        this.position = new Vector3(0,0,0);\r\n        this.color = new Vector3(1,1,1);\r\n        this.totalEnergy = 0;\r\n        this.energyDeposit = 0;\r\n        this.definition = \"\";\r\n        this.id = \"\";\r\n\r\n    }\r\n    \r\n};\r\n\r\nexport default Particle;","import React, { Component, createRef } from 'react';\r\nimport Chart from 'chart.js';\r\nimport 'chartjs-plugin-zoom';\r\n\r\nclass Spectrum extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.canvas = React.createRef();\r\n        \r\n    }\r\n    componentDidMount(){\r\n        this.chart = new Chart(this.canvas.current.getContext(\"2d\"), {\r\n            // The type of chart we want to create\r\n            type: 'bar',\r\n        \r\n            // The data for our dataset\r\n            data: {\r\n                labels: [],\r\n                datasets: [{\r\n                    label: 'counts',\r\n                    backgroundColor: 'rgb(0, 99, 132)',\r\n                    borderColor: 'rgb(0, 99, 132)',\r\n                    data: []\r\n                }]\r\n            },\r\n        \r\n            // Configuration options go here\r\n            options: { responsive: true,\r\n                plugins: {\r\n                    zoom: {\r\n                        // Container for pan options\r\n                        pan: {\r\n                            // Boolean to enable panning\r\n                            enabled: true,\r\n        \r\n                            // Panning directions. Remove the appropriate direction to disable \r\n                            // Eg. 'y' would only allow panning in the y direction\r\n                            mode: 'xy'\r\n                        },\r\n        \r\n                        // Container for zoom options\r\n                        zoom: {\r\n                            // Boolean to enable zooming\r\n                            enabled: true,\r\n        \r\n                            // Zooming directions. Remove the appropriate direction to disable \r\n                            // Eg. 'y' would only allow zooming in the y direction\r\n                            mode: 'xy',\r\n                        }\r\n                    }\r\n                }\r\n             }\r\n        });\r\n    }\r\n    render(){\r\n        return <div>\r\n            <canvas ref={this.canvas}></canvas>\r\n        </div>\r\n    }\r\n    energies = [];\r\n    numberofenergies = [];\r\n    add(e){\r\n        if(isNaN(e)) return;\r\n        if(this.contains(e)){\r\n            this.numberofenergies[this.getIndex(e)]++;\r\n        }else{\r\n            this.energies.push(e);\r\n            this.numberofenergies.push(1);\r\n        }\r\n    }\r\n    contains(e){\r\n        for(var i = 0;i<this.energies.length;i++){\r\n            if(this.energies[i] == e) return true;\r\n        }\r\n        return false;\r\n    }\r\n    getIndex(e){\r\n        for(var i = 0;i<this.energies.length;i++){\r\n            if(Math.abs(this.energies[i] - e) == 0) return i;\r\n        }\r\n        return -1;\r\n    }\r\n    sort(bin){\r\n        var list = [];\r\n        let max = this.energies[this.energies.length - 1];\r\n        alert(max);\r\n        for(let i = 0;i<max;i+=bin){\r\n            this.add(i);\r\n        }\r\n        for (var j = 0; j < this.energies.length; j++)\r\n            list.push({ 'hit': this.energies[j], 'no': this.numberofenergies[j] });\r\n\r\n        list.sort(function (a, b) {\r\n            return ((a.hit < b.hit) ? -1 : ((a.hit == b.hit) ? 0 : 1));\r\n        });\r\n        \r\n        for (var k = 0; k < list.length; k++) {\r\n            this.energies[k] = list[k].hit;\r\n            this.numberofenergies[k] = list[k].no;\r\n        }\r\n        for(var i = 0;i<this.energies.length;i++){\r\n            this.addData(\"[\" + this.energies[i] + \"-\" + (parseInt(this.energies[i]) + parseInt(bin)) + \"]\",this.numberofenergies[i]-1);\r\n        }\r\n        \r\n        \r\n    }\r\n    clear(){\r\n        this.chart.destroy();\r\n        let ctx = this.canvas.current.getContext(\"2d\");\r\n        this.chart = new Chart(ctx, {\r\n            // The type of chart we want to create\r\n            type: 'bar',\r\n        \r\n            // The data for our dataset\r\n            data: {\r\n                labels: [],\r\n                datasets: [{\r\n                    label: 'counts',\r\n                    backgroundColor: 'rgb(0, 99, 132)',\r\n                    borderColor: 'rgb(0, 99, 132)',\r\n                    data: []\r\n                }]\r\n            },\r\n        \r\n            // Configuration options go here\r\n            options: { responsive: true,\r\n                scales: {\r\n                    yAxes: [{\r\n                        scaleLabel: {\r\n                            display: true,\r\n                            labelString: 'number of hits'\r\n                        }\r\n                    }],\r\n                    xAxes: [{\r\n                        ticks: {\r\n                            userCallback: function(label, index, labels) {\r\n                                return label;\r\n                            }\r\n                         },\r\n                        scaleLabel: {\r\n                            display: true,\r\n                            labelString: 'energies (keV)'\r\n                        }\r\n                    }]\r\n                },\r\n                plugins: {\r\n                    zoom: {\r\n                        // Container for pan options\r\n                        pan: {\r\n                            // Boolean to enable panning\r\n                            enabled: true,\r\n        \r\n                            // Panning directions. Remove the appropriate direction to disable \r\n                            // Eg. 'y' would only allow panning in the y direction\r\n                            mode: 'x'\r\n                        },\r\n        \r\n                        // Container for zoom options\r\n                        zoom: {\r\n                            // Boolean to enable zooming\r\n                            enabled: true,\r\n        \r\n                            // Zooming directions. Remove the appropriate direction to disable \r\n                            // Eg. 'y' would only allow zooming in the y direction\r\n                            mode: 'xy',\r\n                        }\r\n                    }\r\n                }\r\n             }\r\n        });\r\n        this.energies = [];\r\n        this.numberofenergies = [];\r\n        \r\n    }\r\n    static save(){\r\n        \r\n    }\r\n    addData(label, data) {\r\n        this.chart.data.labels.push(label);\r\n        this.chart.data.datasets.forEach((dataset) => {\r\n            dataset.data.push(data);\r\n        });\r\n        this.chart.update();\r\n    }\r\n}\r\nexport default Spectrum;","import React, {Component} from 'react';\r\nimport {Form, Button} from 'react-bootstrap';\r\nimport AceEditor from 'react-ace';\r\nimport 'brace/mode/elixir';\r\nimport 'brace/theme/monokai';\r\nimport Parser from '../utils/Parser';\r\n\r\nclass CodeEditor extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.fileinput = React.createRef();\r\n\r\n        this.updateText = this.updateText.bind(this);\r\n        this.state = {text: '', width: '20%'}\r\n        this.editor = React.createRef();\r\n    }\r\n    updateText(s){\r\n        this.setState({text: s});\r\n    }\r\n    render(){\r\n        return <div \r\n        style={{'width':this.state.width,'height':'100%', 'top':'50px',\r\n         'position': 'fixed', 'right':'0', 'z-index':'3', 'border': '0', 'borderRadius' : '0', 'padding':'0', 'margin':'0', 'background-color' : 'white'}}> \r\n\r\n<Button style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}\r\nonClick={()=>{\r\n   this.setState({text: \"Write your code here\"});\r\n}}>New</Button>\r\n<input ref={this.fileinput} type=\"file\" style={{\"display\":\"none\"}} onChange={(e)=>{\r\n    var r = new FileReader();\r\n\r\n    r.onload = ()=>{\r\n      var data = r.result;\r\n      this.updateText(data);\r\n    }\r\n    r.readAsBinaryString(e.target.files[0]);\r\n\r\n}}></input>\r\n<Button style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}\r\nonClick={()=>{\r\n    this.fileinput.current.click();\r\n}}>Open</Button>\r\n            <Button \r\n            onClick={()=>{\r\n                let tmp = this.state.text;\r\n                Parser.parse(tmp,this.props.canvas.current, this.props.clearSetup,this.props.createDetector, this.props.createSource, this.props.createGun);\r\n                this.setState({text: tmp});\r\n                }}\r\n            style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}>Run script</Button>\r\n            <Button style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}\r\nonClick={()=>{\r\n    window.location = \"Help\";\r\n}}>Help</Button>\r\n            <AceEditor style={{'z-index' : '2','width':'100%'}} \r\n            ref={this.editor}\r\n            value={this.state.text}\r\n            mode=\"elixir\"\r\n            theme=\"monokai\"\r\n            fontSize={16}\r\n            onChange={(evt)=>{\r\n                this.setState({text: evt});\r\n            }}>\r\n            </AceEditor>\r\n\r\n        <Button \r\n        onClick={()=>{\r\n            if(this.state.width == '20%'){\r\n                this.setState({width: '0'});\r\n            }else{\r\n                this.setState({width: '20%'});\r\n            }\r\n        }}\r\n        style={{'right': this.state.width, 'position' : 'fixed', 'top': '50%', 'z-index': '3', 'height':'50px', 'background-color': 'gray', 'border' : '0'}}>\r\n        </Button>\r\n        <div style={{'position':'fixed','z-index':'1','background-color' : 'black', 'height' : '100%', 'top' : '0' , 'width' : this.state.width}} />\r\n\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default CodeEditor;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport { Maths, Camera, Vector3 } from '../utils/maths.js';\r\nimport Detector from '../detector/Detektor';\r\nimport Model from '../rendering/model';\r\n\r\n\r\nclass ModelCanvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.updateCanvas = this.updateCanvas.bind(this);\r\n    this.state = ({ show: false });\r\n    this.canvas = React.createRef();\r\n    this.camera = new Camera(45, -45, 10, new Vector3(0, 0, 0), new Vector3(0, 0, 0));\r\n    this.oldX = 0;\r\n    this.oldY = 0;\r\n    this.move = false;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.keyDown = ` ${0}`;\r\n    this.down = false;\r\n  }\r\n  componentDidMount() {\r\n  }\r\n  updateCanvas(){\r\n    this.gl = this.canvas.current.getContext(\"webgl2\");\r\n    this.renderer = new RenderSystem(this.gl);\r\n    \r\n    function updateCamera(camera) {\r\n      if (camera.y > 89.0) {\r\n          camera.y = 89.0;\r\n      }\r\n      if (camera.y < -89.0) {\r\n          camera.y = -89.0;\r\n      }\r\n  \r\n      camera.p.x = (camera.d * -Math.sin(camera.x * Math.PI / 180.0)\r\n          * Math.cos(camera.y * Math.PI / 180.0) + camera.a.x);\r\n      camera.p.y = (camera.d * -Math.sin(camera.y * Math.PI / 180.0)\r\n          + camera.a.y);\r\n      camera.p.z = (-camera.d * Math.cos(camera.x * Math.PI / 180.0)\r\n          * Math.cos(camera.y * Math.PI / 180.0) + camera.a.z);\r\n  \r\n\r\n      return camera;\r\n  }\r\n    this.renderer = new RenderSystem(this.gl);\r\n    this.renderer.drawAxes = false;\r\n    let model = new Model(this.props.modeldata.vertices, this.props.modeldata.normals, this.gl);\r\n    model.drawLines = false;\r\n    model.color = new Vector3(.8,.8,.8);\r\n    this.renderer.addDetector(new Detector(model));\r\n    this.renderer.models = [];\r\n    var draw = ()=>{\r\n      if(this.state.show == false) return;\r\n      this.gl.clearColor(.1,1,.1,1.0);\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\r\n      let projection = Maths.createProjectionMatrix(70,.1 * this.camera.d,1000 * this.camera.d, this.canvas.current.offsetWidth,this.canvas.current.offsetHeight);\r\n      if(this.down && this.move){\r\n        if (this.keyDown === 17) {\r\n          this.camera.a.y -= .01 * (this.getMouseYd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n          this.camera.a.z += .01 * (Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d);\r\n\r\n              this.camera.a.z -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * -this.getMouseXd() * .01 * this.camera.d);\r\n\r\n\r\n\r\n      } else {\r\n        this.camera.x += this.getMouseXd() / 2;\r\n        this.camera.y += this.getMouseYd() / 2;\r\n      }\r\n      }\r\n      updateCamera(this.camera);\r\n      this.renderer.draw(projection, this.camera);\r\n      requestAnimationFrame(draw);\r\n    }\r\n    requestAnimationFrame(draw);\r\n  }\r\n  showDialog() {\r\n    this.setState({ show: true });\r\n\r\n  }\r\n  hideDialog() {\r\n    this.setState({ show: false });\r\n  }\r\n  \r\n  getMouseXd(){\r\n    return this.oldX - this.x;\r\n  }\r\n  getMouseYd(){\r\n    return this.oldY - this.y;\r\n  }\r\n  render() {\r\n    return <div>\r\n      <Modal show={this.state.show} onHide={() => { this.hideDialog(); }} onShow={this.updateCanvas}>\r\n        <canvas ref={this.canvas}\r\n        width='2000'\r\n        height='2000'\r\n        style={{\"width\":\"600px\", \"height\": \"600px\"}}\r\n        onKeyDown={(e)=>{this.keyDown = e.keyCode;}}\r\n        onKeyUp={(e)=>{this.keyDown = ` ${0}`;}}\r\n        onMouseMove={(e)=>{ \r\n          this.move = true;\r\n          this.oldX = this.x;\r\n          this.oldY = this.y;\r\n          this.x = e.pageX;\r\n          this.y = e.pageY;\r\n        }}\r\n        onMouseDown={()=>{this.down = true;}} \r\n        onMouseUp={()=>{this.down = false;}}\r\n        onWheel={(e)=>{\r\n          let delta = 0;\r\n          if(e.deltaY > 0) delta = 1;\r\n          else delta = -1;\r\n          this.camera.d += (this.camera.d / (delta*100)) * 10;\r\n          }}></canvas>\r\n      </Modal>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default ModelCanvas;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport { Button, Nav, Navbar, FormControl, Container, Col, Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass VolumeEditButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n\r\n    this.state = {\r\n      show: false\r\n    }\r\n\r\n  }\r\n  componentDidMount() {\r\n\r\n  }\r\n  async showDialog() {\r\n    this.setState({ show: true });\r\n    \r\n  }\r\n  hideDialog() {\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  render() {\r\n    \r\n    return <>\r\n    </>\r\n  }\r\n}\r\n\r\nexport default VolumeEditButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport image from '../images/editicon.png';\r\nimport VolumeEditButton from './VolumeEditButton';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport ModelCanvas from '../graphics/ModelCanvas';\r\n\r\nclass VolumeButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.setName = this.setName.bind(this);\r\n    this.state = {details: this.props.details,name: this.props.name};\r\n    this.canvas = React.createRef();\r\n  }\r\n  static id = 0;\r\n  componentDidMount(){\r\n    \r\n  }\r\n  updateDetails(d){\r\n    this.setState({details: d});\r\n  }\r\n  setName(n){\r\n    this.setState({name: n});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <ModelCanvas modeldata={this.props.modeldata} ref={this.canvas}></ModelCanvas>\r\n    <VolumeEditButton></VolumeEditButton>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey={this.id} onClick={()=>{\r\n          this.canvas.current.showDialog();\r\n          }}>\r\n          {this.state.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog();}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default VolumeButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false,title: \"\",content: \"\",fun: null, arg: null}\r\n     \r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  showDialog(title, content, f, arg){\r\n    this.setState({title: title, content: content, fun: f, arg: arg});\r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{this.state.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        {this.state.content}\r\n      \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n              this.state.fun(this.state.arg);\r\n              this.hideDialog();\r\n          }}>\r\n            OK\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport { Button, Modal, Row, Col, Form, Container } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass VolumeSelectDialog extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.addVolume = this.addVolume.bind(this);\r\n        this.removeVolume = this.removeVolume.bind(this);\r\n\r\n        this.state = {\r\n            show: false,\r\n            volumes: [],\r\n            fixed: [],\r\n            showConfirm: 'none',\r\n            fun: null\r\n        }\r\n\r\n    }\r\n    componentDidMount() {\r\n    }\r\n    updateVolume(v, l){\r\n        let res = this.state.fixed;\r\n        for(let i = 0;i<this.state.fixed.length;i++){\r\n            if(this.state.fixed[i].volume == v){\r\n                res[i].label = l;\r\n            }\r\n        }\r\n        this.setState({fixed: res});\r\n    }\r\n    removeVolume(v) {\r\n        let res = this.state.volumes;\r\n        for (let i = 0; i < this.state.volumes.length; i++) {\r\n            if (this.state.volumes[i] == v) {\r\n                res.splice(i, 1);\r\n            }\r\n        }\r\n        this.setState({ volumes: res });\r\n    }\r\n    addVolume(v, label, data) {\r\n        let res = this.state.fixed;\r\n        res.push({volume: v,label: label,data: data});\r\n        this.setState({ fixed: res });\r\n        if(this.state.volumes.length == 0){\r\n            this.setState({showConfirm: 'block'});\r\n        }\r\n    }\r\n    showDialog(volumes, f) {\r\n        this.setState({ show: true, fun: f });\r\n        this.setState({ volumes: volumes, fixed: [], showConfirm: 'none'});\r\n    }\r\n    hideDialog() {\r\n        this.setState({ show: false });\r\n    }\r\n\r\n    static id = 0;\r\n    render() {\r\n        const vs = this.state.volumes.map(e => {\r\n            return <>\r\n                <Row style={{ \"padding\": \"10px\", \"border\": \"solid 1px black\" }}>\r\n                    <Col>\r\n                        {e}\r\n                    </Col>\r\n                    <Col>\r\n                    <Form.File\r\n                        id=\"stl-file\"\r\n                        data-browse=\"Open\"\r\n                        label=\"\"\r\n                        custom\r\n                        onChange={(evt) => {\r\n                            \r\n\r\n                            var r = new FileReader();\r\n\r\n                            r.onload = () => {\r\n                                var data = r.result;\r\n                                this.addVolume(e, path, data);\r\n                            }\r\n                            r.readAsBinaryString(evt.target.files[0]);\r\n\r\n                            let path = evt.target.value;\r\n                            path = path.split(\"\\\\\")[path.split(\"\\\\\").length - 1];\r\n                            this.setState({ filelabel: path });\r\n                            this.removeVolume(e);\r\n\r\n                            \r\n                        }}\r\n                    />\r\n                    </Col>\r\n                </Row></>;\r\n        });\r\n        const fs = this.state.fixed.map((e, i) => {\r\n            return <>\r\n                <Row style={{ \"padding\": \"10px\", \"border\": \"solid 1px black\" }}>\r\n\r\n                    <Col>\r\n                        {e.volume}\r\n                    </Col>\r\n                    <Col>\r\n                    <Form.File\r\n                        id=\"stl-file\"\r\n                        data-browse=\"Open\"\r\n                        label={e.label}\r\n                        custom\r\n                        onChange={(evt) => {\r\n                            \r\n\r\n                            var r = new FileReader();\r\n\r\n                            r.onload = () => {\r\n                                var data = r.result;\r\n                                this.setState({ modeldata: data });\r\n                            }\r\n                            r.readAsBinaryString(evt.target.files[0]);\r\n\r\n                            let path = evt.target.value;\r\n                            path = path.split(\"\\\\\")[path.split(\"\\\\\").length - 1];\r\n                            this.setState({ filelabel: path });\r\n                            \r\n                            this.updateVolume(e.volume, path);\r\n                        }}\r\n                    />\r\n                    </Col>\r\n                </Row></>;\r\n        });\r\n        return <>\r\n            <Modal show={this.state.show} onHide={() => { this.hideDialog(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Choose a geometry</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Container>\r\n                            Missing volumes\r\n                           {vs}\r\n                            < hr />\r\n                           Fixed volumes\r\n                           {fs}\r\n                        </Container>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => { this.hideDialog(); }}>\r\n                        Cancel\r\n          </Button>\r\n                    <Button \r\n                    style={{\"display\":this.state.showConfirm}}\r\n                    variant=\"primary\" onClick={() => {\r\n                        if (this.state.volumes != 0) {\r\n                            alert(\"Select an stl file!\");\r\n                            return;\r\n                        }\r\n                        this.hideDialog();\r\n                        for(let i = 0;i<this.state.fixed.length;i++){\r\n                            this.props.createbutton(this.state.fixed[i].volume, this.state.fixed[i].data);\r\n                        }\r\n                        this.state.fun();\r\n                    }}>\r\n                        OK\r\n          </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    }\r\n}\r\n\r\nexport default VolumeSelectDialog;\r\n","import React, { Component, createRef } from 'react';\nimport './App.css';\n\nimport Canvas from './graphics/Canvas.js';\nimport { Button, Card, Accordion, Container, Row, Col, Tabs, Tab, Nav } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport DetectorButton from './detector/DetectorButton';\nimport NavigationBar from './graphics/NavigationBar';\nimport GunButton from './gun/GunButton';\nimport SourceButton from './source/SourceButton';\nimport Particle from './entities/Particle';\nimport { Vector3 } from './utils/maths';\nimport Model from './rendering/model';\nimport Spectrum from './graphics/spectrum';\nimport STLParser from './utils/STLParser';\nimport CodeEditor from './graphics/CodeEditor';\nimport Parser from './utils/Parser';\nimport ModelCanvas from './graphics/ModelCanvas';\nimport VolumeButton from './volume/VolumeButton';\nimport VolumeList from './volume/VolumeList';\nimport VolumeDialog from './volume/VolumeDialog';\nimport PopupDialog from './graphics/PopupDialog';\nimport VolumeSelectDialog from './volume/VolumeSelectDialog';\nimport {Element} from 'react-scroll';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.spectrum = React.createRef();\n    this.navbar = React.createRef();\n    this.codeeditor = React.createRef();\n    this.volumedialog = React.createRef();\n    this.popup = React.createRef();\n    this.volumeselect = React.createRef();\n\n    this.state = { buttons: [], gunbuttons: [], sourcebuttons: [], volumebuttons: [], spectrum: true, page: 'first',\n    volumebuttonheight: \"100%\"}\n    this.createDetector = this.createDetector.bind(this);\n    this.createSource = this.createSource.bind(this);\n    this.createGun = this.createGun.bind(this);\n    this.createVolume = this.createVolume.bind(this);\n    this.removeDetector = this.removeDetector.bind(this);\n    this.removeGun = this.removeGun.bind(this);\n    this.removeSource = this.removeSource.bind(this);\n\n    this.runSim = this.runSim.bind(this);\n    this.runSpectroscopy = this.runSpectroscopy.bind(this);\n\n    this.setShowParticles = this.setShowParticles.bind(this);\n    this.setShowTracks = this.setShowTracks.bind(this);\n    this.setShowAxes = this.setShowAxes.bind(this);\n    this.setShowGrid = this.setShowGrid.bind(this);\n\n    this.clearRun = this.clearRun.bind(this);\n    this.clearSetup = this.clearSetup.bind(this);\n\n\n    this.accordion = React.createRef();\n    this.canvas = React.createRef();\n\n\n\n    this.detectors = [];\n    this.guns = [];\n    this.sources = [];\n    this.particles = [];\n    this.tracks = [];\n    this.volumes = [];\n  }\n  clearRun() {\n    this.canvas.current.clearRun();\n  }\n  runSpectroscopy(number_of_particles, detector, hideDialog, binsize) {\n    let message_data = [];\n\n    // particle gun stuff\n    message_data.push(0);\n\n    message_data.push(1);\n\n\n    message_data.push(0);\n    message_data.push(0);\n    message_data.push(0);\n\n    message_data.push(0);\n    message_data.push(0);\n    message_data.push(0);\n\n    message_data.push(0);\n\n    // detector stuff\n    var number_of_detectors = this.detectors.length;\n\n    message_data.push(number_of_detectors);\n\n    for (var i = 0; i < number_of_detectors; i++) {\n\n      message_data.push(\"G4_\" + this.detectors[i].material);\n      message_data.push(this.detectors[i].id);\n      message_data.push(this.detectors[i].model.position.x);\n      message_data.push(this.detectors[i].model.position.y);\n      message_data.push(this.detectors[i].model.position.z);\n\n      message_data.push(this.detectors[i].model.rotation.x);\n      message_data.push(this.detectors[i].model.rotation.y);\n      message_data.push(this.detectors[i].model.rotation.z);\n\n      message_data.push(this.detectors[i].model.scale.x);\n      message_data.push(this.detectors[i].model.scale.y);\n      message_data.push(this.detectors[i].model.scale.z);\n\n      message_data.push(this.detectors[i].model.vertices.length);\n      for (var j = 0; j < this.detectors[i].model.vertices.length; j++) {\n        message_data.push(this.detectors[i].model.vertices[j]);\n      }\n    }\n    //sources\n    var number_of_sources = this.sources.length;\n    message_data.push(number_of_sources);\n    for (var i = 0; i < number_of_sources; i++) {\n\n      message_data.push(this.sources[i].material);\n      //message_data.push(detectors[i].id);\n\n      message_data.push(this.sources[i].model.position.x);\n      message_data.push(this.sources[i].model.position.y);\n      message_data.push(this.sources[i].model.position.z);\n    }\n    //guns\n    var number_of_guns = this.guns.length;\n    message_data.push(number_of_guns);\n    for (var i = 0; i < number_of_guns; i++) {\n      message_data.push(this.guns[i].model.position.x);\n      message_data.push(this.guns[i].model.position.y);\n      message_data.push(this.guns[i].model.position.z);\n\n      message_data.push(this.guns[i].direction.x);\n      message_data.push(this.guns[i].direction.y);\n      message_data.push(this.guns[i].direction.z);\n\n      message_data.push(this.guns[i].energy);\n    }\n    alert(this.detectors[detector].id);\n    message_data.push(this.detectors[detector].id); //selected detector id\n    message_data.push(number_of_particles); //number of particles\n    message_data.push('end');\n    this.sendGamma(message_data, hideDialog, binsize);\n  }\n  runSim(number_of_particles, hidedialog) {\n    let message_data = [];\n\n    // particle gun stuff\n    message_data.push(1);\n\n    message_data.push(1);\n\n\n    message_data.push(0);\n    message_data.push(0);\n    message_data.push(0);\n\n    message_data.push(0);\n    message_data.push(0);\n    message_data.push(0);\n\n    message_data.push(0);\n\n    // detector stuff\n    var number_of_detectors = this.detectors.length;\n\n    message_data.push(number_of_detectors);\n\n    for (var i = 0; i < number_of_detectors; i++) {\n\n      message_data.push(\"G4_\" + this.detectors[i].material);\n      message_data.push(this.detectors[i].id);\n      message_data.push(this.detectors[i].model.position.x);\n      message_data.push(this.detectors[i].model.position.y);\n      message_data.push(this.detectors[i].model.position.z);\n\n      message_data.push(this.detectors[i].model.rotation.x);\n      message_data.push(this.detectors[i].model.rotation.y);\n      message_data.push(this.detectors[i].model.rotation.z);\n\n      message_data.push(this.detectors[i].model.scale.x);\n      message_data.push(this.detectors[i].model.scale.y);\n      message_data.push(this.detectors[i].model.scale.z);\n\n      message_data.push(this.detectors[i].model.vertices.length);\n      for (var j = 0; j < this.detectors[i].model.vertices.length; j++) {\n        message_data.push(this.detectors[i].model.vertices[j]);\n      }\n    }\n    //sources\n    var number_of_sources = this.sources.length;\n    message_data.push(number_of_sources);\n    for (var i = 0; i < number_of_sources; i++) {\n\n      message_data.push(this.sources[i].material);\n      //message_data.push(detectors[i].id);\n\n      message_data.push(this.sources[i].model.position.x);\n      message_data.push(this.sources[i].model.position.y);\n      message_data.push(this.sources[i].model.position.z);\n    }\n    //guns\n    var number_of_guns = this.guns.length;\n    message_data.push(number_of_guns);\n    for (var i = 0; i < number_of_guns; i++) {\n      message_data.push(this.guns[i].model.position.x);\n      message_data.push(this.guns[i].model.position.y);\n      message_data.push(this.guns[i].model.position.z);\n\n      message_data.push(this.guns[i].direction.x);\n      message_data.push(this.guns[i].direction.y);\n      message_data.push(this.guns[i].direction.z);\n\n      message_data.push(this.guns[i].energy);\n    }\n    message_data.push(number_of_particles); //number of particles\n    message_data.push('end');\n    this.send(message_data, hidedialog);\n  }\n  sendGamma(data, hideDialog, binsize) {\n    alert(data);\n    var message = '';\n    for (var i = 0; i < data.length; i++) {\n      message += data[i];\n      message += ',';\n    }\n    fetch('http://radsim.inf.elte.hu:9000/gammaAPI', {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify({ data: message })\n    })\n      .then(response => response.text())\n      .then(response => {\n        this.processGammaSpectrum(response, binsize);\n        hideDialog();\n        this.setState({ spectrum: false, page: \"second\" });\n      });\n  }\n  send(data, hidedialog) {\n    var message = '';\n    for (var i = 0; i < data.length; i++) {\n      message += data[i];\n      message += ',';\n    }\n    fetch('http://radsim.inf.elte.hu:9000/gammaAPI', {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify({ data: message })\n    })\n      .then(response => response.text())\n      .then(response => {\n        this.processResponse(response);\n        hidedialog();\n      });\n  }\n  processGammaSpectrum(response, binsize) {\n\n    let message = response;\n\n    message = message.split(\" \");\n    this.spectrum.current.clear();\n    for (var i = 0; i < message.length; i++) {\n      this.spectrum.current.add(Math.floor(parseFloat(message[i]) / binsize) * binsize);\n    }\n    this.spectrum.current.sort(binsize);\n  }\n  processResponse(response) {\n    var message = response;\n\n    var floats = message.split(' ');\n    var index = 0;\n    var j = 0;\n    function toNode(p, l) {\n      if (p == 'gamma') return '\"' + l + '\"';\n      if (p == 'e-') return '\"' + l + '\"';\n      if (p == 'e+') return '\"' + l + '\"';\n    }\n    this.particles = [];\n    while (index < floats.length - 1 - this.detectors.length - 1) {\n      var track_data = [];\n      var numberOfSteps = parseInt(floats[index]);\n      if (numberOfSteps == 0) break;\n      var definition = floats[index + 1];\n      for (var i = 0; i < numberOfSteps; i++) {\n        var particle = new Particle();\n        particle.position.x = parseFloat(floats[index + i * 7 + 2]) * .1;\n        particle.position.y = parseFloat(floats[index + i * 7 + 3]) * .1;\n        particle.position.z = parseFloat(floats[index + i * 7 + 4]) * .1;\n\n        track_data.push(parseFloat(floats[index + i * 7 + 2]) * .1);\n        track_data.push(parseFloat(floats[index + i * 7 + 3]) * .1);\n        track_data.push(parseFloat(floats[index + i * 7 + 4]) * .1);\n\n        particle.definition = definition;\n        particle.track_id = parseInt(floats[index + i * 7 + 5]);\n        particle.parent_id = parseInt(floats[index + i * 7 + 6]);\n        particle.totalEnergy = parseFloat(floats[index + i * 7 + 7]);\n        particle.energyDeposit = parseFloat(floats[index + i * 7 + 8]);\n\n        particle.color = new Vector3(1, 0, 0);\n        particle.id = j;\n\n\n        j++;\n\n\n        this.particles.push(particle);\n      }\n      index += numberOfSteps * 7 + 2;\n\n      var t_norm = [];\n      for (var k = 0; k < track_data.length; k++) {\n        t_norm.push(1);\n      }\n\n      var tm = this.canvas.current.addModel(track_data, t_norm);\n      if (definition == \"e-\") tm.color = new Vector3(1, 0, 1);\n      if (definition == \"gamma\") tm.color = new Vector3(1, 1, 1);\n      if (definition == \"e+\") tm.color = new Vector3(1, 1, 0);\n      tm.drawLines = true;\n      this.tracks.push(tm);\n    }\n\n\n    let tmp_particles = [];\n    for (var i = 0; i < this.particles.length; i += Math.ceil(this.particles.length / 10000)) {\n      tmp_particles.push(this.particles[i]);\n    }\n    this.particles = tmp_particles.slice();\n\n    function get_average(particles) {\n      var max = 0;\n      for (var i = 0; i < particles.length; i++) {\n        max += +particles[i].totalEnergy;\n      }\n      max = max / particles.length;\n\n      return max;\n    }\n    let max = get_average(this.particles) * 2;\n\n\n\n\n    for (let i = 0; i < this.particles.length; i++) {\n      if (this.particles[i].totalEnergy > max) this.particles[i].totalEnergy = max;\n      this.particles[i].color.x = 2 * (this.particles[i].totalEnergy / max);\n      this.particles[i].color.y = 1 - this.particles[i].color.x;\n\n      let d = this.particles[i].color.x / 100;\n      this.particles[i].scale = new Vector3(d, d, d);\n      this.canvas.current.addParticle(this.particles[i]);\n    }\n    if (this.particles.length > 0) this.navbar.current.showClearParticles(true);\n  }\n  modifyDetector(detector) {\n\n  }\n  createVolume(name, data) {\n    let modeldata = STLParser.parseData(data);\n    let bs = this.state.volumebuttons;\n    VolumeList.addVolume({name: name, data: data});\n    this.volumes.push({name: name, data: data});\n    bs.push(<VolumeButton name={name} modeldata={modeldata}></VolumeButton>);\n    this.setState({volumebuttons: bs});\n  }\n  createSource(n, x, y, z, mat, code) {\n    if (this.detectors.length > 0) this.navbar.current.showRun(true);\n    this.navbar.current.showClearSetup(true);\n    if (!code) this.codeeditor.current.updateText(\n      this.codeeditor.current.state.text +\n      \"\\\\Source{\\n\" +\n      \"\\tname: \" + '\"' + n + '\";\\n' +\n      \"\\tposition[cm]: \" + x + \", \" + y + \", \" + z + \";\\n\" +\n      \"\\tmaterial: \" + '\"' + mat + '\";\\n' +\n      \"}\\n\"\n    );\n\n    let bs = this.state.sourcebuttons;\n    let details = <Container>\n      <Row>\n        <Col>Position: </Col>\n      </Row>\n      <Row>\n        <Col>x: {x} cm</Col>\n        <Col>y: {y} cm</Col>\n        <Col>z: {z} cm</Col>\n      </Row>\n      <Row>\n        <Col>Material: {mat}</Col>\n      </Row>\n    </Container>;\n    let source = this.canvas.current.addSource(x, y, z, mat);\n    source.id = +DetectorButton.id;\n    Parser.chunks.push({\n      id: source.id, code: \"\\\\Source{\\n\" +\n        \"\\tname: \" + '\"' + n + '\";\\n' +\n        \"\\tposition[cm]: \" + x + \", \" + y + \", \" + z + \";\\n\" +\n        \"\\tmaterial: \" + '\"' + mat + '\";\\n' +\n        \"}\\n\"\n    });\n    source.name = n;\n    this.sources.push(source);\n    bs.push(<SourceButton codeeditor={this.codeeditor} name={n} removebutton={this.removeSource} id={DetectorButton.id} detector={source} details={details} key={++DetectorButton.id} buttons={this.state.sourcebuttons}></SourceButton>);\n    this.setState({ sourcebuttons: bs });\n  }\n  createGun(n, px, py, pz, dx, dy, dz, energy, code) {\n    if (this.detectors.length > 0) this.navbar.current.showRun(true);\n    this.navbar.current.showClearSetup(true);\n\n    if (!code) this.codeeditor.current.updateText(\n      this.codeeditor.current.state.text +\n      \"\\\\Gun{\\n\" +\n      \"\\tname: \" + '\"' + n + '\";\\n' +\n      \"\\tposition[cm]: \" + px + \", \" + py + \", \" + pz + \";\\n\" +\n      \"\\tdirection: \" + dx + \", \" + dy + \", \" + dz + \";\\n\" +\n      \"\\tenergy[keV]: \" + energy + ';\\n' +\n      \"}\\n\"\n    );\n\n    let bs = this.state.gunbuttons;\n    let details = <Container>\n      <Row>\n        <Col>Position: </Col>\n      </Row>\n      <Row>\n        <Col>x: {px} cm</Col>\n        <Col>y: {py} cm</Col>\n        <Col>z: {pz} cm</Col>\n      </Row>\n      <Row>\n        <Col>Direction: </Col>\n      </Row>\n      <Row>\n        <Col>x: {dx} </Col>\n        <Col>y: {dy} </Col>\n        <Col>z: {dz} </Col>\n      </Row>\n      <Row>\n        <Col>Energy: {energy} keV</Col>\n      </Row>\n    </Container>;\n\n    let gun = this.canvas.current.addGun(px, py, pz, dx, dy, dz, energy);\n    gun.id = +DetectorButton.id;\n    Parser.chunks.push({\n      id: gun.id, code: \"\\\\Gun{\\n\" +\n        \"\\tname: \" + '\"' + n + '\";\\n' +\n        \"\\tposition[cm]: \" + px + \", \" + py + \", \" + pz + \";\\n\" +\n        \"\\tdirection: \" + dx + \", \" + dy + \", \" + dz + \";\\n\" +\n        \"\\tenergy[keV]: \" + energy + ';\\n' +\n        \"}\\n\"\n    });\n    gun.name = n;\n    this.guns.push(gun);\n    bs.push(<GunButton codeeditor={this.codeeditor} name={n} removebutton={this.removeGun} id={DetectorButton.id} detector={gun} details={details} key={++DetectorButton.id} buttons={this.state.buttons}></GunButton>);\n    this.setState({ gunbuttons: bs });\n  }\n  createDetector(n, px, py, pz, rx, ry, rz, sx, sy, sz, material, type, data, color, code) {\n    if (this.sources.length > 0 || this.guns.length > 0) this.navbar.current.showRun(true);\n    this.navbar.current.showClearSetup(true);\n    if (!code) this.codeeditor.current.updateText(\n      this.codeeditor.current.state.text +\n      \"\\\\Detector{\\n\" +\n      \"\\tname: \" + '\"' + n + '\";\\n' +\n      \"\\tposition[cm]: \" + px + \", \" + py + \", \" + pz + \";\\n\" +\n      \"\\trotation[rad]: \" + rx + \", \" + ry + \", \" + rz + \";\\n\" +\n      \"\\tscale[cm]: \" + sx + \", \" + sy + \", \" + sz + \";\\n\" +\n      \"\\tmaterial: \" + '\"' + material + '\";\\n' +\n      \"\\tgeometry: \" + '\"' + type + '\";\\n' +\n\n      \"}\\n\"\n    );\n\n    let bs = this.state.buttons;\n    let details = <Container>\n      <Row>\n        <Col>Position: </Col>\n      </Row>\n      <Row>\n        <Col>x: {px} cm</Col>\n        <Col>y: {py} cm</Col>\n        <Col>z: {pz} cm</Col>\n      </Row>\n      <Row>\n        <Col>Rotation: </Col>\n      </Row>\n      <Row>\n        <Col>x: {rx} deg</Col>\n        <Col>y: {ry} deg</Col>\n        <Col>z: {rz} deg</Col>\n      </Row>\n      <Row>\n        <Col>Scale: </Col>\n      </Row>\n      <Row>\n        <Col>x: {sx}</Col>\n        <Col>y: {sy}</Col>\n        <Col>z: {sz}</Col>\n      </Row>\n      <Row>\n        <Col>Material: </Col>\n      </Row>\n      <Row>\n        <Col>{material}</Col>\n      </Row>\n    </Container>;\n    let paramterize = (detector) => {\n      detector.id = +DetectorButton.id;\n      detector.geometry = type;\n      Parser.chunks.push({\n        id: detector.id, code: \"\\\\Detector{\\n\" +\n          \"\\tname: \" + '\"' + n + '\";\\n' +\n          \"\\tposition[cm]: \" + px + \", \" + py + \", \" + pz + \";\\n\" +\n          \"\\trotation[rad]: \" + rx + \", \" + ry + \", \" + rz + \";\\n\" +\n          \"\\tscale[cm]: \" + sx + \", \" + sy + \", \" + sz + \";\\n\" +\n          \"\\tmaterial: \" + '\"' + material + '\";\\n' +\n          \"\\tgeometry: \" + '\"' + type + '\";\\n' +\n          \"}\\n\"\n      });\n      detector.name = n;\n      detector.model.color = color;\n      this.detectors.push(detector);\n      bs.push(<DetectorButton volumes={this.volumes} canvas={this.canvas} codeeditor={this.codeeditor} name={n} removebutton={this.removeDetector} id={DetectorButton.id} detector={detector} details={details} key={++DetectorButton.id} buttons={this.state.buttons}></DetectorButton>);\n      this.setState({ buttons: bs });\n    }\n    let detector = null;\n    if (type == \"stl\") {\n      let modelData = STLParser.parseData(data);\n      detector = this.canvas.current.addSTLDetector(px, py, pz, rx, ry, rz, sx, sy, sz, material, modelData);\n      paramterize(detector);\n\n    } else {\n      this.canvas.current.addDetector(px, py, pz, rx, ry, rz, sx, sy, sz, material, type, this.volumes).then(det => {\n        paramterize(det);\n      });\n    }\n\n  }\n  clearSetup() {\n    Parser.chunks = [];\n    this.codeeditor.current.updateText(\" \");\n    this.codeeditor.current.text = \"\";\n    DetectorButton.id = 0;\n    this.setState({ buttons: [], gunbuttons: [], sourcebuttons: [] });\n    for (let i = 0; i < this.detectors.length; i++) {\n      this.canvas.current.removeDetector(this.detectors[i]);\n    }\n    for (let i = 0; i < this.sources.length; i++) {\n      this.canvas.current.removeSource(this.sources[i]);\n    }\n    for (let i = 0; i < this.guns.length; i++) {\n      this.canvas.current.removeGun(this.guns[i]);\n    }\n    this.detectors = [];\n    this.sources = [];\n    this.guns = [];\n    this.state.buttons = [];\n    this.state.gunbuttons = [];\n    this.state.sourcebuttons = [];\n    this.clearRun();\n\n  }\n  removeSource(source, button) {\n    if (this.detectors.length < 1 || (this.sources.length < 1 && this.guns.length < 1)) this.navbar.current.showRun(false);\n\n    if (this.sourceslength == 0 || this.guns.length == 0 || this.guns.length == 0) this.navbar.current.showClearSetup(false);\n\n    this.canvas.current.removeSource(source);\n    this.codeeditor.current.updateText(Parser.removeChunk(source.id));\n\n    for (var i = 0; i < this.state.sourcebuttons.length; i++) {\n      if (this.state.sourcebuttons[i].key - 1 == button.id) {\n        let bs = this.state.sourcebuttons;\n        bs.splice(i, 1);\n        this.sources.splice(i, 1);\n        this.setState({ sourcebuttons: bs });\n        return;\n      }\n    }\n  }\n  removeGun(gun, button) {\n    if (this.detectors.length < 1 || (this.sources.length < 1 && this.guns.length < 1)) this.navbar.current.showRun(false);\n\n    if (this.sourceslength == 0 || this.guns.length == 0 || this.guns.length == 0) this.navbar.current.showClearSetup(false);\n\n    this.canvas.current.removeGun(gun);\n    this.codeeditor.current.updateText(Parser.removeChunk(gun.id));\n\n    for (var i = 0; i < this.state.gunbuttons.length; i++) {\n      if (this.state.gunbuttons[i].key - 1 == button.id) {\n        let bs = this.state.gunbuttons;\n        bs.splice(i, 1);\n        this.guns.splice(i, 1);\n        this.setState({ gunbuttons: bs });\n        return;\n      }\n    }\n  }\n  removeDetector(detector, button) {\n    if (this.detectors.length < 1 || (this.sources.length < 1 && this.guns.length < 1)) this.navbar.current.showRun(false);\n    if (this.sourceslength == 0 || this.guns.length == 0 || this.guns.length == 0) this.navbar.current.showClearSetup(false);\n\n\n    this.canvas.current.removeDetector(detector);\n    this.codeeditor.current.updateText(Parser.removeChunk(detector.id));\n\n    for (var i = 0; i < this.state.buttons.length; i++) {\n      if (this.state.buttons[i].key - 1 == button.id) {\n        let bs = this.state.buttons;\n        bs.splice(i, 1);\n        this.detectors.splice(i, 1);\n        this.setState({ buttons: bs });\n        return;\n      }\n    }\n\n  }\n  setShowTracks(b) {\n    this.canvas.current.setShowTracks(!b);\n  }\n  setShowParticles(b) {\n    this.canvas.current.drawParticles = !b;\n  }\n  setShowAxes(b) {\n    this.canvas.current.setShowAxes(!b);\n  }\n  setShowGrid(b) {\n    this.canvas.current.drawGrid = !b;\n  }\n  async componentDidMount() {\n    \n\n    //setup volumes from the database\n    \n\n    Parser.init(this.volumeselect.current, this.popup.current.showDialog);\n\n    let response = await fetch(\"http://localhost/database\", {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify({name: \"\"})\n      });\n      let json = await response.json();\n      for(let i = 0;i<json.length;i++){\n        var str='';\n        for (let j = 0;j < json[i].data.data.length;j++){\n          str+=String.fromCharCode(json[i].data.data[j]);\n        }\n        this.createVolume(json[i].name,str);\n      }\n      //setup first detector\n    this.createDetector(\"Cube\", 0, 0, 0, 0, 0, 0, 10, 10, 10, \"Pb\", 'cube', null, new Vector3(1, 1, 1));\n    \n  }\n  render() {\n\n\n    const items = this.state.buttons.map(function (item) {\n      return <div style={{\"z-index\":\"3\",\"color\":\"black\"}}> {item} </div>;\n    });\n    const gunButtons = this.state.gunbuttons.map(function (item) {\n      return <div> {item} </div>\n    });\n    const sourceButtons = this.state.sourcebuttons.map(function (item) {\n      return <div> {item} </div>\n    });\n    let volumeButtons = this.state.volumebuttons.map(function (item) {\n      return <div style={{\"z-index\":\"3\",\"color\":\"black\"}}> {item} </div>\n    });\n\n    return <div>\n      <VolumeSelectDialog ref={this.volumeselect} createbutton={this.createVolume}></VolumeSelectDialog>\n      <VolumeDialog ref={this.volumedialog} createbutton={this.createVolume}></VolumeDialog>\n      <PopupDialog ref={this.popup}></PopupDialog>\n      <Tab.Container id=\"left-tabs-example\" defaultActiveKey=\"first\" activeKey={this.state.page}>\n        <Col sm={3}>\n          <Nav variant=\"pills\" className=\"flex-column\" className='page'>\n            <Nav.Item>\n              <Nav.Link eventKey=\"first\" onClick={() => { this.setState({ page: 'first' }); }}>simulation</Nav.Link>\n            </Nav.Item>\n            <Nav.Item>\n              <Nav.Link eventKey=\"second\" disabled={this.state.spectrum} onClick={() => { this.setState({ page: 'second' }); }}>spectrum</Nav.Link>\n            </Nav.Item>\n          </Nav>\n        </Col>\n        <Tab.Content>\n          <Tab.Pane eventKey=\"first\" style={{\"overflow\":\"hidden\"}}>\n            <Canvas ref={this.canvas} style={{\"overflow\":\"hidden\"}}></Canvas>\n            <CodeEditor ref={this.codeeditor} createGun={this.createGun} clearSetup={this.clearSetup} createSource={this.createSource} createDetector={this.createDetector} canvas={this.canvas} />\n\n        <NavigationBar run={this.runSim} \n        ref={this.navbar}\n        canvas={this.canvas}\n        className=\"navbar\"\n        runspectroscopy={this.runSpectroscopy}\n        createbutton={this.createDetector} \n        creategunbutton={this.createGun} \n        createsourcebutton={this.createSource} \n        setshowtracks={this.setShowTracks}\n        setshowparticles={this.setShowParticles}\n        setshowaxes={this.setShowAxes}\n        setshowgrid={this.setShowGrid}\n        clearrun={this.clearRun}\n        clearSetup={this.clearSetup}\n        detectors={this.detectors}\n        buttons={this.state.buttons}></NavigationBar>\n        <div className='buttonbackground'>\n        </div>\n        <Accordion ref={this.accordion} defaultActiveKey=\"0\" className='accordion' style={{\"maxHeight\": window.innerHeight-50, \"height\": window.innerHeight-50,\"overflow-y\":\"scroll\"}}>\n        <div style={{color: 'white', 'text-align':'center', 'background-color' : 'gray', 'border' : '1px solid white'}}>\n          Volumes\n          </div>\n          {volumeButtons}\n          <div style={{color: 'white', 'text-align':'center', 'background-color' : 'gray', 'border' : '1px solid white'}}>\n          Detectors\n          </div>\n          {items}\n          <div style={{color: 'white', 'text-align':'center', 'background-color' : 'gray', 'border' : '1px solid white'}}>\n          Sources\n          </div>\n          {sourceButtons}\n          <div style={{color: 'white', 'text-align':'center', 'background-color' : 'gray', 'border' : '1px solid white'}}>\n          Guns\n          </div>\n          {gunButtons}\n        </Accordion>\n        </Tab.Pane>\n        <Tab.Pane eventKey=\"second\">\n          <Spectrum ref={this.spectrum}></Spectrum>\n        </Tab.Pane>\n      </Tab.Content>\n</Tab.Container>\n\n    \n  </div>\n    \n  }\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}