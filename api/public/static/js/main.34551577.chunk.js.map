{"version":3,"sources":["images/editicon.png","rendering/shader.js","utils/maths.js","shaders/gridshader.js","shaders/instanceshader.js","rendering/InstanceRenderer.js","rendering/grid.js","shaders/mainshader.js","rendering/model.js","entities/cube.js","utils/mousePicker.js","rendering/renderSystem.js","detector/Detektor.js","gun/ParticleGun.js","gun/gun.js","source/ParticleSource.js","shaders/spectrumshader.js","graphics/ColorSpectrum.js","shaders/axisShader.js","rendering/axisRenderer.js","utils/STLParser.js","volume/VolumeList.js","graphics/Canvas.js","utils/Reqs.js","detector/MaterialList.js","graphics/ConfirmDialog.js","utils/UnitConverter.js","utils/Error.js","utils/Parser.js","graphics/MaterialTable.js","utils/Logger.js","detector/DetectorEditDialog.js","detector/DetectorButton.js","detector/DetectorDialog.js","gun/GunEditDialog.js","gun/GunButton.js","gun/GunDialog.js","graphics/SourceTable.js","source/SourceEditDialog.js","source/SourceButton.js","source/SourceDialog.js","utils/User.js","graphics/RunDialog.js","graphics/SpectrumDialog.js","volume/VolumeDialog.js","graphics/NavigationBar.js","entities/Particle.js","graphics/spectrum.js","graphics/CodeEditor.js","graphics/ModelCanvas.js","volume/VolumeEditDialog.js","volume/VolumeButton.js","graphics/PopupDialog.js","volume/VolumeSelectDialog.js","graphics/NumberSpinner.js","graphics/GraphDialog.js","utils/SaveLoad.js","graphics/ErrorDialog.js","graphics/SaveOnlineDialog.js","utils/WindowParameters.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Shader","attribs","path","gl","this","vertexShaderText","vertexShader","fragmentShaderText","fragmentShader","createShader","VERTEX_SHADER","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","program","createProgram","attachShader","i","length","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","validateProgram","VALIDATE_STATUS","console","error","getProgramInfoLog","getShaderInfoLog","useProgram","name","value","location","getUniformLocation","uniform1f","uniform1i","x","y","z","uniform3f","uniformMatrix4fv","Matrix","Float64Array","Vector4","w","Vector3","Camera","d","p","a","Maths","mat","v","res","result","l","Math","sqrt","r","eye","center","up","forward","upt","normalize","side","cross","m","invert","inv","det","angle","c","cos","s","sin","axis","temp","R","n","j","k","u","rx","ry","rz","sx","sy","sz","translate","rotate","scale","camera","view","lookAt","FOV","NEAR_PLANE","FAR_PLANE","width","height","aspectRatio","y_scale","tan","x_scale","frustum_length","projectionMatrix","left","right","bottom","top","zNear","zFar","PI","GridShader","InstancedShader","InstanceRenderer","vertices","vao","createVertexArray","bindVertexArray","index","vbo","createVBO","color_vbo","shader","InstanceShader","storeData","maxenergy","disableVertexAttribArray","addIntanceAttrib","drawLines","particles","projection","vboData","colorData","colorIndex","bind","enableVertexAttribArray","storeMatrixData","createTransformationMatrix","position","storeVectorData","color","updateVBO","drawArraysInstanced","LINES","TRIANGLES","setUniform4fv","setUniform3f","setUniform","unBind","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STREAM_DRAW","attribnumber","coordinateSize","data","STATIC_DRAW","vertexAttribPointer","FLOAT","FALSE","attribute","datasize","datalength","offset","vertexAttribDivisor","bufferSubData","GridRenderer","vertical","horizontal","verticalRenderer","horizontalRenderer","Line","lines","push","hint","f","render","createViewMatrix","MainShader","Model","normals","outline","rotation","nvbo","drawArrays","LINE_STRIP","Cube","Ray","o","origin","direction","MousePicker","detectors","sources","guns","ray","Infinity","model","checkModel","id","atan2","transformation","v0","v1","v2","mulMatV","triangleHit","xyz","e0","sub","e1","dot","inv_det","t","q","cam","invview","invproj","RenderSystem","models","addModel","drawTracks","drawParticles","drawAxes","detector","splice","gun","source","particle","object","fake","tmat","setUniform1i","draw","down","move","enable","DEPTH_TEST","CULL_FACE","cullFace","BACK","cameraRay","hover_id","check","drawObject","disable","FRONT","active_id","Detector","material","active","deposit","hits","geometry","numberOfHits","units","list","sort","b","hit","no","abs","ParticleGun","energy","GunMesh","ParticleSource","SpectrumShader","ColorSpectrum","AxisShader","AxisRenderer","allaxis","labels","xaxis","yaxis","zaxis","xlabel","ylabel","zlabel","mul","bmat","toRad","STLParrser","bytes","numberoftriangles","String","fromCharCode","writeInt","writeFloat","fa","ba","Uint8Array","buffer","readFloat","chars","charCodeAt","size","Int32Array","readInt","ModelData","VolumeList","codeeditor","editor","volumes","checkVolumeName","alert","newname","newdata","getVolume","forEach","e","undefined","renameGeometry","Canvas","props","state","colorMinHint","colorMaxHint","canvas","createRef","oldX","oldY","keyDown","rightclick","renderer","instanceRenderer","axisRenderer","drawGrid","detector_buttons","source_buttons","gun_buttons","updateHint","updateColorHint","ms","setState","clearTracks","current","oncontextmenu","selected","accordion","click","log","preventDefault","stopPropagation","getContext","gridRenderer","guiRenderer","requestAnimationFrame","clearColor","clear","COLOR_BUFFER_BIT","createProjectionMatrix","offsetWidth","offsetHeight","getMouseYd","getMouseXd","addSource","addDetector","type","parameterize","str","modeldata","STLParser","parseData","dx","dy","dz","gun_model","addGun","clearSetup","removeSource","removeDetector","removeGun","ref","style","onMouseMove","pageX","pageY","tabIndex","onKeyDown","keyCode","onKeyUp","onMouseDown","onMouseUp","onWheel","delta","deltaY","className","onClick","Component","Requests","url","get","route","auth","fetch","headers","method","response","post","parameters","body","JSON","stringify","MaterialList","materials","symbol","json","parseInt","compoundresult","compoundjson","compounds","sourceResult","sourceJson","DetectorDialog","showDialog","hideDialog","show","Modal","onHide","Header","closeButton","Title","title","Body","content","Footer","Button","variant","fun","UnitConverter","Error","dialog","message","setTitle","setContent","Parser","f0","f1","showVolumeDialog","confirmDialog","trim","split","posu","rotu","scaleu","convertLength","convertAngle","chunks","code","energyu","convertEnergy","me","isNaN","parseFloat","text","createDetector","createSource","createGun","blocks","failed_detectors","words","replace","detector_geometry","measurement","substring","indexOf","includes","substr","params","checkFloat","showError","checkString","checkMaterial","checkSource","MaterialTable","table","element","compound","changeTable","updateMaterials","filter","toUpperCase","tmp_mats","rows","ceil","tmp","updatematerial","floor","FormControl","onChange","target","placeholder","Row","disabled","Container","Logger","lvl","msg","level","DetectorEditDialog","React","updateMaterial","updateGeometry","detname","detposx","detposy","detposz","detrotx","detroty","detrotz","detscalex","detscaley","detscalez","detmat","geomrty","posme","rotme","scaleme","display","filelabel","options","hex","bigint","g","opt","map","ConfirmDialog","removebutton","button","Form","Col","Control","required","maxLength","event","as","evt","File","label","data-browse","custom","FileReader","onload","readAsBinaryString","files","Group","controlId","Label","onInput","hexToRgb","backgroundColor","modelData","createvolume","setname","pm","rm","sm","buttonid","updateText","updatedetails","DetectorButton","editdialog","updateDetails","setName","punit","runit","sunit","buttons","details","Card","Accordion","Toggle","eventKey","Collapse","getElement","detectorName","createbutton","GunEditDialog","detdirx","detdiry","detdirz","GunButton","GunDialog","SourceTable","SourceEditDialog","SourceButton","SourceDialog","User","password","then","logged_in","process_id","RunDialog","numberOfParticles","loading","progress","setLoading","startProgress","clearInterval","setInterval","margin","ProgressBar","now","runsim","onSubmit","SpectrumDialog","numberofparticles","binsize","VolumeDialog","NavigationBar","gundialog","sourcedialog","rundialog","spectrumdialog","volumedialog","showRun","showTracks","showParticles","showAxes","showGrid","showrun","showclearsetup","showclearparticles","login","window","sessionStorage","getItem","projectname","showClearSetup","creategunbutton","createsourcebutton","run","runspectroscopy","Navbar","bg","Brand","clearrun","showClearParticles","Nav","Dropdown","border","Menu","Item","save","load","updateproject","saveonline","OverlayTrigger","overlay","Tooltip","Check","checked","setshowtracks","setshowparticles","setshowaxes","setshowgrid","removeItem","Particle","track_id","parent_id","totalEnergy","energyDeposit","definition","Spectrum","chart","Chart","datasets","borderColor","responsive","plugins","zoom","pan","enabled","mode","contains","numberofenergies","getIndex","energies","bin","max","maximum","add","addData","update","destroy","ctx","scales","yAxes","scaleLabel","fontSize","fontColor","labelString","xAxes","dataset","CodeEditor","fileinput","onclickfunction","parse","addDetectorCode","pop","removeChunk","theme","ModelCanvas","updateCanvas","onShow","VolumeEditDialog","updateVolume","volume","VolumeButton","arg","VolumeSelectDialog","addVolume","removeVolume","fixed","showConfirm","vs","fs","GraphDialog","graph","nodes","edges","from","to","layout","hierarchical","events","select","getNetwork","network","JSZip","require","SaveLoad","zip","file","folder","binary","generateAsync","pdata","loadAsync","base64","contents","Object","keys","async","user","saveAs","WindowParams","parameter","windowUrl","search","URLSearchParams","App","spectrum","navbar","popup","volumeselect","graphdialog","loadfile","errordialog","confirmdialog","gunbuttons","sourcebuttons","volumebuttons","page","volumebuttonheight","createVolume","runSim","runSpectroscopy","setShowParticles","setShowTracks","setShowAxes","setShowGrid","clearRun","saveOnline","showSaveDialog","updateProject","tracks","number_of_particles","message_data","number_of_detectors","number_of_sources","number_of_guns","sendGamma","hidedialog","send","processGammaSpectrum","processResponse","floats","track_data","numberOfSteps","t_norm","tm","tmp_particles","slice","get_max","min","get_min","addParticle","ind","bs","vol","checkRunnable","addSourceCode","key","px","py","pz","addGunCode","paramterize","removeAll","init","setProjectName","loadonline","removeVolumes","items","item","gunButtons","sourceButtons","volumeButtons","ErrorDialog","PopupDialog","SaveOnlineDialog","Tab","defaultActiveKey","activeKey","Link","Content","Pane","projectName","innerHeight","Boolean","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.34551577.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","class Shader {\r\n    constructor(attribs,path ,gl){\r\n        this.gl = gl;\r\n        var vertexShaderText = path.vertexShader;\r\n        var fragmentShaderText = path.fragmentShader;\r\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n    \r\n        gl.shaderSource(vertexShader, vertexShaderText);\r\n        gl.shaderSource(fragmentShader, fragmentShaderText);\r\n    \r\n        gl.compileShader(vertexShader);\r\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling vertex shader!', gl.getShaderInfoLog(vertexShader));\r\n            return;\r\n        }\r\n    \r\n        gl.compileShader(fragmentShader);\r\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling fragment shader!', gl.getShaderInfoLog(fragmentShader));\r\n            return;\r\n        }\r\n    \r\n        this.program = gl.createProgram();\r\n        gl.attachShader(this.program, vertexShader);\r\n        gl.attachShader(this.program, fragmentShader);\r\n\r\n        for(var i = 0;i<attribs.length;i++){\r\n            gl.bindAttribLocation(this.program, attribs[i][0], attribs[i][1]);\r\n        }\r\n\r\n        gl.linkProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\r\n            console.error('ERROR linking program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        gl.validateProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.VALIDATE_STATUS)) {\r\n            console.error('ERROR validating program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        /*var positionAttribLocation = gl.getAttribLocation(this.program, 'vertPosition');\r\n        var normalAttribLocation = gl.getAttribLocation(this.program, 'normal');*/\r\n        \r\n        \r\n\r\n        /*for(var i = 0;i<attribs.length;i++){\r\n            gl.vertexAttribPointer(positionAttribLocation, attribs[i], gl.FLOAT,gl.FALSE,0,0);\r\n        }*/\r\n        \r\n        /*gl.vertexAttribPointer(\r\n            normalAttribLocation, 3, gl.FLOAT, gl.FALSE,\r\n            0,\r\n            0 \r\n        );*/\r\n        \r\n    }\r\n    bind(){\r\n        this.gl.useProgram(this.program);\r\n    }\r\n    unBind(){\r\n        this.gl.useProgram(null);\r\n    }\r\n    setUniform(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1f(location,value);\r\n        }\r\n    }\r\n    setUniform1i(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1i(location,value);\r\n        }\r\n    }\r\n    setUniform3f(name,x,y,z){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform3f(location,x,y,z);\r\n        }\r\n    }\r\n    setUniform4fv(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniformMatrix4fv(location,false,value);\r\n        }\r\n        \r\n    }\r\n}\r\nexport default Shader;","class Matrix extends Float64Array {\r\n    constructor() {\r\n        super(16);\r\n        this[0] = 1.0;\r\n        this[5] = 1.0;\r\n        this[10] = 1.0;\r\n        this[15] = 1.0;\r\n    }\r\n}\r\nclass Vector4 {\r\n    constructor(x, y, z, w) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n    xyz(){\r\n        return new Vector3(this.x, this.y, this.z);\r\n    }\r\n}\r\nclass Vector3 {\r\n    constructor(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n\r\n}\r\nclass Camera {\r\n    constructor(x, y, d, p, a) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.d = d;\r\n        this.p = p;\r\n        this.a = a;\r\n    }\r\n\r\n}\r\nclass Maths {\r\n    static scale(mat, v) {\r\n        var res = new Matrix();\r\n        for(var i = 0;i<16;i++){\r\n            res[i] = mat[i];\r\n        }\r\n        res[0] = res[0] * v.x;\r\n        res[1] = res[1] * v.x;\r\n        res[2] = res[2] * v.x;\r\n\r\n        res[4] = res[4] * v.y;\r\n        res[5] = res[5] * v.y;\r\n        res[6] = res[6] * v.y;\r\n\r\n        res[8] = res[8] * v.z;\r\n        res[9] = res[9] * v.z;\r\n        res[10] = res[10] * v.z;\r\n\r\n        return res;\r\n\r\n    }\r\n    static translate(mat, v) {\r\n        var res = new Matrix();\r\n        for(var i = 0;i<16;i++){\r\n            res[i] = mat[i];\r\n        }\r\n        res[12] = mat[0] * v.x + mat[4] * v.y + mat[8] * v.z + mat[12];\r\n        res[13] = mat[1] * v.x + mat[5] * v.y + mat[9] * v.z + mat[13];\r\n        res[14] = mat[2] * v.x + mat[6] * v.y + mat[10] * v.z + mat[14];\r\n        res[15] = mat[3] * v.x + mat[7] * v.y + mat[11] * v.z + mat[15];\r\n\r\n        return res;\r\n    }\r\n    static normalize(v) {\r\n        var result = new Vector3();\r\n        result.x = v.x;\r\n        result.y = v.y;\r\n        result.z = v.z;\r\n        \r\n        var l = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\r\n        result.x /= l;\r\n        result.y /= l;\r\n        result.z /= l;\r\n        \r\n        return result;\r\n    }\r\n    static mulVectorDouble(v, d) {\r\n        var res = new Vector3(0,0,0);\r\n        res.x = v.x;\r\n        res.y = v.y;\r\n        res.z = v.z;\r\n        \r\n        res.x *= d;\r\n        res.y *= d;\r\n        res.z *= d;\r\n\r\n        return res;\r\n    }\r\n    static cross(v, p) {\r\n        var r = new Vector3(0,0,0);\r\n\r\n        r.x = v.y * p.z - v.z * p.y;\r\n        r.y = v.z * p.x - v.x * p.z;\r\n        r.z = v.x * p.y - v.y * p.x;\r\n\r\n        return r;\r\n    }\r\n    static lookAt(eye, center, up) {\r\n        var forward = new Vector3(0,0,0);\r\n        var upt = new Vector3(0,0,0);\r\n\r\n        forward.x = center.x - eye.x;\r\n        forward.y = center.y - eye.y;\r\n        forward.z = center.z - eye.z;\r\n        \r\n        forward = this.normalize(forward);\r\n\r\n        var side = new Vector3(0,0,0);\r\n        side = this.cross(forward, up);\r\n  \r\n        side = this.normalize(side);\r\n\r\n        upt = this.cross(side, forward);\r\n        \r\n        var m = new Matrix();\r\n        m[0] = side.x;\r\n        m[1] = side.y;\r\n        m[2] = side.z;\r\n        m[4] = upt.x;\r\n        m[5] = upt.y;\r\n        m[6] = upt.z;\r\n        m[8] = -forward.x;\r\n        m[9] = -forward.y;\r\n        m[10] = -forward.z;\r\n        \r\n        m = this.invert(m);\r\n\r\n        return m;\r\n    }\r\n    static invert(m) {\r\n        var result = new Matrix();\r\n        var inv = new Matrix();\r\n        \r\n        var det = 0.0;\r\n        inv[0] = m[5] * m[10] * m[15] -\r\n            m[5] * m[11] * m[14] -\r\n            m[9] * m[6] * m[15] +\r\n            m[9] * m[7] * m[14] +\r\n            m[13] * m[6] * m[11] -\r\n            m[13] * m[7] * m[10];\r\n\r\n        inv[4] = -m[4] * m[10] * m[15] +\r\n            m[4] * m[11] * m[14] +\r\n            m[8] * m[6] * m[15] -\r\n            m[8] * m[7] * m[14] -\r\n            m[12] * m[6] * m[11] +\r\n            m[12] * m[7] * m[10];\r\n\r\n        inv[8] = m[4] * m[9] * m[15] -\r\n            m[4] * m[11] * m[13] -\r\n            m[8] * m[5] * m[15] +\r\n            m[8] * m[7] * m[13] +\r\n            m[12] * m[5] * m[11] -\r\n            m[12] * m[7] * m[9];\r\n\r\n        inv[12] = -m[4] * m[9] * m[14] +\r\n            m[4] * m[10] * m[13] +\r\n            m[8] * m[5] * m[14] -\r\n            m[8] * m[6] * m[13] -\r\n            m[12] * m[5] * m[10] +\r\n            m[12] * m[6] * m[9];\r\n\r\n        inv[1] = -m[1] * m[10] * m[15] +\r\n            m[1] * m[11] * m[14] +\r\n            m[9] * m[2] * m[15] -\r\n            m[9] * m[3] * m[14] -\r\n            m[13] * m[2] * m[11] +\r\n            m[13] * m[3] * m[10];\r\n\r\n        inv[5] = m[0] * m[10] * m[15] -\r\n            m[0] * m[11] * m[14] -\r\n            m[8] * m[2] * m[15] +\r\n            m[8] * m[3] * m[14] +\r\n            m[12] * m[2] * m[11] -\r\n            m[12] * m[3] * m[10];\r\n\r\n        inv[9] = -m[0] * m[9] * m[15] +\r\n            m[0] * m[11] * m[13] +\r\n            m[8] * m[1] * m[15] -\r\n            m[8] * m[3] * m[13] -\r\n            m[12] * m[1] * m[11] +\r\n            m[12] * m[3] * m[9];\r\n\r\n        inv[13] = m[0] * m[9] * m[14] -\r\n            m[0] * m[10] * m[13] -\r\n            m[8] * m[1] * m[14] +\r\n            m[8] * m[2] * m[13] +\r\n            m[12] * m[1] * m[10] -\r\n            m[12] * m[2] * m[9];\r\n\r\n        inv[2] = m[1] * m[6] * m[15] -\r\n            m[1] * m[7] * m[14] -\r\n            m[5] * m[2] * m[15] +\r\n            m[5] * m[3] * m[14] +\r\n            m[13] * m[2] * m[7] -\r\n            m[13] * m[3] * m[6];\r\n\r\n        inv[6] = -m[0] * m[6] * m[15] +\r\n            m[0] * m[7] * m[14] +\r\n            m[4] * m[2] * m[15] -\r\n            m[4] * m[3] * m[14] -\r\n            m[12] * m[2] * m[7] +\r\n            m[12] * m[3] * m[6];\r\n\r\n        inv[10] = m[0] * m[5] * m[15] -\r\n            m[0] * m[7] * m[13] -\r\n            m[4] * m[1] * m[15] +\r\n            m[4] * m[3] * m[13] +\r\n            m[12] * m[1] * m[7] -\r\n            m[12] * m[3] * m[5];\r\n\r\n        inv[14] = -m[0] * m[5] * m[14] +\r\n            m[0] * m[6] * m[13] +\r\n            m[4] * m[1] * m[14] -\r\n            m[4] * m[2] * m[13] -\r\n            m[12] * m[1] * m[6] +\r\n            m[12] * m[2] * m[5];\r\n\r\n        inv[3] = -m[1] * m[6] * m[11] +\r\n            m[1] * m[7] * m[10] +\r\n            m[5] * m[2] * m[11] -\r\n            m[5] * m[3] * m[10] -\r\n            m[9] * m[2] * m[7] +\r\n            m[9] * m[3] * m[6];\r\n\r\n        inv[7] = m[0] * m[6] * m[11] -\r\n            m[0] * m[7] * m[10] -\r\n            m[4] * m[2] * m[11] +\r\n            m[4] * m[3] * m[10] +\r\n            m[8] * m[2] * m[7] -\r\n            m[8] * m[3] * m[6];\r\n\r\n        inv[11] = -m[0] * m[5] * m[11] +\r\n            m[0] * m[7] * m[9] +\r\n            m[4] * m[1] * m[11] -\r\n            m[4] * m[3] * m[9] -\r\n            m[8] * m[1] * m[7] +\r\n            m[8] * m[3] * m[5];\r\n\r\n        inv[15] = m[0] * m[5] * m[10] -\r\n            m[0] * m[6] * m[9] -\r\n            m[4] * m[1] * m[10] +\r\n            m[4] * m[2] * m[9] +\r\n            m[8] * m[1] * m[6] -\r\n            m[8] * m[2] * m[5];\r\n\r\n        det = m[0] * inv[0] + m[1] * inv[4] + m[2] * inv[8] + m[3] * inv[12];\r\n        det = 1.0 / det;\r\n        \r\n        for (var i = 0; i < 16; i++)\r\n            result[i] = inv[i] * det;\r\n\r\n        return result;\r\n    }\r\n    \r\n    static rotate(mat, angle, v) {\r\n        var result = new Matrix();\r\n        var a = angle;\r\n        var c = Math.cos(a);\r\n        var s = Math.sin(a);\r\n\r\n        var axis = new Vector3(0,0,0);\r\n        axis.x = v.x;\r\n        axis.y = v.y;\r\n        axis.z = v.z;\r\n        var temp = new Vector3(axis.x * (1.0 - c),axis.y * (1.0 - c),axis.z * (1.0 - c));\r\n       \r\n        result[0] = c + temp.x * axis.x;\r\n        result[1] = temp.x * axis.y + s * axis.z;\r\n        result[2] = temp.x * axis.z - s * axis.y;\r\n\r\n        result[4] = temp.y * axis.x - s * axis.z;\r\n        result[5] = c + temp.y * axis.y;\r\n        result[6] = temp.y * axis.z + s * axis.x;\r\n\r\n        result[8] = temp.z * axis.x + s * axis.y;\r\n        result[9] = temp.z * axis.y - s * axis.x;\r\n        result[10] = c + temp.z * axis.z;\r\n\r\n        var R = new Matrix();\r\n        for(var i = 0;i<16;i++){\r\n            R[i] = mat[i];\r\n        }\r\n        R[0] = mat[0] * result[0] + mat[4] * result[1] + mat[8] * result[2];\r\n        R[1] = mat[1] * result[0] + mat[5] * result[1] + mat[9] * result[2];\r\n        R[2] = mat[2] * result[0] + mat[6] * result[1] + mat[10] * result[2];\r\n\r\n        R[4] = mat[0] * result[4] + mat[4] * result[5] + mat[8] * result[6];\r\n        R[5] = mat[1] * result[4] + mat[5] * result[5] + mat[9] * result[6];\r\n        R[6] = mat[2] * result[4] + mat[6] * result[5] + mat[10] * result[6];\r\n        \r\n        R[8] = mat[0] * result[8] + mat[4] * result[9] + mat[8] * result[10];\r\n        R[9] = mat[1] * result[8] + mat[5] * result[9] + mat[9] * result[10];\r\n        R[10] = mat[2] * result[8] + mat[6] * result[9] + mat[10] * result[10];\r\n        \r\n        R[12] = mat[12];\r\n        R[13] = mat[13];\r\n        R[14] = mat[14];\r\n        return R;\r\n    }\r\n    static mul(m,n){\r\n        var res = new Matrix();\r\n\r\n        for (var i = 0; i < 4; i++) {\r\n            for (var j = 0; j < 4; j++) {\r\n                res[i*4+j] = 0;\r\n                for (var k = 0; k < 4; k++) {\r\n                    res[i*4+j] += n[i*4+k] * m[k*4+j];\r\n                }\r\n            }\r\n        }\r\n\r\n\t    return res;\r\n    }\r\n    static mulMatV(m, v){\r\n        var res = new Vector4(0,0,0,0);\r\n\r\n        res.x = m[0] * v.x + m[4] * v.y + m[8] * v.z + m[12] * v.w;\r\n        res.y = m[1] * v.x + m[5] * v.y + m[9] * v.z + m[13] * v.w;\r\n        res.z = m[2] * v.x + m[6] * v.y + m[10] * v.z + m[14] * v.w;\r\n        res.w = m[3] * v.x + m[7] * v.y + m[11] * v.z + m[15] * v.w;\r\n\r\n        return res;\r\n    }\r\n    static dot(u, v){\r\n        return u.x*v.x + u.y*v.y + u.z*v.z;\r\n    }\r\n    static sub(u, v){\r\n        var res = new Vector3();\r\n        res.x = u.x - v.x;\r\n        res.y = u.y - v.y;\r\n        res.z = u.z - v.z;\r\n\r\n        return res;\r\n    }\r\n    static createTransformationMatrix(x, y, z, rx, ry, rz, sx, sy, sz) {\r\n        var res = new Matrix();\r\n        res = Maths.translate(res, new Vector3(x, y, z));\r\n        \r\n        res = Maths.rotate(res, rx, new Vector3(1, 0, 0));\r\n        res = Maths.rotate(res, ry, new Vector3(0, 1, 0));\r\n        res = Maths.rotate(res, rz, new Vector3(0, 0, 1));\r\n\r\n        res = Maths.scale(res, new Vector3(sx, sy, sz));\r\n\r\n        return res;\r\n    }\r\n    static createViewMatrix(camera) {\r\n        var view = new Matrix();\r\n        \r\n        view = this.lookAt(camera.p, camera.a, new Vector3(0, 1 ,0));\r\n        view = this.translate(view, new Vector3(-camera.p.x, -camera.p.y, -camera.p.z));\r\n\r\n        return view;\r\n    }\r\n    static createBillBoardMatrix(camera){\r\n        var view = new Matrix();\r\n        \r\n        view = this.lookAt(camera.p, camera.a, new Vector3(0, 1 ,0));\r\n        view = this.translate(view, new Vector3(-camera.p.x, -camera.p.y, -camera.p.z));\r\n\r\n        return view;\r\n    }\r\n    static createProjectionMatrix(FOV, NEAR_PLANE, FAR_PLANE, width, height) {\r\n        var aspectRatio = width / height;\r\n        var y_scale = ((1.0 / Math.tan(((FOV / 2.0) / 360.0) * 3.14)) * aspectRatio);\r\n        var x_scale = y_scale / aspectRatio;\r\n        var frustum_length = FAR_PLANE - NEAR_PLANE;\r\n\r\n        var projectionMatrix = new Matrix();\r\n        \r\n        projectionMatrix[0] = x_scale;\r\n        projectionMatrix[5] = y_scale;\r\n        projectionMatrix[10] = -((FAR_PLANE + NEAR_PLANE) / frustum_length);\r\n        projectionMatrix[11] = -1.0;\r\n        projectionMatrix[14] = -((2.0 * NEAR_PLANE * FAR_PLANE) / frustum_length);\r\n        projectionMatrix[15] = 0.0;\r\n\r\n        return projectionMatrix;\r\n    }\r\n    static ortho(left, right, bottom, top, zNear, zFar) {\r\n        var res = new Matrix();\r\n\r\n        res[0] = 2.0 / (right - left);\r\n        res[5] = 2.0 / (top - bottom);\r\n        res[10] = -2 / (zFar - zNear);\r\n        res[12] = -((right + left) / (right - left));\r\n        res[13] = -((top + bottom) / (top - bottom));\r\n        res[14] = -((zFar + zNear) / (zFar - zNear));\r\n\r\n        return res;\r\n    }\r\n    static distance(v, u){\r\n        return Math.sqrt(v.x*u.x+v.y*u.y+v.z*u.z);\r\n    }\r\n    static toRad(v){\r\n        return v * Math.PI / 180.0;\r\n    }\r\n}\r\n\r\nexport default Matrix;\r\nexport { Maths, Vector3,Vector4, Camera }","export class GridShader{\r\n   \r\n    static vertexShader = \"precision mediump float;\" + \r\n\r\n    \"attribute vec2 vertPosition;\"+\r\n    \r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 transformation;\"+\r\n    \"uniform mat4 view;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n        \r\n     \"vec4 pos =  projection * view * transformation * vec4(vertPosition, 0.0, 1.0);\"+\r\n      \"tex_coords = vertPosition * 0.5 + 0.5;\"+\r\n      \"tex_coords.y = 1.0-tex_coords.y;\"+\r\n      \"gl_Position = pos;\"+\r\n      \r\n      \r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n    \r\n    \"uniform sampler2D sampler;\"+\r\n    \r\n    \"uniform float width;\"+\r\n    \"uniform float height;\"+\r\n    \"uniform float distance;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \r\n    \"int mod(int a, int b)\"+\r\n    \"{\"+\r\n    \"\treturn a - b * int(a/b);\"+\r\n    \"}\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"vec4 color = vec4(1.0);\"+\r\n      \r\n      \r\n      \"gl_FragColor = color;\"+\r\n    \"}\";\r\n}\r\n\r\n","export class InstancedShader{\r\n   \r\n    static vertexShader = \"precision mediump float;\"+\r\n\r\n    \"attribute vec3 vertPosition;\"+\r\n    \"attribute vec3 normal;\"+\r\n    \"attribute mat4 transformation;\"+\r\n    \"attribute vec3 color;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \"varying vec3 out_color;\"+\r\n    \r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 view;\"+\r\n    \"uniform float camera;\"+\r\n    \"uniform float max;\"+\r\n    \"vec3 hsvtorgb(float h, float s, float v)\"+\r\n\"{\"+\r\n    \"float i = 0.0;\"+\r\n    \"float f = 0.0;\"+\r\n    \"float p = 0.0;\"+\r\n    \"float q = 0.0;\"+\r\n    \"float t = 0.0;\"+\r\n    \r\n    \"vec3 color;\"+\r\n    \"if(s==0.0){\"+\r\n      \"color.x = v;\"+\r\n      \"color.y = v;\"+\r\n      \"color.z = v;\"+\r\n      \"return color;\"+\r\n    \"}\"+\r\n    \"h /= 60.0;\"+\r\n    \"i = float(int(h));\"+\r\n    \"f = h - i;\"+\r\n    \"p = v * (1.0 - s);\"+\r\n    \"q = v * (1.0 - s*f);\"+\r\n    \"t = v * (1.0 - s * (1.0-f));\"+\r\n    \"if(i==0.0){\"+\r\n      \"color.x = v;\"+\r\n      \"color.y = t;\"+\r\n      \"color.z = p;\"+\r\n    \"}\"+\r\n    \"else if(i==1.0){\"+\r\n      \"color.x = q;\"+\r\n      \"color.y = v;\"+\r\n      \"color.z = p;\"+\r\n    \"}\"+\r\n    \"else if(i==2.0){\"+\r\n      \"color.x = p;\"+\r\n      \"color.y = v;\"+\r\n      \"color.z = t;\"+\r\n    \"}\"+\r\n    \"else if(i==3.0){\"+\r\n      \"color.x = p;\"+\r\n      \"color.y = q;\"+\r\n      \"color.z = v;\"+\r\n    \"}\"+\r\n    \"else if(i==4.0){\"+\r\n      \"color.x = t;\"+\r\n      \"color.y = p;\"+\r\n      \"color.z = v;\"+\r\n    \"}else{\"+\r\n      \"color.x = v;\"+\r\n      \"color.y = p;\"+\r\n      \"color.z = q;\"+\r\n    \"}\"+\r\n    \"return color;\"+\r\n\"}\"+\r\n\r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_Position = projection * view * transformation * vec4(vec3(vertPosition*camera*0.2), 1.0);\"+\r\n      \"out_color = hsvtorgb(180.0-(color.x/max)*180.0, 1.0,1.0);\"+\r\n      \"fragPos = vec3(transformation * vec4(vertPosition, 1.0));\"+\r\n      \"Normal = normal;\"+\r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n\r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \r\n    \"varying vec3 out_color;\"+\r\n    \r\n    \"uniform sampler2D sampler;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"vec3 norm = normalize(Normal);\"+\r\n      \"vec3 lightDir = normalize(vec3(100) - fragPos);\"+ \r\n      \"float diff = max(dot(norm, lightDir), 0.0); \"+\r\n      \"vec3 diffuse = diff * vec3(1); \"+\r\n      \"gl_FragColor = vec4(out_color,1.0);\"+\r\n     \"}\";\r\n}\r\n\r\n","import Matrix, { Maths } from \"../utils/maths.js\";\r\nimport {InstancedShader} from \"../shaders/instanceshader\";\r\n\r\nexport class InstanceRenderer {\r\n    constructor(vertices, gl){\r\n        this.vao = gl.createVertexArray();\r\n        gl.bindVertexArray(this.vao);\r\n        this.vertices = vertices;\r\n        this.index = 0;\r\n        this.vbo = this.createVBO(gl);\r\n        this.color_vbo = this.createVBO(gl);\r\n        this.shader = new InstanceShader(gl);\r\n        this.storeData(0, 3, vertices, gl);\r\n        this.maxenergy = 0.0;\r\n        gl.bindVertexArray(null);\r\n        gl.disableVertexAttribArray(0);\r\n\r\n        this.addIntanceAttrib(this.vao, this.vbo, 1, 4, 16, 0, gl);\r\n        this.addIntanceAttrib(this.vao, this.vbo, 2, 4, 16, 4, gl);\r\n        this.addIntanceAttrib(this.vao, this.vbo, 3, 4, 16, 8, gl);\r\n        this.addIntanceAttrib(this.vao, this.vbo, 4, 4, 16, 12, gl);\r\n        this.addIntanceAttrib(this.vao, this.color_vbo, 5, 3, 3, 0, gl);\r\n        \r\n        this.drawLines = false;\r\n    }  \r\n    render(particles,view, projection,d, gl){\r\n        let vboData = [];\r\n        let colorData = [];\r\n        this.index = 0;\r\n        this.colorIndex = 0;\r\n        this.shader.bind();\r\n        gl.bindVertexArray(this.vao);\r\n        gl.enableVertexAttribArray(0);\r\n        gl.enableVertexAttribArray(1);\r\n        gl.enableVertexAttribArray(2);\r\n        gl.enableVertexAttribArray(3);\r\n        gl.enableVertexAttribArray(4);\r\n        gl.enableVertexAttribArray(5);\r\n        \r\n        for(let i = 0;i<particles.length;i++){\r\n            this.storeMatrixData(Maths.createTransformationMatrix(particles[i].position.x,particles[i].position.y,particles[i].position.z,0,0,0,\r\n                particles[i].scale.x,particles[i].scale.y,particles[i].scale.z), vboData);\r\n            this.storeVectorData(particles[i].color, colorData);\r\n        }\r\n        this.updateVBO(this.vbo, vboData, gl);\r\n        this.updateVBO(this.color_vbo, colorData, gl);\r\n        if(this.drawLines){\r\n            gl.drawArraysInstanced(gl.LINES, 0, this.vertices.length / 2, particles.length);\r\n\r\n        }else{\r\n            gl.drawArraysInstanced(gl.TRIANGLES, 0, this.vertices.length / 3, particles.length);\r\n        }\r\n\r\n        this.shader.setUniform4fv(\"view\", view);\r\n        this.shader.setUniform4fv(\"projection\", projection);\r\n        this.shader.setUniform3f(\"color\", 1,1,1);\r\n        this.shader.setUniform(\"camera\", d);\r\n        this.shader.setUniform(\"max\", this.maxenergy);\r\n\r\n        gl.bindVertexArray(null);\r\n        gl.disableVertexAttribArray(0);\r\n        gl.disableVertexAttribArray(1);\r\n        gl.disableVertexAttribArray(2);\r\n        gl.disableVertexAttribArray(3);\r\n        gl.disableVertexAttribArray(4);\r\n        gl.disableVertexAttribArray(5);\r\n        \r\n        this.shader.unBind();\r\n    }\r\n    createVBO(gl){\r\n        let vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n        //maximum 5000 particles 16 byte per particle\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(5000*16), gl.STREAM_DRAW, 0);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n        return vbo;\r\n    }\r\n    storeVectorData(v, vboData){\r\n        vboData[this.colorIndex++] = v.x;\r\n        vboData[this.colorIndex++] = v.y;\r\n        vboData[this.colorIndex++] = v.z;\r\n        \r\n    }\r\n    storeMatrixData(mat, vboData){\r\n        /*for(let i = 0;i<4;i++){\r\n            vboData.push(mat[12-i*4]);\r\n            vboData.push(mat[13-i*4]);\r\n            vboData.push(mat[14-i*4]);\r\n            vboData.push(mat[15-i*4]);\r\n        }*/\r\n        for(let i = 0;i<16;i++){\r\n            vboData[this.index++] = mat[i];\r\n        }\r\n    }\r\n    storeData(attribnumber, coordinateSize, data, gl){\r\n        let vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER,vbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW, 0);\r\n        gl.vertexAttribPointer(attribnumber, coordinateSize, gl.FLOAT, gl.FALSE, 0, 0);\r\n    }\r\n    addIntanceAttrib(vao, vbo, attribute, datasize, datalength, offset, gl){\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\t    gl.bindVertexArray(vao);\r\n\t    gl.vertexAttribPointer(attribute, datasize, gl.FLOAT, false, datalength * 4, (offset * 4));\r\n\t    gl.vertexAttribDivisor(attribute, 1);\r\n\t    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\t    gl.bindVertexArray(null);\r\n    }\r\n    updateVBO(vbo, data, gl){\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\t    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STREAM_DRAW);\r\n\t    gl.bufferSubData(gl.ARRAY_BUFFER, 0, new Float32Array(data));\r\n\t    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n    }\r\n}\r\n\r\nexport class InstanceShader {\r\n    constructor(gl){\r\n        this.gl = gl;\r\n        var vertexShaderText = InstancedShader.vertexShader;\r\n        var fragmentShaderText = InstancedShader.fragmentShader;\r\n\r\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n    \r\n        gl.shaderSource(vertexShader, vertexShaderText);\r\n        gl.shaderSource(fragmentShader, fragmentShaderText);\r\n    \r\n        gl.compileShader(vertexShader);\r\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling vertex shader!', gl.getShaderInfoLog(vertexShader));\r\n            return;\r\n        }\r\n    \r\n        gl.compileShader(fragmentShader);\r\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling fragment shader!', gl.getShaderInfoLog(fragmentShader));\r\n            return;\r\n        }\r\n    \r\n        this.program = gl.createProgram();\r\n        gl.attachShader(this.program, vertexShader);\r\n        gl.attachShader(this.program, fragmentShader);\r\n\r\n\r\n        gl.bindAttribLocation(this.program, 0, \"vertPosition\");\r\n        gl.bindAttribLocation(this.program, 1, \"transformation\");\r\n        gl.bindAttribLocation(this.program, 5, \"color\");\r\n        \r\n\r\n        gl.linkProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\r\n            console.error('ERROR linking program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        gl.validateProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.VALIDATE_STATUS)) {\r\n            console.error('ERROR validating program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        \r\n    }\r\n    bind(){\r\n        this.gl.useProgram(this.program);\r\n    }\r\n    unBind(){\r\n        this.gl.useProgram(null);\r\n    }\r\n    setUniform(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1f(location,value);\r\n        }\r\n    }\r\n    setUniform1i(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1i(location,value);\r\n        }\r\n    }\r\n    setUniform3f(name,x,y,z){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform3f(location,x,y,z);\r\n        }\r\n    }\r\n    setUniform4fv(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniformMatrix4fv(location,false,value);\r\n        }\r\n        \r\n    }\r\n}","import Shader from \"./shader.js\";\r\nimport Matrix, {Maths, Vector3} from \"../utils/maths.js\";\r\nimport { Texture } from \"./texture.js\";\r\nimport { GridShader } from \"../shaders/gridshader.js\";\r\nimport {InstanceRenderer} from './InstanceRenderer';\r\n\r\nexport class GridRenderer {\r\n    constructor(gl){\r\n        this.gl = gl;\r\n        this.shader = new Shader([0, 'vertPosition'],GridShader, gl);\r\n        this.vertices = [ -1, 1, 1, 1, -1, -1,\r\n             1, -1, 1, 1, -1, -1];\r\n\r\n\r\n        this.vertical = [1,0,0,-1,0,0];\r\n        this.horizontal = [0,0,1,0,0,-1];\r\n            \r\n        this.vao = this.gl.createVertexArray();\r\n        this.gl.bindVertexArray(this.vao);\r\n        this.gl.enableVertexAttribArray(0);\r\n\r\n        this.vbo = gl.createBuffer();\r\n        this.gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\r\n        this.gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertical), gl.STATIC_DRAW, 0);\r\n        this.gl.vertexAttribPointer(0, 2, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n\r\n        this.gl.bindVertexArray(null);\r\n        this.gl.disableVertexAttribArray(0);\r\n\r\n        this.verticalRenderer = new InstanceRenderer(this.vertical, this.gl);\r\n        this.verticalRenderer.drawLines = true;\r\n        this.horizontalRenderer = new InstanceRenderer(this.horizontal, this.gl);\r\n        this.horizontalRenderer.drawLines = true;\r\n        \r\n        class Line {\r\n            constructor(x,y,z,sx,sy,sz){\r\n                this.position = new Vector3(x,y,z);\r\n                this.scale = new Vector3(sx,sy,sz);\r\n                this.color = new Vector3(1,1,1);\r\n            }\r\n        }\r\n        this.lines = [];\r\n\r\n        for(let i = -100;i<100;i++){\r\n            this.lines.push(new Line(0,0,i*100,10,1,1));\r\n        }\r\n        for(let i = -100;i<100;i++){\r\n            this.lines.push(new Line(i*100,0,0,1,1,10));\r\n        }\r\n    }\r\n    draw(projection, camera, width, height, d, hint){\r\n        let f = 100;\r\n        if(d > 1000) f = 5000;\r\n        if(d > 200 && d < 1000) f = 500;\r\n        if(d < 200 && d > 20) f = 100;\r\n        if(d < 20) f = 10;\r\n        hint(f / 100 + \" cm\");\r\n\r\n        for(let i = 0;i<200;i++){\r\n            this.lines[i].position.z = ((f*i) / 100) - f;\r\n            this.lines[i].scale.x = f / 200;\r\n        }\r\n        for(let i = 200;i<400;i++){\r\n            this.lines[i].position.x = ((f*(i-200)) / 100) - f;\r\n            this.lines[i].scale.z = f / 200;\r\n        }\r\n        this.verticalRenderer.render(this.lines, Maths.createViewMatrix(camera),projection, 1000, this.gl);\r\n        this.horizontalRenderer.render(this.lines, Maths.createViewMatrix(camera),projection, 1000, this.gl);\r\n    }\r\n} ","export class MainShader{\r\n   \r\n    /*\r\n    Vertex shader calculates the position of the vertices in 3d space,\r\n    transformation is the transformation of the rendered model\r\n    view is the camera matrix \r\n    */\r\n    static vertexShader = \"precision mediump float;\"+\r\n\r\n    \"attribute vec3 vertPosition;\"+\r\n    \"attribute vec3 normal;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 transformation;\"+\r\n    \"uniform mat4 view;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_Position = projection * view * transformation * vec4(vertPosition, 1.0);\"+\r\n      \"fragPos = vec3(transformation * vec4(vertPosition, 1.0));\"+\r\n      \"Normal = normal;\"+\r\n    \"}\";\r\n\r\n    /*\r\n    Fragment shader calculates color, lightning and texture\r\n    */\r\n    static fragmentShader = \"precision mediump float;\"+\r\n\r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \r\n    \"uniform vec3 color;\"+\r\n    \"uniform sampler2D sampler;\"+\r\n    \"uniform int fakeLightning;\"+\r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"vec3 norm = normalize(Normal);\"+\r\n      \"vec3 lightDir = vec3(1,0.5,0);\"+ \r\n      \"float diff = max(dot(norm, lightDir), 0.0); \"+\r\n      \"vec3 diffuse = diff * vec3(1); \"+\r\n      \"if(fakeLightning == 1) diffuse = vec3(.9);\"+\r\n      \"gl_FragColor = vec4((vec3(.1)+diffuse)*color,1.0);\"+\r\n     \"}\";\r\n}\r\n\r\n","import { Vector3 } from '../utils/maths.js';\r\n\r\nclass Model {\r\n\r\n    constructor(vertices,normals, gl) {\r\n\r\n        this.vertices = vertices;\r\n        this.normals = normals;\r\n        this.gl = gl;\r\n        this.color = new Vector3(.1,.1,.1);\r\n        this.drawLines = true;\r\n        \r\n        this.outline = true;\r\n\r\n        this.position = new Vector3(0,0,0);\r\n        this.rotation = new Vector3(0,0,0);\r\n        this.scale = new Vector3(1,1,1);\r\n        this.vao = gl.createVertexArray();\r\n        gl.bindVertexArray(this.vao);\r\n\r\n        this.vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW, 0);\r\n        gl.vertexAttribPointer(0, 3, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n        this.nvbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.nvbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.normals), gl.STATIC_DRAW, 0);\r\n        gl.vertexAttribPointer(1, 3, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n        gl.bindVertexArray(null);\r\n    }\r\n    draw() {\r\n        if(this.drawLines) this.gl.drawArrays(this.gl.LINE_STRIP, 0, this.vertices.length / 3);\r\n        else this.gl.drawArrays(this.gl.TRIANGLES, 0, this.vertices.length / 3);\r\n    }\r\n};\r\n\r\nexport default Model;","export class Cube {\r\n    static vertices = [0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,\r\n        0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,\r\n        0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,\r\n        -0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5];\r\n    static normals = \r\n         [0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,\r\n            -1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,\r\n            0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0];\r\n}","import {Maths, Vector3,Vector4} from './maths.js';\r\n\r\nclass Ray {\r\n    constructor(o, d){\r\n        this.origin = o;\r\n        this.direction = d;\r\n    }\r\n}\r\n\r\nclass MousePicker {\r\n    constructor(){\r\n    }\r\n    static d = Infinity;\r\n    static check(detectors,sources,guns, ray,camera){\r\n        this.d = Infinity;\r\n        var res = -1;\r\n        for(var i = 0;i<detectors.length;i++){\r\n            let mat = Maths.createTransformationMatrix(detectors[i].model.position.x, detectors[i].model.position.y, detectors[i].model.position.z,\r\n                detectors[i].model.rotation.x, detectors[i].model.rotation.y, detectors[i].model.rotation.z, detectors[i].model.scale.x,\r\n                 detectors[i].model.scale.y,\r\n                detectors[i].model.scale.z);\r\n            if(this.checkModel(ray, detectors[i].model.vertices, mat)){\r\n                res = detectors[i].id;\r\n            }\r\n        }\r\n        this.d = Infinity;\r\n        for(var i = 0;i<guns.length;i++){\r\n            let rotation = new Vector3(0,0,0);\r\n            rotation.x = Math.atan2(-guns[i].direction.y, guns[i].direction.z);\r\n            rotation.z = Math.atan2(guns[i].direction.x, -guns[i].direction.y);\r\n            rotation.y = Math.atan2(guns[i].direction.x, guns[i].direction.z);\r\n\r\n            let mat = Maths.createTransformationMatrix(guns[i].model.position.x, guns[i].model.position.y, guns[i].model.position.z,\r\n                rotation.x, rotation.y, rotation.z, camera.d*0.01,camera.d*0.01,camera.d*0.01);\r\n            \r\n                if(this.checkModel(ray, guns[i].model.vertices, mat)){\r\n                res = guns[i].id;\r\n            }\r\n        }\r\n        this.d = Infinity;\r\n        for(var i = 0;i<sources.length;i++){\r\n            let mat = Maths.createTransformationMatrix(sources[i].model.position.x, sources[i].model.position.y, sources[i].model.position.z,\r\n                sources[i].model.rotation.x, sources[i].model.rotation.y, sources[i].model.rotation.z, camera.d*0.004,camera.d*0.004,camera.d*0.004);\r\n            if(this.checkModel(ray, sources[i].model.vertices, mat)){\r\n                res = sources[i].id;\r\n            }\r\n        }\r\n\r\n        return res;\r\n    }\r\n    static checkModel(ray, vertices, transformation){\r\n        var res = false;\r\n        for(var i = 0;i<vertices.length;i+=9){\r\n            var v0, v1, v2;\r\n            v0 = Maths.mulMatV(transformation, new Vector4(vertices[i],vertices[i+1],vertices[i+2],1));\r\n            v1 = Maths.mulMatV(transformation, new Vector4(vertices[i+3],vertices[i+4],vertices[i+5],1));\r\n            v2 = Maths.mulMatV(transformation, new Vector4(vertices[i+6],vertices[i+7],vertices[i+8],1));\r\n            \r\n            if(this.triangleHit(ray, v0.xyz(), v1.xyz(), v2.xyz())){\r\n                res = true;\r\n            }\r\n\r\n        }\r\n        return res;\r\n    }\r\n    static triangleHit(ray, v0,v1,v2){\r\n        var e0 = Maths.sub(v1, v0);\r\n        var e1 = Maths.sub(v2, v0);\r\n\r\n        var p = Maths.cross(ray.direction, e1);\r\n        var det = Maths.dot(e0, p);\r\n        \r\n        if(det < 0.00001){\r\n            return false;\r\n        }\r\n        var inv_det = 1.0 / det;\r\n        var t = Maths.sub(ray.origin, v0);\r\n        var u = Maths.dot(t, p) * inv_det;\r\n\r\n        \r\n        if(u < 0.0 || u > 1.0){\r\n            return false;\r\n        }\r\n        var q = Maths.cross(t,e0);\r\n        var v = Maths.dot(ray.direction, q) * inv_det;\r\n        if(v < 0.0 || v + u > 1.0){\r\n            return false;\r\n        }\r\n        t = Maths.dot(e1,q) * inv_det;\r\n        if(t > 0 && t < this.d){\r\n            this.d = t;\r\n            return true;\r\n        } \r\n        return false;\r\n    }\r\n    static cameraRay(cam, projection, x, y){\r\n        var ray = new Ray();\r\n        var invview = Maths.invert(Maths.createViewMatrix(cam));\r\n        var origin = Maths.mulMatV(invview, new Vector4(0,0,0,1)).xyz();\r\n        var invproj = Maths.invert(projection);\r\n        var direction = Maths.mulMatV(invproj, new Vector4(x,y,0,1)).xyz();\r\n\r\n        direction = Maths.mulMatV(invview, new Vector4(direction.x,direction.y,direction.z,0.0)).xyz();\r\n        direction = Maths.normalize(direction);\r\n\r\n        ray.direction = direction;\r\n        ray.origin = origin;\r\n\r\n        return ray;\r\n    }\r\n}\r\n\r\nexport default MousePicker;","import Shader from './shader.js'\r\nimport {MainShader} from '../shaders/mainshader.js';\r\nimport {Maths, Vector3, Vector4} from '../utils/maths.js';\r\nimport Model from './model';\r\nimport {Cube} from '../entities/cube';\r\nimport MousePicker from '../utils/mousePicker';\r\n\r\n\r\n/*\r\nThis class handles the rendering of detectors, sources and guns\r\n*/\r\nclass RenderSystem {\r\n    constructor(gl){\r\n        this.shader = new Shader([[0,'vertPosition'],[1, 'normal']],MainShader,gl);\r\n        this.models = [];\r\n        this.sources = [];\r\n        this.detectors = [];\r\n        this.guns = [];\r\n        this.particles = [];\r\n        this.gl = gl;\r\n\r\n        this.addModel(new Model([1, 0, 0, -1, 0, 0], [1, 1, 1, 1, 1, 1], gl));\r\n        this.addModel(new Model([0, 1, 0, 0, -1, 0], [1, 1, 1, 1, 1, 1], gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], gl));\r\n        this.addModel(new Model([0, 0, 0, 0, 0, 0], [1, 1, 1, 1, 1, 1], gl));\r\n        //this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], gl));\r\n\r\n        this.models[0].color = new Vector3(1,0,0);\r\n        this.models[1].color = new Vector3(0,1,0);\r\n        this.models[2].color = new Vector3(0,0,1);\r\n        //this.models[3].color = new Vector3(0,0,1);\r\n        \r\n        \r\n        this.drawTracks = true;\r\n        this.drawParticles = true;\r\n        this.drawAxes = true;\r\n    }\r\n      static active_id = -1;\r\n      static hover_id = -1;\r\n\r\n    removeDetector(detector){\r\n        for(let i = 0;i<this.detectors.length;i++){\r\n            if(this.detectors[i] == detector){\r\n                this.detectors.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    removeGun(gun){\r\n        for(let i = 0;i<this.guns.length;i++){\r\n            if(this.guns[i] == gun){\r\n                this.guns.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    removeSource(source){\r\n        for(let i = 0;i<this.sources.length;i++){\r\n            if(this.sources[i] == source){\r\n                this.sources.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    addModel(model){\r\n        this.models.push(model);\r\n    }\r\n    addParticles(particle){\r\n        this.particles.push(particle);\r\n    }\r\n    addGun(gun){\r\n        this.guns.push(gun);\r\n    }\r\n    addSource(source){\r\n        this.sources.push(source);\r\n    }\r\n    addDetector(detector){\r\n        this.detectors.push(detector);\r\n    }\r\n    clearSetup(){\r\n        this.detectors = []\r\n        this.sources = []\r\n        this.guns = []\r\n    }\r\n    clearTracks(){\r\n        this.models = [];\r\n        this.addModel(new Model([1, 0, 0, -1, 0, 0], [1, 1, 1, 1, 1, 1], this.gl));\r\n        this.addModel(new Model([0, 1, 0, 0, -1, 0], [1, 1, 1, 1, 1, 1], this.gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], this.gl));\r\n        this.addModel(new Model([0, 0, 0, 0, 0, 0], [1, 1, 1, 1, 1, 1], this.gl));\r\n\r\n//        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], this.gl));\r\n\r\n        this.models[0].color = new Vector3(1,0,0);\r\n        this.models[1].color = new Vector3(0,1,0);\r\n        this.models[2].color = new Vector3(0,0,1);\r\n        //this.models[3].color = new Vector3(0,0,1);\r\n        //this is whack\r\n    }\r\n    drawObject(object,projection, camera,scale,color,fake,tmat){\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(object.model.vao);\r\n            let mat = Maths.createTransformationMatrix(object.model.position.x, object.model.position.y, object.model.position.z,\r\n                object.model.rotation.x, object.model.rotation.y, object.model.rotation.z, object.model.scale.x * scale,\r\n                object.model.scale.y * scale,\r\n                object.model.scale.z * scale);\r\n            if(tmat != null) mat = tmat;\r\n            this.shader.setUniform1i(\"fakeLightning\", fake);\r\n            this.shader.setUniform3f(\"color\", color.x, color.y, color.z);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            object.model.draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n    }\r\n    draw(projection, camera, x, y, down, move){\r\n        this.shader.bind();\r\n        this.gl.enable(this.gl.DEPTH_TEST);\r\n        this.gl.enable(this.gl.CULL_FACE);\r\n        this.gl.cullFace(this.gl.BACK);\r\n        var ray = MousePicker.cameraRay(camera, projection, x, y);  \r\n        RenderSystem.hover_id = MousePicker.check(this.detectors,this.sources,this.guns, ray, camera);\r\n        this.gl.enable(this.gl.DEPTH_TEST);\r\n        for(let i = 0;i<this.detectors.length;i++){\r\n            this.drawObject(this.detectors[i],projection, camera, 1, this.detectors[i].model.color,0);\r\n        }\r\n        for(let i = 0;i<this.guns.length;i++){\r\n            \r\n        }\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n\r\n        for(let i = 0;i<this.sources.length;i++){\r\n            \r\n        }\r\n        \r\n        \r\n        this.gl.enable(this.gl.CULL_FACE);\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        \r\n        for(let i = 0;i<this.detectors.length;i++){\r\n            this.gl.cullFace(this.gl.FRONT);\r\n            if(this.detectors[i].id == RenderSystem.active_id){\r\n                \r\n                this.drawObject(this.detectors[i],projection, camera, 1.01, new Vector3(1,.4,0),1);\r\n                \r\n                this.gl.cullFace(this.gl.BACK);\r\n\r\n                this.drawObject(this.detectors[i],projection, camera, 1, this.detectors[i].model.color,0);\r\n            }\r\n            if(this.detectors[i].id != RenderSystem.hover_id) continue;\r\n            if(this.detectors[i].id == RenderSystem.hover_id){\r\n                \r\n                this.drawObject(this.detectors[i],projection, camera, 1.01, new Vector3(1,1,0),1);\r\n                \r\n                this.gl.cullFace(this.gl.BACK);\r\n\r\n                this.drawObject(this.detectors[i],projection, camera, 1, this.detectors[i].model.color,0);\r\n            }\r\n            this.gl.enable(this.gl.DEPTH_TEST);\r\n        }\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        for (var i = 0; i < this.guns.length; i++) {\r\n            \r\n            \r\n            let rotation = new Vector3(0,0,0);\r\n            rotation.x = Math.atan2(-this.guns[i].direction.y, this.guns[i].direction.z);\r\n            rotation.z = Math.atan2(this.guns[i].direction.x, -this.guns[i].direction.y);\r\n            rotation.y = Math.atan2(this.guns[i].direction.x, this.guns[i].direction.z);\r\n\r\n            let mat = Maths.createTransformationMatrix(this.guns[i].model.position.x, this.guns[i].model.position.y, this.guns[i].model.position.z,\r\n                rotation.x, rotation.y, rotation.z, camera.d*0.01,camera.d*0.01,camera.d*0.01);\r\n            this.drawObject(this.guns[i], projection, camera, camera.d*0.01, this.guns[i].model.color, 0, mat);\r\n            if(this.guns[i].id == RenderSystem.active_id){\r\n                \r\n                mat = Maths.createTransformationMatrix(this.guns[i].model.position.x, this.guns[i].model.position.y, this.guns[i].model.position.z,\r\n                    rotation.x, rotation.y, rotation.z, camera.d*0.011,camera.d*0.011,camera.d*0.011);\r\n                this.drawObject(this.guns[i],projection, camera, this.guns[i].model.scale.x*1.01, new Vector3(1,.4,0),1,mat);\r\n                \r\n                this.gl.cullFace(this.gl.BACK);\r\n\r\n                mat = Maths.createTransformationMatrix(this.guns[i].model.position.x, this.guns[i].model.position.y, this.guns[i].model.position.z,\r\n                    rotation.x, rotation.y, rotation.z, camera.d*0.01,camera.d*0.01,camera.d*0.01);\r\n                this.drawObject(this.guns[i],projection, camera, this.guns[i].model.scale.x, this.guns[i].model.color,0,mat);\r\n            }\r\n            if(this.guns[i].id != RenderSystem.hover_id) continue;\r\n            if(this.guns[i].id == RenderSystem.hover_id){\r\n                mat = Maths.createTransformationMatrix(this.guns[i].model.position.x, this.guns[i].model.position.y, this.guns[i].model.position.z,\r\n                    rotation.x, rotation.y, rotation.z, camera.d*0.011,camera.d*0.011,camera.d*0.011);\r\n                this.drawObject(this.guns[i],projection, camera, camera.d*0.1, new Vector3(1,1,0),1,mat);\r\n                \r\n                this.gl.cullFace(this.gl.BACK);\r\n                mat = Maths.createTransformationMatrix(this.guns[i].model.position.x, this.guns[i].model.position.y, this.guns[i].model.position.z,\r\n                    rotation.x, rotation.y, rotation.z, camera.d*0.01,camera.d*0.01,camera.d*0.01);\r\n                this.drawObject(this.guns[i],projection, camera, camera.d*0.01, this.guns[i].model.color,0,mat);\r\n            }\r\n\r\n        }\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        \r\n        for (var i = 0; i < this.sources.length; i++) {\r\n            \r\n            //this.drawObject(this.sources[i], projection, camera, camera.d*0.004, this.sources[i].model.color, 0);\r\n            this.drawObject(this.sources[i], projection, camera, camera.d*0.004, this.sources[i].model.color, 0);\r\n            if(this.sources[i].id == RenderSystem.active_id){\r\n                this.drawObject(this.sources[i],projection, camera, camera.d*0.005, new Vector3(1,.4,0),1);\r\n                \r\n                this.gl.cullFace(this.gl.BACK);\r\n\r\n                this.drawObject(this.sources[i],projection, camera, camera.d*0.004, this.sources[i].model.color,0);\r\n            }\r\n            \r\n            if(this.sources[i].id != RenderSystem.hover_id) continue;\r\n            if(this.sources[i].id == RenderSystem.hover_id){\r\n                this.drawObject(this.sources[i], projection, camera, camera.d*0.005, new Vector3(1,1,0), 1);\r\n                \r\n                this.gl.cullFace(this.gl.BACK);\r\n                this.drawObject(this.sources[i], projection, camera, camera.d*0.004, this.sources[i].model.color, 0);\r\n                \r\n            }\r\n            this.gl.enable(this.gl.DEPTH_TEST);\r\n        }\r\n       \r\n\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        if(this.drawAxes){\r\n            for(let i = 0;i<4;i++){\r\n                this.gl.enableVertexAttribArray(0);\r\n                this.gl.enableVertexAttribArray(1);\r\n                this.gl.bindVertexArray(this.models[i].vao);\r\n                let mat = Maths.createTransformationMatrix(this.models[i].position.x, this.models[i].position.y, this.models[i].position.z,\r\n                    this.models[i].rotation.x, this.models[i].rotation.y, this.models[i].rotation.z,\r\n                    camera.d,\r\n                     camera.d,\r\n                    camera.d);\r\n                this.shader.setUniform3f(\"color\", this.models[i].color.x, this.models[i].color.y, this.models[i].color.z);\r\n                this.shader.setUniform1i(\"fakeLightning\", 1);\r\n                //this.shader.setUniform1i(\"sampler\", 0);\r\n                // this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n                // this.shader.setUniform4fv(\"projection\", projection);\r\n                this.shader.setUniform4fv(\"transformation\", mat);\r\n                this.models[i].draw();\r\n                this.gl.disableVertexAttribArray(0);\r\n                this.gl.disableVertexAttribArray(1);\r\n            }\r\n        }\r\n        \r\n        if(!this.drawTracks){\r\n            this.shader.unBind();\r\n            return;\r\n        }\r\n        \r\n        for(let i = 3;i<this.models.length;i++){\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(this.models[i].vao);\r\n            let mat = Maths.createTransformationMatrix(this.models[i].position.x, this.models[i].position.y, this.models[i].position.z,\r\n                this.models[i].rotation.x, this.models[i].rotation.y, this.models[i].rotation.z,\r\n                this.models[i].scale.x, this.models[i].scale.y, this.models[i].scale.z);\r\n            this.shader.setUniform3f(\"color\", this.models[i].color.x, this.models[i].color.y, this.models[i].color.z);\r\n            this.shader.setUniform1i(\"fakeLightning\", 1);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            this.models[i].draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n        }\r\n        this.shader.unBind();\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        \r\n    }\r\n}\r\nexport default RenderSystem;","/*\r\nClass reprezenting a detector \r\n*/\r\n\r\nclass Detector {\r\n    constructor(m) {\r\n        this.model = m;\r\n        this.material = 'Pb';\r\n        this.active = false;\r\n        this.deposit = 0;\r\n        this.name = \"\";\r\n        this.id = 0;\r\n        this.hits = [];\r\n        this.geometry = 'cube';\r\n        this.numberOfHits = [];\r\n        this.units = [1,1,1];\r\n    }\r\n    contains(f) {\r\n        for (var i = 0; i < this.hits.length; i++) {\r\n            if (f == this.hits[i]) return true;\r\n        }\r\n        return false;\r\n    }\r\n    clearDeposit(){\r\n        this.hits = [];\r\n        this.numberOfHits = [];\r\n    }\r\n    sort() {\r\n        var list = [];\r\n        for (var j = 0; j < this.hits.length; j++)\r\n            list.push({ 'hit': this.hits[j], 'no': this.numberOfHits[j] });\r\n\r\n        list.sort(function (a, b) {\r\n            return ((a.hit < b.hit) ? -1 : ((a.hit == b.hit) ? 0 : 1));\r\n        });\r\n        \r\n        for (var k = 0; k < list.length; k++) {\r\n            this.hits[k] = list[k].hit;\r\n            this.numberOfHits[k] = list[k].no;\r\n        }\r\n    }\r\n    getIndex(f) {\r\n        for (var i = 0; i < this.hits.length; i++) {\r\n            if (Math.abs(f-this.hits[i]) == 0) return i;\r\n        }\r\n        return -1;\r\n    }\r\n};\r\n\r\nexport default Detector;","export class ParticleGun {\r\n    constructor(model, position, direction, energy){\r\n        this.position = position;\r\n        this.direction = direction;\r\n        this.energy = energy;\r\n        this.model = model;\r\n        this.name = \"Particle Gun\";\r\n        this.units = [1,1];\r\n    }\r\n}","export class GunMesh {\r\n    constructor(){}\r\n    static vertices = [-1,-1,-1,0,0,1,0,0,1,-1,-1,-1,0,0,1,-1,1,-1,-1,1,-1,0,0,1,0,0,1,-1,1,-1,0,0,1,1,1,-1,1,1,-1,0,0,1,0,0,1,1,1,-1,0,0,1,1,-1,-1,1,-1,-1,0,0,1,0,0,1,1,-1,-1,0,0,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1];\r\n    static normals = [0,0,0,0,0,0,0,0,0,-0.8944271802902222,0,0.4472135901451111,-0.8944271802902222,0,0.4472135901451111,-0.8944271802902222,0,0.4472135901451111,0,0,0,0,0,0,0,0,0,0,0.8944271802902222,0.4472135901451111,0,0.8944271802902222,0.4472135901451111,0,0.8944271802902222,0.4472135901451111,0,0,0,0,0,0,0,0,0,0.8944271802902222,0,0.4472135901451111,0.8944271802902222,0,0.4472135901451111,0.8944271802902222,0,0.4472135901451111,0,0,0,0,0,0,0,0,0,0,-0.8944271802902222,0.4472135901451111,0,-0.8944271802902222,0.4472135901451111,0,-0.8944271802902222,0.4472135901451111,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\r\n}","import { Vector3 } from \"../utils/maths.js\";\r\n\r\nexport class ParticleSource {\r\n    constructor(model, position, material){\r\n        this.position = position;\r\n        this.name = \"Particle Source\";\r\n        this.scale = new Vector3(1,1,1);\r\n        this.material = material;\r\n        this.model = model;\r\n        this.model.color = new Vector3(0,1,0);\r\n        this.active = false;\r\n        this.id = 0;\r\n        this.units = [1];\r\n    }\r\n}","export class SpectrumShader {\r\n   \r\n    static vertexShader = \"precision mediump float;\"+\r\n\r\n    \"attribute vec2 vertPosition;\"+\r\n\r\n    \"varying vec2 textures;\" +\r\n    \"uniform mat4 transformation;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_Position = transformation * vec4(vertPosition, 0.0, 1.0);\"+\r\n      \"textures = vertPosition * 0.5 - 0.5;\"+\r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n\r\n    \"varying vec2 textures;\" + \r\n\r\n    \"vec3 hsvtorgb(float h, float s, float v)\"+\r\n    \"{\"+\r\n        \"float i = 0.0;\"+\r\n        \"float f = 0.0;\"+\r\n        \"float p = 0.0;\"+\r\n        \"float q = 0.0;\"+\r\n        \"float t = 0.0;\"+\r\n        \r\n        \"vec3 color;\"+\r\n        \"if(s==0.0){\"+\r\n          \"color.x = v;\"+\r\n          \"color.y = v;\"+\r\n          \"color.z = v;\"+\r\n          \"return color;\"+\r\n        \"}\"+\r\n        \"h /= 60.0;\"+\r\n        \"i = float(int(h));\"+\r\n        \"f = h - i;\"+\r\n        \"p = v * (1.0 - s);\"+\r\n        \"q = v * (1.0 - s*f);\"+\r\n        \"t = v * (1.0 - s * (1.0-f));\"+\r\n        \"if(i==0.0){\"+\r\n          \"color.x = v;\"+\r\n          \"color.y = t;\"+\r\n          \"color.z = p;\"+\r\n        \"}\"+\r\n        \"else if(i==1.0){\"+\r\n          \"color.x = q;\"+\r\n          \"color.y = v;\"+\r\n          \"color.z = p;\"+\r\n        \"}\"+\r\n        \"else if(i==2.0){\"+\r\n          \"color.x = p;\"+\r\n          \"color.y = v;\"+\r\n          \"color.z = t;\"+\r\n        \"}\"+\r\n        \"else if(i==3.0){\"+\r\n          \"color.x = p;\"+\r\n          \"color.y = q;\"+\r\n          \"color.z = v;\"+\r\n        \"}\"+\r\n        \"else if(i==4.0){\"+\r\n          \"color.x = t;\"+\r\n          \"color.y = p;\"+\r\n          \"color.z = v;\"+\r\n        \"}else{\"+\r\n          \"color.x = v;\"+\r\n          \"color.y = p;\"+\r\n          \"color.z = q;\"+\r\n        \"}\"+\r\n        \"return color;\"+\r\n    \"}\"+\r\n\r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_FragColor = vec4(hsvtorgb(((-1.0-textures.y)+1.0)*180.0,1.0,1.0),1.0);\"+\r\n     \"}\";\r\n}\r\n\r\n","import Shader from \"../rendering/shader.js\";\r\nimport {SpectrumShader} from \"../shaders/spectrumshader\";\r\nimport {Maths} from \"../utils/maths\";\r\n\r\nclass ColorSpectrum {\r\n    constructor(gl){\r\n        this.gl = gl;\r\n        this.shader = new Shader([[0,'vertPosition']],SpectrumShader,gl);\r\n        this.vertices = [ \r\n            -1, 1,\r\n             1, 1,\r\n            -1, -1,\r\n             1, -1,\r\n            1, 1,\r\n            -1, -1];\r\n\r\n        this.vao = this.gl.createVertexArray();\r\n        this.gl.bindVertexArray(this.vao);\r\n        this.gl.enableVertexAttribArray(0);\r\n\r\n        this.vbo = gl.createBuffer();\r\n        this.gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\r\n        this.gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW, 0);\r\n        this.gl.vertexAttribPointer(0, 2, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n\r\n        this.gl.bindVertexArray(null);\r\n        this.gl.disableVertexAttribArray(0);\r\n    }\r\n    draw(){\r\n        //remove clear\r\n        this.shader.bind();\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        this.gl.disable(this.gl.CULL_FACE);\r\n\r\n        //this.shader.setUniform(\"sampler\", 0);\r\n\r\n        let transformation = Maths.createTransformationMatrix(.5,-.8,0,0,0,0,.02,.15,.1);\r\n        \r\n\r\n        this.gl.enableVertexAttribArray(0);\r\n        this.gl.bindVertexArray(this.vao);\r\n        this.shader.setUniform4fv(\"transformation\",transformation);\r\n\r\n        this.gl.drawArrays(this.gl.TRIANGLES, 0, this.vertices.length / 2); \r\n\r\n        this.gl.bindVertexArray(null);\r\n        this.gl.disableVertexAttribArray(0);\r\n\r\n        this.shader.unBind();\r\n    }\r\n}\r\n\r\nexport default ColorSpectrum;","export class AxisShader {\r\n   \r\n    static vertexShader = \"precision mediump float;\"+\r\n\r\n    \"attribute vec3 vertices;\"+\r\n\r\n    \"uniform mat4 view;\"+\r\n    \"uniform mat4 transformation;\"+\r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 bmat;\"+\r\n    \"uniform float camerad;\"+\r\n    \"uniform vec3 pos;\"+\r\n\r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_Position = transformation * vec4(( bmat*vec4(vertices,1.0) + vec4(pos,0.0)).xyz*camerad*.03, 1.0);\"+\r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n\r\n    \"uniform vec3 color;\" +\r\n\r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_FragColor = vec4(color, 1.0);\"+\r\n     \"}\";\r\n}\r\n\r\n","import Shader from \"./shader.js\";\r\nimport Matrix, {Maths, Vector3} from \"../utils/maths.js\";\r\nimport { Texture } from \"./texture.js\";\r\nimport {AxisShader} from \"../shaders/axisShader\";\r\nimport Model from './model';\r\n\r\nclass AxisRenderer {\r\n    constructor(gl){\r\n        this.gl = gl;\r\n        this.shader = new Shader([[0,'vertices']],AxisShader,gl);\r\n       \r\n        this.allaxis = [];\r\n        this.labels = [];\r\n\r\n        this.xaxis = new Model([1,0,0,0,0,0],[1,1,1,1,1,1],gl);\r\n        this.yaxis = new Model([0,1,0,0,0,0],[1,1,1,1,1,1],gl);\r\n        this.zaxis = new Model([0,0,1,0,0,0],[1,1,1,1,1,1],gl);\r\n        \r\n        this.xlabel = new Model([1,0,0  ,.5,-.5,0,  .75,-.25,0,   .5,0,0, 1,-.5,0],[],gl);\r\n        this.ylabel = new Model([1,0,0  ,.75,-.25,0,  .5,0,0,.75,-.25,0, .75,-.5,0],[],gl);\r\n        this.zlabel = new Model([1,0,0  ,.5,0,0, 1,-.5,0, .5,-.5,0],[],gl);\r\n\r\n        this.xlabel.scale = new Vector3(.3,.3,.3);\r\n        this.xlabel.position = new Vector3(3,-.5,0);\r\n        \r\n        this.ylabel.scale = new Vector3(.3,.3,.3);\r\n        this.ylabel.position = new Vector3(-.5,4,0);\r\n        \r\n        this.zlabel.scale = new Vector3(.3,.3,.3);\r\n        this.zlabel.position = new Vector3(0,-.5,3);\r\n        \r\n\r\n\r\n        this.xlabel.color = new Vector3(1,1,1);\r\n        this.ylabel.color = new Vector3(1,1,1);\r\n        this.zlabel.color = new Vector3(1,1,1);\r\n        this.xaxis.color = new Vector3(1,0,0);\r\n        this.yaxis.color = new Vector3(0,1,0);\r\n        this.zaxis.color = new Vector3(0,0,1);\r\n        \r\n        this.xaxis.drawLines = true;\r\n        this.yaxis.drawLines = true;\r\n        this.zaxis.drawLines = true;\r\n        this.xlabel.drawLines = true;\r\n        this.ylabel.drawLines = true;\r\n        this.zlabel.drawLines = true;\r\n\r\n        this.allaxis.push(this.xaxis);\r\n        this.allaxis.push(this.yaxis);\r\n        this.allaxis.push(this.zaxis);\r\n        this.labels.push(this.xlabel);\r\n        this.labels.push(this.ylabel);\r\n        this.labels.push(this.zlabel);\r\n    }\r\n    draw(projection, camera){\r\n    \r\n        this.shader.bind();\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n\r\n        \r\n       \r\n\t\tfor(let i = 0;i<this.allaxis.length;i++){\r\n            var tmat = Maths.createTransformationMatrix(-.5,-.7,0,0,0,0,this.allaxis[i].scale.x,this.allaxis[i].scale.y,this.allaxis[i].scale.z);\r\n        \r\n            tmat = Maths.mul(tmat, projection);\r\n            tmat = Maths.mul(tmat, Maths.createViewMatrix(camera));\r\n            \r\n            tmat = Maths.translate(tmat, new Vector3(camera.a.x+this.allaxis[i].position.x,camera.a.y+this.allaxis[i].position.y,camera.a.z+this.allaxis[i].position.z));\r\n            \r\n            //tmat = Maths.scale(tmat, new Vector3(camera.d*.03,camera.d*.03,camera.d*.03));\r\n            this.shader.setUniform(\"camerad\", camera.d);\r\n            this.shader.setUniform3f(\"pos\", 0,0,0);\r\n            var bmat = Maths.createTransformationMatrix(0,0,0,0,0,0,1,1,1);\r\n            bmat = Maths.rotate(bmat,0, new Vector3(0,1,0));\r\n            this.shader.setUniform4fv(\"bmat\", bmat);\r\n\r\n            this.shader.setUniform4fv(\"transformation\", tmat);\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.bindVertexArray(this.allaxis[i].vao);\r\n            this.shader.setUniform3f(\"color\", this.allaxis[i].color.x,this.allaxis[i].color.y,this.allaxis[i].color.z);\r\n            \r\n            this.allaxis[i].draw();\r\n    \r\n            this.gl.disableVertexAttribArray(0);\r\n        }\r\n        for(let i = 0;i<this.labels.length;i++){\r\n            var tmat = Maths.createTransformationMatrix(-.5,-.7,0,0,0,0,this.labels[i].scale.x,this.labels[i].scale.y,this.labels[i].scale.z);\r\n            \r\n            tmat = Maths.mul(tmat, projection);\r\n            tmat = Maths.mul(tmat, Maths.createViewMatrix(camera));\r\n            \r\n            tmat = Maths.translate(tmat, new Vector3(camera.a.x,camera.a.y,camera.a.z));\r\n            \r\n            var bmat = Maths.createTransformationMatrix(0,0,0,0,0,0,1,1,1);\r\n            bmat = Maths.rotate(bmat, Maths.toRad(camera.x), new Vector3(0,1,0));\r\n            bmat = Maths.rotate(bmat, Maths.toRad(-camera.y), new Vector3(1,0,0));\r\n            //tmat = Maths.scale(tmat, new Vector3(camera.d*.03,camera.d*.03,camera.d*.03));\r\n\r\n            this.shader.setUniform(\"camerad\", camera.d);\r\n            this.shader.setUniform3f(\"pos\", this.labels[i].position.x,this.labels[i].position.y,this.labels[i].position.z);\r\n            this.shader.setUniform4fv(\"transformation\", tmat);\r\n            this.shader.setUniform4fv(\"bmat\", bmat);\r\n\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.bindVertexArray(this.labels[i].vao);\r\n            this.shader.setUniform3f(\"color\", this.labels[i].color.x,this.labels[i].color.y,this.labels[i].color.z);\r\n            \r\n            this.labels[i].draw();\r\n    \r\n            this.gl.disableVertexAttribArray(0);\r\n        }        \r\n\r\n        this.shader.unBind();\r\n    }\r\n} \r\n\r\nexport default AxisRenderer;","class STLParrser {\r\n    static writeData(data){\r\n        let bytes = \"Created at radsim.inf.elte.hu\";\r\n        \r\n        function readInt(data, i) {\r\n            var chars = new Uint8Array([data.charCodeAt(i), data.charCodeAt(i + 1), data.charCodeAt(i + 2), data.charCodeAt(i + 3)]);\r\n    \r\n            return new Int32Array(chars.buffer)[0];\r\n        }\r\n        function readFloat(data, i) {\r\n            var chars = new Uint8Array([data.charCodeAt(i), data.charCodeAt(i + 1), data.charCodeAt(i + 2), data.charCodeAt(i + 3)]);\r\n    \r\n            return new Float32Array(chars.buffer)[0];\r\n        }\r\n\r\n        while(bytes.length < 80){\r\n            bytes += \".\";\r\n        }\r\n        let numberoftriangles = data.vertices.length / 9;\r\n        writeInt(numberoftriangles);\r\n        for(let i = 0;i<numberoftriangles;i++){\r\n            for(let j = 0;j<3;j++){\r\n                writeFloat(data.normals[i*9 + j]);\r\n            }\r\n            for(let j = 0;j<9;j++){\r\n                writeFloat(data.vertices[i*9 + j]);\r\n            }\r\n            bytes += '..';\r\n        }\r\n\r\n        function writeFloat(f){\r\n            let fa = new Float32Array(1);\r\n            fa[0] = f;\r\n            let ba = new Uint8Array(fa.buffer);\r\n            bytes += String.fromCharCode(ba[0]);\r\n            bytes += String.fromCharCode(ba[1]);\r\n            bytes += String.fromCharCode(ba[2]);\r\n            bytes += String.fromCharCode(ba[3]);\r\n        }\r\n        function writeInt(i){\r\n            bytes += String.fromCharCode(i);\r\n            bytes += String.fromCharCode(i >> 8);\r\n            bytes += String.fromCharCode(i >> 16);\r\n            bytes += String.fromCharCode(i >> 24);\r\n        }\r\n        return bytes;\r\n\r\n    }\r\n    static parseData(data){\r\n        function readInt(data, i) {\r\n            var chars = new Uint8Array([data.charCodeAt(i), data.charCodeAt(i + 1), data.charCodeAt(i + 2), data.charCodeAt(i + 3)]);\r\n    \r\n            return new Int32Array(chars.buffer)[0];\r\n        }\r\n        function readFloat(data, i) {\r\n            var chars = new Uint8Array([data.charCodeAt(i), data.charCodeAt(i + 1), data.charCodeAt(i + 2), data.charCodeAt(i + 3)]);\r\n    \r\n            return new Float32Array(chars.buffer)[0];\r\n        }\r\n\r\n        let res = [];\r\n        var normals = [];\r\n        var size = readInt(data, 80);\r\n        if(size > 10000 || size <= 0) return null;\r\n        for (var k = 0; k < size; k++) {\r\n            for (var j = 0; j < 9; j++) {\r\n                res.push(readFloat(data, 96 + j * 4 + k * 50));\r\n            }\r\n        }\r\n        for (var k = 0; k < size; k++) {\r\n            for (var j = 0; j < 3; j++) {\r\n                normals.push(readFloat(data, 84 + j * 4 + k * 50));\r\n            }\r\n            for (var j = 0; j < 3; j++) {\r\n                normals.push(readFloat(data, 84 + j * 4 + k * 50));\r\n            }\r\n            for (var j = 0; j < 3; j++) {\r\n                normals.push(readFloat(data, 84 + j * 4 + k * 50));\r\n            }\r\n        }\r\n        let m = new ModelData();\r\n        \r\n        m.vertices = res;\r\n        m.normals = normals;\r\n        return m;\r\n    }\r\n}\r\nclass ModelData {\r\n    constructor(){\r\n        this.vertices = [];\r\n        this.normals = [];\r\n    }\r\n}\r\n\r\nexport default STLParrser;","class VolumeList {\r\n    static init(codeeditor){\r\n        VolumeList.editor = codeeditor;\r\n    }\r\n    static checkVolumeName(name){\r\n        for(let i = 0;i<VolumeList.volumes.length;i++){\r\n            if(VolumeList.volumes[i].name == name){\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    static addVolume(v){\r\n        if(VolumeList.checkVolumeName(v.name)) VolumeList.volumes.push(v);\r\n    }\r\n    static removeAll(){\r\n        VolumeList.volumes = [];\r\n    }\r\n    static removeVolume(v){\r\n        for(let i = 0;i<VolumeList.volumes.length;i++){\r\n            if(v == VolumeList[i]){\r\n                VolumeList.volumes.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    static getVolume(n){\r\n        for(let i = 0;i<VolumeList.volumes.length;i++){\r\n            if(VolumeList.volumes[i].name == n) return VolumeList.volumes[i];\r\n        }\r\n        alert(\"Volume not found!\\n\" + n);\r\n    }\r\n    static updateVolume(name, newname, newdata, detectors){\r\n        let v = VolumeList.getVolume(name);\r\n        v.name = newname;\r\n        detectors.forEach(e => {\r\n            if(e.geometry == name) e.geometry = newname;\r\n        });\r\n        if(newdata != undefined && newdata.length > 0) v.data = newdata;\r\n        VolumeList.editor.renameGeometry(name, newname, detectors);\r\n    }\r\n    static editor = null;\r\n    static volumes = [];\r\n} \r\n\r\nexport default VolumeList;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\nimport { GridRenderer } from '../rendering/grid.js';\r\nimport { Maths,Camera,Vector3 } from '../utils/maths.js';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport Detector from '../detector/Detektor.js';\r\nimport Model from '../rendering/model';\r\nimport {Cube} from '../entities/cube';\r\nimport {ParticleGun} from '../gun/ParticleGun';\r\nimport {GunMesh} from '../gun/gun';\r\nimport {ParticleSource} from '../source/ParticleSource';\r\nimport { InstanceRenderer } from '../rendering/InstanceRenderer';\r\nimport ColorSpectrum from '../graphics/ColorSpectrum';\r\nimport AxisRenderer from '../rendering/axisRenderer';\r\nimport STLParser from '../utils/STLParser';\r\nimport VolumeList from '../volume/VolumeList';\r\n\r\nclass Canvas extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = ({hint: \" \", colorMinHint: \"0 keV\", colorMaxHint: \"0 keV\"});\r\n    this.canvas = createRef();\r\n    this.camera = new Camera(45, -45, 100, new Vector3(0, 0, 0), new Vector3(0, 0, 0));\r\n    this.oldX = 0;\r\n    this.oldY = 0;\r\n    this.move = false;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.keyDown = ` ${0}`;\r\n    this.down = false;\r\n    this.rightclick = false;\r\n    this.renderer = null;\r\n    this.instanceRenderer = null;\r\n    this.axisRenderer = null;\r\n    this.particles = [];\r\n    this.drawTracks = false;\r\n    this.drawParticles = true;\r\n    this.drawGrid = false;\r\n    this.gl = null;\r\n    this.detector_buttons = [];\r\n    this.source_buttons = [];\r\n    this.gun_buttons = [];\r\n    this.updateHint = this.updateHint.bind(this);\r\n    this.updateColorHint = this.updateColorHint.bind(this);\r\n  }\r\n  updateColorHint(s, ms){\r\n    this.setState({colorMaxHint: s, colorMinHint: ms});\r\n  }\r\n  updateHint(s){\r\n    this.setState({hint: s});\r\n  }\r\n  setShowTracks(b){\r\n    this.renderer.drawTracks = b;\r\n  }\r\n  setShowAxes(b){\r\n    this.renderer.drawAxes = b;\r\n  }\r\n  getMouseXd(){\r\n    return this.oldX - this.x;\r\n  }\r\n  getMouseYd(){\r\n    return this.oldY - this.y;\r\n  }\r\n  clearRun(){\r\n    this.particles = [];\r\n    this.renderer.clearTracks();\r\n  }\r\n  \r\n  componentDidMount() {\r\n    this.canvas.current.oncontextmenu = (e)=> {\r\n      this.rightclick = true;\r\n      //if(RenderSystem.hover_id == -1) RenderSystem.active_id = -1;\r\n      let selected = -1;\r\n      for(var i = 0;i<this.detector_buttons.length;i++){\r\n        if(this.detector_buttons[i].current.id == RenderSystem.hover_id){\r\n          this.detector_buttons[i].current.accordion.current.click();\r\n          selected = this.detector_buttons[i].current.id;\r\n        }\r\n      }\r\n      console.log(this.source_buttons.length);\r\n      for(var i = 0;i<this.source_buttons.length;i++){\r\n        if(this.source_buttons[i].current.id == RenderSystem.hover_id){\r\n          this.source_buttons[i].current.accordion.current.click();\r\n          selected = this.source_buttons[i].current.id;\r\n        }\r\n      }\r\n      for(var i = 0;i<this.gun_buttons.length;i++){\r\n        if(this.gun_buttons[i].current.id == RenderSystem.hover_id){\r\n          this.gun_buttons[i].current.accordion.current.click();\r\n          selected = this.gun_buttons[i].current.id;\r\n        }\r\n      }\r\n      if(selected == -1){\r\n        for(var i = 0;i<this.detector_buttons.length;i++){\r\n          if(this.detector_buttons[i].current.id == RenderSystem.active_id){\r\n            this.detector_buttons[i].current.accordion.current.click();\r\n            //selected = this.detector_buttons[i].current.id;\r\n          }\r\n        }\r\n        for(var i = 0;i<this.source_buttons.length;i++){\r\n          if(this.source_buttons[i].current.id == RenderSystem.active_id){\r\n            this.source_buttons[i].current.accordion.current.click();\r\n            //selected = this.source_buttons[i].current.id;\r\n          }\r\n        }\r\n        for(var i = 0;i<this.gun_buttons.length;i++){\r\n          if(this.gun_buttons[i].current.id == RenderSystem.active_id){\r\n            this.gun_buttons[i].current.accordion.current.click();\r\n            //selected = this.source_buttons[i].current.id;\r\n          }\r\n        }\r\n      }\r\n      //alert(this.detector_buttons[0].current.accordion.current.click());\r\n      e.preventDefault(); e.stopPropagation();}\r\n\r\n    function updateCamera(camera) {\r\n      if (camera.y > 89.0) {\r\n          camera.y = 89.0;\r\n      }\r\n      if (camera.y < -89.0) {\r\n          camera.y = -89.0;\r\n      }\r\n  \r\n      camera.p.x = (camera.d * -Math.sin(Maths.toRad(camera.x))\r\n          * Math.cos(Maths.toRad(camera.y)) + camera.a.x);\r\n      camera.p.y = (camera.d * -Math.sin(Maths.toRad(camera.y))\r\n          + camera.a.y);\r\n      camera.p.z = (-camera.d * Math.cos(Maths.toRad(camera.x))\r\n          * Math.cos(Maths.toRad(camera.y)) + camera.a.z);\r\n  \r\n\r\n      return camera;\r\n  }\r\n    this.gl = this.canvas.current.getContext(\"webgl2\");\r\n    let gridRenderer = new GridRenderer(this.gl);\r\n    this.renderer = new RenderSystem(this.gl);\r\n    this.instanceRenderer = new InstanceRenderer(Cube.vertices, this.gl);\r\n    this.guiRenderer = new ColorSpectrum(this.gl);\r\n    this.axisRenderer = new AxisRenderer(this.gl);\r\n    var draw = ()=>{\r\n      this.gl.clearColor(.2,.2,.2,1.0);\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n      \r\n\r\n      let projection = Maths.createProjectionMatrix(70,.1 * this.camera.d,1000 * this.camera.d, this.canvas.current.offsetWidth,this.canvas.current.offsetHeight);\r\n      if(this.down && this.move){\r\n        if (this.keyDown === 17) {\r\n          this.camera.a.y -= .01 * (this.getMouseYd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n          this.camera.a.z += .01 * (Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d);\r\n\r\n              this.camera.a.z -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * -this.getMouseXd() * .01 * this.camera.d);\r\n\r\n\r\n\r\n      } else {\r\n        this.camera.x += this.getMouseXd() / 2;\r\n        this.camera.y += this.getMouseYd() / 2;\r\n      }\r\n      }\r\n      updateCamera(this.camera);\r\n      \r\n      if(this.drawGrid) gridRenderer.draw(projection, this.camera, this.canvas.current.offsetWidth,this.canvas.current.offsetHeight, this.camera.d, this.updateHint);\r\n      this.renderer.draw(projection, this.camera, (this.x/ this.canvas.current.offsetWidth) * 2.0 - 1.0, \r\n      ((this.canvas.current.offsetHeight-this.y)/ this.canvas.current.offsetHeight) * 2.0 - 1.0,this.rightclick,this.move);\r\n      //console.log((this.y-50)/window.innerHeight);\r\n      //console.log(this.x);\r\n      //this.renderer.draw(projection, this.camera, this.x, this.y);\r\n      if(this.drawParticles) this.instanceRenderer.render(this.particles, Maths.createViewMatrix(this.camera),projection, this.camera.d, this.gl);\r\n      this.guiRenderer.draw();\r\n      this.axisRenderer.draw(projection,this.camera);\r\n      \r\n      this.move = false;\r\n      //console.log(this.rightclick);\r\n      this.rightclick = false;\r\n      requestAnimationFrame(draw);\r\n      \r\n    }\r\n    requestAnimationFrame(draw);\r\n  }\r\n  addSource(x,y,z,mat){\r\n    let source = new ParticleSource(new Model(Cube.vertices, Cube.normals,this.gl),new Vector3(x,y,z),mat);\r\n    source.model.drawLines = false;\r\n    source.model.position = new Vector3(x,y,z);\r\n    this.renderer.addSource(source);\r\n\r\n    return source;\r\n  }\r\n  addParticle(particle){\r\n    this.particles.push(particle);\r\n  }\r\n  addSTLDetector(x,y,z,rx,ry,rz,sx,sy,sz,mat,data){\r\n    let detector = new Detector(new Model(data.vertices, data.normals, this.gl));\r\n    detector.model.drawLines = false;\r\n    detector.model.color = new Vector3(1,1,1);\r\n    detector.model.position.x = x;\r\n    detector.model.position.y = y;\r\n    detector.model.position.z = z;\r\n\r\n    detector.model.rotation.x = rx;\r\n    detector.model.rotation.y = ry;\r\n    detector.model.rotation.z = rz;\r\n\r\n    detector.model.scale.x = sx;\r\n    detector.model.scale.y = sy;\r\n    detector.model.scale.z = sz;\r\n    \r\n    detector.material = mat;\r\n\r\n    this.renderer.addDetector(detector);\r\n    \r\n    return detector;\r\n  }\r\n  async addDetector(x,y,z,rx,ry,rz,sx,sy,sz, mat, type, volumes){\r\n    let detector = null;\r\n    let parameterize = ()=>{\r\n      detector.model.drawLines = false;\r\n      detector.model.color = new Vector3(1,1,1);\r\n      detector.model.position.x = x;\r\n      detector.model.position.y = y;\r\n      detector.model.position.z = z;\r\n  \r\n      detector.model.rotation.x = rx;\r\n      detector.model.rotation.y = ry;\r\n      detector.model.rotation.z = rz;\r\n  \r\n      detector.model.scale.x = sx;\r\n      detector.model.scale.y = sy;\r\n      detector.model.scale.z = sz;\r\n      \r\n      detector.material = mat;\r\n  \r\n      this.renderer.addDetector(detector);\r\n    };\r\n      let str = \"\";\r\n        for(let i = 0;i<volumes.length;i++){\r\n          str = VolumeList.getVolume(type).data;\r\n        }\r\n        let modeldata = STLParser.parseData(str);\r\n        detector = new Detector(new Model(modeldata.vertices, modeldata.normals, this.gl));\r\n    parameterize();\r\n    return detector;\r\n    \r\n  }\r\n  addModel(vertices, normals){\r\n    let model = new Model(vertices, normals, this.gl);\r\n\r\n    this.renderer.addModel(model);\r\n\r\n    return model;\r\n  }\r\n  addGun(x,y,z,dx,dy,dz,energy){\r\n    let gun_model = new Model(GunMesh.vertices, GunMesh.normals, this.gl);\r\n    gun_model.drawLines = false;\r\n    let gun = new ParticleGun(gun_model,new Vector3(x,y,z),new Vector3(dx,dy,dz),energy);\r\n    gun.model.position = new Vector3(x,y,z);\r\n    \r\n    this.renderer.addGun(gun);\r\n\r\n    return gun;\r\n\r\n  }\r\n  clearSetup(){\r\n    this.renderer.clearSetup()\r\n  }\r\n  removeSource(source){\r\n    this.renderer.removeSource(source);\r\n  }\r\n  removeDetector(detector){\r\n    this.renderer.removeDetector(detector);\r\n  }\r\n  removeGun(gun){\r\n    this.renderer.removeGun(gun);\r\n  }\r\n  render(){\r\n    return <div>\r\n      <p ref={this.hint} style={{\"position\":\"fixed\", \"bottom\" : \"10%\", \"left\" : \"20%\", \"z-index\" : \"4\", \"color\" : \"white\"}}>{this.state.hint}</p>\r\n      <p ref={this.colorMinHint} style={{\"position\":\"fixed\", \"bottom\" : \"0%\", \"left\" : \"71%\", \"z-index\" : \"4\", \"color\" : \"white\"}}>{this.state.colorMinHint}</p>\r\n      <p ref={this.colorMaxHint} style={{\"position\":\"fixed\", \"bottom\" : \"15%\", \"left\" : \"71%\", \"z-index\" : \"4\", \"color\" : \"white\"}}>{this.state.colorMaxHint}</p>\r\n    <canvas ref={this.canvas} onMouseMove={(e)=>{ \r\n      \r\n      this.move = true;\r\n      this.oldX = this.x;\r\n      this.oldY = this.y;\r\n      this.x = e.pageX;\r\n      this.y = e.pageY;\r\n    }}\r\n    tabIndex=\"0\" \r\n    width='2000'\r\n    height='2000'\r\n    style={{position: 'fixed', right: 0, left: 0, width: '100%', height: '100%'}}\r\n    onKeyDown={(e)=>{this.keyDown = e.keyCode;}}\r\n    onKeyUp={(e)=>{this.keyDown = ` ${0}`;}}\r\n    onMouseDown={()=>{this.down = true;}} \r\n    onMouseUp={()=>{this.down = false;}}\r\n    onWheel={(e)=>{\r\n      let delta = 0;\r\n      if(e.deltaY > 0) delta = 1;\r\n      else delta = -1;\r\n      this.camera.d += (this.camera.d / (delta*100)) * 10;\r\n      }}/>\r\n      <button className=\"camerareset\" onClick={()=>{\r\n        this.camera = new Camera(45, -45, 100, new Vector3(0, 0, 0), new Vector3(0, 0, 0));\r\n      }}>reset</button>\r\n  </div>\r\n    \r\n   \r\n  }\r\n}\r\n\r\nexport default Canvas;\r\n","class Requests{\r\n    constructor(){}\r\n    static url = \"http://localhost:9000/\"\r\n    static get = async (route, auth) => {\r\n        let response = await fetch(this.url + route, {\r\n            headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'auth-token': auth\r\n            },\r\n            method: 'GET'\r\n        });\r\n        //let json = await response.json();\r\n\r\n        return response;\r\n    }\r\n    static post = async (route, parameters) => {\r\n        let response = await fetch(this.url + route, {\r\n            headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n            },\r\n            method: 'POST',\r\n            body: JSON.stringify(parameters)\r\n        });\r\n        //let json = await response.json();\r\n\r\n        return response;\r\n    }\r\n}\r\n\r\nexport default Requests;","import Requests from '../utils/Reqs';\r\n\r\n/*\r\nThis class contains all materials used by both detectors and sources. \r\n*/\r\n\r\nclass MaterialList {\r\n    static sources = [\r\n    ];\r\n    static compounds = [\r\n    ];\r\n    static materials = [];\r\n    static get(name) {\r\n        for (let i = 0; i < MaterialList.materials.length; i++) {\r\n            if (name == MaterialList.materials[i].symbol) return MaterialList.materials[i];\r\n        }\r\n        return name;\r\n    }\r\n    static check(s) {\r\n        for (let i = 0; i < MaterialList.materials.length; i++) {\r\n            if (s == MaterialList.materials[i]) return true;\r\n        }\r\n        return false;\r\n    }\r\n    static getAllElements(){\r\n\r\n    }\r\n    static async init(){\r\n        //Load elements from the API\r\n        let json = 0;\r\n        while(json.length == undefined){\r\n            let result = await Requests.get(\"elementAPI/get/All\");\r\n            json = await result.json();\r\n        }\r\n       \r\n        for(let i = 0;i<json.length;i++){\r\n            MaterialList.materials.push({symbol: json[i]['symbol'], z: parseInt(json[i]['z']), name: json[i]['name']});\r\n        }\r\n\r\n        //Load compounds from the API\r\n        let compoundresult = await Requests.get(\"compoundAPI/get/All\");\r\n        let compoundjson = await compoundresult.json();\r\n        for(let i = 0;i<compoundjson.length;i++){\r\n            MaterialList.compounds.push(compoundjson[i]['name']);\r\n        }\r\n        //Load sources from the API\r\n        let sourceResult = await Requests.get(\"sourceAPI/get/All\");\r\n        let sourceJson = await sourceResult.json();\r\n        for(let i = 0;i<sourceJson.length;i++){\r\n            MaterialList.sources.push(sourceJson[i]['name']);\r\n        }\r\n    }\r\n    static async getElement(symbol){\r\n        let result = await Requests.get(\"elementAPI/get/\" + symbol);\r\n        let json = await result.json();\r\n    }\r\n    static checkMaterial(mat, f) {\r\n        for (let i = 0; i < MaterialList.materials.length; i++) {\r\n            if (mat == MaterialList.materials[i].symbol){\r\n                return true;\r\n            }\r\n        }\r\n        for(let i = 0;i<MaterialList.compounds.length;i++){\r\n            if(mat == MaterialList.compounds[i]){\r\n                return true;\r\n            }\r\n        }\r\n        f();\r\n        return false;\r\n    }\r\n    static checkSource(source, f){\r\n        for(let i = 0;i<MaterialList.sources.length;i++){\r\n            if(source == MaterialList.sources[i]){\r\n                return true;\r\n            }\r\n        }\r\n        f();\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default MaterialList;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false }\r\n     \r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  showDialog(){\r\n      \r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{this.props.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        {this.props.content}\r\n      \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            No\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n              this.props.fun();\r\n              this.hideDialog();\r\n          }}>\r\n            Yes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","class UnitConverter {\r\n    static convertLength(v){\r\n        switch(v){\r\n            case(\".1\"):\r\n                return \"mm\";\r\n            case(\"1\"):\r\n                return \"cm\";\r\n            case(\"10\"):\r\n                return \"dm\";\r\n            case(\"100\"):\r\n                return \"m\";\r\n            default:\r\n                return \"cm\";\r\n        }\r\n    }\r\n    static convertAngle(v){\r\n        if(v==1) return \"rad\";\r\n        else return \"deg\";\r\n    }\r\n    static convertEnergy(v){\r\n        switch(v){\r\n            case(\"1\"):\r\n                return \"eV\";\r\n            case(\"1000\"):\r\n                return \"keV\";\r\n            case(\"1000000\"):\r\n                return \"MeV\";\r\n            case(\"1000000000\"):\r\n                return \"GeV\";\r\n            default:\r\n                return \"keV\";\r\n        }\r\n    }\r\n}\r\n\r\nexport default UnitConverter;","/*\r\nThis class handles error messages\r\n*/\r\nclass Error {\r\n\r\n    static dialog = null;\r\n    //initialize the message handling class with the error message dialog\r\n    static init(dialog){\r\n        Error.dialog = dialog;\r\n    }\r\n    //shows and error message\r\n    static showError(title, message){\r\n        Error.dialog.setTitle(title);\r\n        Error.dialog.setContent(message);\r\n        Error.dialog.showDialog()\r\n    }\r\n\r\n}\r\n\r\nexport default Error;","import Detector from '../detector/Detektor';\r\nimport Model from '../rendering/model';\r\nimport { Cube } from '../entities/cube';\r\nimport { ParticleSource } from '../source/ParticleSource';\r\nimport { Vector3 } from '../utils/maths';\r\nimport { ParticleGun } from '../gun/ParticleGun';\r\nimport GunMesh from '../gun/gun';\r\nimport DetectorButton from '../detector/DetectorButton';\r\nimport React, { Component, createRef } from 'react';\r\nimport MaterialList from '../detector/MaterialList';\r\nimport VolumeList from '../volume/VolumeList';\r\nimport UnitConverter from '../utils/UnitConverter';\r\n\r\nimport Error from '../utils/Error';\r\n\r\n//TO-DO\r\n//position[cm]\r\nvar m = 100;\r\nvar dm = 10;\r\nvar cm = 1;\r\nvar mm = .1;\r\nvar eV = 1;\r\nvar keV = 1000;\r\nvar MeV = 1000000;\r\nvar GeV = 1000000000;\r\nvar deg = 0.0174527777777778;\r\nvar rad = 1;\r\nclass Parser {\r\n    static showVolumeDialog = null;\r\n    static confirmDialog = null;\r\n\r\n    static init(f0, f1) {\r\n        Parser.showVolumeDialog = f0;\r\n        Parser.confirmDialog = f1;\r\n    }\r\n    static checkString(s) {\r\n        s = s.trim();\r\n        if (s.split('\"').length % 2 == 0) {\r\n            return false;\r\n        }\r\n        if (s[0] != '\"') return false;\r\n        if (s[s.length - 1] != '\"') return false;\r\n        return true;\r\n    }\r\n    static chunks = [];\r\n\r\n    static addDetectorCode(id, name, position, rotation, scale, material, geometry, posu, rotu, scaleu){\r\n        let n = \"\\\\Detector{\\n\" +\r\n        \"\\tname: \" + '\"' + name + '\";\\n' +\r\n        \"\\tposition[\" + UnitConverter.convertLength(posu) + \"]: \" + position.x + \", \" + position.y + \", \" + position.z + \";\\n\" +\r\n        \"\\trotation[\" + UnitConverter.convertAngle(rotu) + \"]: \" + rotation.x + \", \" + rotation.y + \", \" + rotation.z + \";\\n\" +\r\n        \"\\tscale[\" + UnitConverter.convertLength(scaleu) + \"]: \" + scale.x + \", \" + scale.y + \", \" + scale.z + \";\\n\" +\r\n        \"\\tmaterial: \" + '\"' + material + '\";\\n' +\r\n        \"\\tgeometry: \" + '\"' + geometry + '\";\\n' +\r\n  \r\n        \"}\\n\";\r\n        Parser.chunks.push({id: id, code: n});\r\n\r\n        return n;\r\n    }\r\n    static addSourceCode(id, name, position, material, posu){\r\n        let n = \"\\\\Source{\\n\" +\r\n        \"\\tname: \" + '\"' + name + '\";\\n' +\r\n        \"\\tposition[\" + UnitConverter.convertLength(posu) + \"]: \" + position.x + \", \" + position.y + \", \" + position.z + \";\\n\" +\r\n        \"\\tmaterial: \" + '\"' + material + '\";\\n' +\r\n        \"}\\n\";\r\n\r\n        Parser.chunks.push({id: id, code: n});\r\n\r\n        return n;\r\n    }\r\n    static addGunCode(id, name, position, direction, energy, posu, energyu){\r\n        let n = \"\\\\Gun{\\n\" +\r\n        \"\\tname: \" + '\"' + name + '\";\\n' +\r\n        \"\\tposition[\" + UnitConverter.convertLength(posu) + \"]: \" + position.x + \", \" + position.y + \", \" + position.z + \";\\n\" +\r\n        \"\\tdirection: \" + direction.x + \", \" + direction.y + \", \" + direction.z + \";\\n\" +\r\n        \"\\tenergy[\" + UnitConverter.convertEnergy(energyu) + \"]: \" + energy + ';\\n' +\r\n        \"}\\n\"\r\n\r\n        Parser.chunks.push({id: id, code: n});\r\n\r\n        return n;\r\n    }\r\n\r\n    static removeChunk(id) {\r\n        let result = \" \";\r\n\r\n        for (let i = 0; i < Parser.chunks.length; i++) {\r\n            if (Parser.chunks[i].id == id) {\r\n                Parser.chunks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        for (let i = 0; i < Parser.chunks.length; i++) {\r\n            result += Parser.chunks[i].code;\r\n        }\r\n        return result;\r\n    }\r\n    \r\n    static checkFloat(s, v, me) {\r\n        if (isNaN(parseFloat(s.split(',')[0]))) return false;\r\n        if (isNaN(parseFloat(s.split(',')[1]))) return false;\r\n        if (isNaN(parseFloat(s.split(',')[2]))) return false;\r\n        v.x = parseFloat(s.split(',')[0]) * me;\r\n        v.y = parseFloat(s.split(',')[1]) * me;\r\n        v.z = parseFloat(s.split(',')[2]) * me;\r\n        return true;\r\n    }\r\n    static parse(text, canvas, clearSetup, createDetector, createSource, createGun) {\r\n        let detectors = [];\r\n        let sources = [];\r\n        let guns = [];\r\n        let gl = canvas.gl;\r\n        let blocks = text.split(\"\\\\\");\r\n        let error = false;\r\n        let failed_detectors = [];\r\n        for (let i = 0; i < blocks.length; i++) {\r\n            let words = blocks[i].split(\"{\");\r\n            words[0] = words[0].replace(' ', '');\r\n            let detector = null;\r\n            let source = null;\r\n            let gun = null;\r\n            let detector_geometry = 'cube';\r\n            if (words[0] == 'Detector') {\r\n                detector = new Detector(new Model(Cube.vertices, Cube.normals, gl));\r\n            }\r\n            if (words[0] == 'Source') {\r\n                source = new ParticleSource(new Model(Cube.vertices, Cube.normals, gl), new Vector3(0, 0, 0), \"U235\");\r\n            }\r\n            if (words[0] == 'Gun') {\r\n                gun = new ParticleGun(new Model(Cube.vertices, Cube.normals, gl), new Vector3(0, 0, 0), new Vector3(0, 0, 0), 0);\r\n            }\r\n            for (let j = 0; j < words.length; j++) {\r\n                let lines = words[j].split(\";\");\r\n                for (let k = 0; k < lines.length; k++) {\r\n                    if (lines[k].split(\"(\")[0].trim() == 'clear') {\r\n\r\n                    }\r\n                    if (lines[k].split(\":\").length == 1) continue;\r\n                    let attribute = lines[k].split(\":\")[0].trim();\r\n                    let measurement = cm;\r\n                    switch (attribute.substring(attribute.indexOf(\"[\") + 1, attribute.indexOf(\"]\"))) {\r\n                        case (\"eV\"):\r\n                            measurement = eV;\r\n                            break;\r\n                        case (\"keV\"):\r\n                            measurement = keV;\r\n                            break;\r\n                        case (\"MeV\"):\r\n                            measurement = MeV;\r\n                            break;\r\n                        case (\"GeV\"):\r\n                            measurement = GeV;\r\n                            break;\r\n                        case (\"mm\"):\r\n                            measurement = mm;\r\n                            break;\r\n                        case (\"deg\"):\r\n                            measurement = deg;\r\n                            break;\r\n                        case (\"rad\"):\r\n                            measurement = rad;\r\n                            break;\r\n                        case (\"cm\"):\r\n                            measurement = cm;\r\n                            break;\r\n                        case (\"dm\"):\r\n                            measurement = dm;\r\n                            break;\r\n                        case (\"m\"):\r\n                            measurement = m;\r\n                            break;\r\n                        default:\r\n                            measurement = cm;\r\n                    }\r\n                    if (attribute.includes(\"[\")) attribute = attribute.substr(0, attribute.indexOf(\"[\"));\r\n                    let params = lines[k].split(\":\")[1].replace(/\\n/g, '');\r\n                    if (words[0] == 'Detector') {\r\n                        switch (attribute) {\r\n                            case ('geometry'):\r\n                                detector_geometry = params.trim().substring(1, params.trim().length - 1);\r\n                                detector.geometry = detector_geometry;\r\n                                if (VolumeList.getVolume(detector_geometry) == undefined) {\r\n                                    error = true;\r\n                                    if(!failed_detectors.includes(detector_geometry))failed_detectors.push(detector_geometry);\r\n                                }\r\n                                break;\r\n                            case ('position'):\r\n                                if (!this.checkFloat(params, detector.model.position, measurement)) Error.showError(\"Code Error\",\"Position incorrect format, correct format is x, y, z\");\r\n                                break;\r\n                            case ('rotation'):\r\n                                if (!this.checkFloat(params, detector.model.rotation, measurement)) Error.showError(\"Code Error\",\"Rotation incorrect format, correct format is x, y, z\");\r\n                                break;\r\n                            case ('scale'):\r\n                                if (!this.checkFloat(params, detector.model.scale, measurement)) Error.showError(\"Code Error\",\"Scale incorrect format, correct format is x, y, z\");\r\n\r\n                                break;\r\n                            case ('material'):\r\n                                if (!this.checkString(params)) Error.showError(\"Code Error\",\"Material incorrect format!\");\r\n                                detector.material = params.trim().substring(1, params.trim().length - 1);\r\n                                MaterialList.checkMaterial(detector.material, () => {\r\n                                    Error.showError(\"Code Error\",\"No material named: \" + detector.material + \"\\nMaterial set to Lead(Pb)!\");\r\n                                    detector.material = \"Pb\";\r\n                                });\r\n                                break;\r\n                            case ('name'):\r\n                                if (!this.checkString(params)) Error.showError(\"Code Error\",\"Name incorrect format!\");\r\n                                detector.name = params.trim().substring(1, params.trim().length - 1);\r\n                                if(detector.name.length > 15){\r\n                                    \r\n                                    Error.showError(\"Code Error\",\"Name too long!\\nThe name you've given to detector \" + detector.name + \" was too long, maximum length is 15 characters.\");\r\n\r\n                                    return;\r\n                                }\r\n                                break;\r\n\r\n                            default:\r\n                                Error.showError(\"Code Error\", \"No such property: \" + attribute);\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (words[0] == 'Source') {\r\n                        switch (attribute) {\r\n                            case ('position'):\r\n                                if (!this.checkFloat(params, source.model.position, measurement)) Error.showError(\"Code Error\",\"Position incorrect format, correct format is x, y, z\");\r\n                                break;\r\n                            case ('material'):\r\n                                if (!this.checkString(params)) Error.showError(\"Code Error\",\"Material incorrect format, correct format is x, y, z\");\r\n                                source.material = params.trim().substring(1, params.trim().length - 1);\r\n                                MaterialList.checkSource(source.material, () => {\r\n                                    Error.showError(\"Code Error\", \"No source named: \" + source.material + \"\\nSource set to Cobalt(Co60)!\");\r\n                                    source.material = \"Co60\";\r\n                                });\r\n                                break;\r\n                            case ('name'):\r\n                                if (!this.checkString(params)) Error.showError(\"Code Error\",\"Name incorrect format!\");\r\n                                source.name = params.trim().substring(1, params.trim().length - 1);\r\n                                if(source.name.length > 15){\r\n                                    \r\n                                    Error.showError(\"Code Error\",\"Name too long!\\nThe name you've given to source \" + source.name + \" was too long, maximum length is 15 characters.\");\r\n\r\n                                    return;\r\n                                }\r\n                                break;\r\n                            default:\r\n                                Error.showError(\"Code Error\", \"No such property: \" + attribute);\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (words[0] == 'Gun') {\r\n                        switch (attribute) {\r\n                            case ('position'):\r\n                                if (!this.checkFloat(params, gun.model.position, measurement)) Error.showError(\"Code Error\",\"Position incorrect format, correct format is x, y, z\");\r\n                                break;\r\n                            case ('direction'):\r\n                                if (!this.checkFloat(params, gun.direction, measurement)) Error.showError(\"Code Error\",\"Direction incorrect format, correct format is x, y, z\");\r\n                                break;\r\n                            case ('energy'):\r\n                                gun.energy = parseFloat(params) * measurement;\r\n                                break;\r\n                            case ('name'):\r\n                                if (!this.checkString(params)) Error.showError(\"Code Error\",\"Name incorrect format!\");\r\n                                gun.name = params.trim().substring(1, params.trim().length - 1);\r\n                                if(gun.name.length > 15){\r\n                                    Error.showError(\"Code Error\",\"Name too long!\\nThe name you've given to gun \" + gun.name + \" was too long, maximum length is 15 characters.\");\r\n                                    return;\r\n                                }\r\n                                break;\r\n                            default:\r\n                                Error.showError(\"Code Error\", \"No such property: \" + attribute);\r\n                                break;\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n            if (gun != null) {\r\n                //createGun(gun.name, gun.model.position.x, gun.model.position.y, gun.model.position.z, gun.direction.x, gun.direction.y, gun.direction.z, gun.energy, false);\r\n                guns.push(gun);\r\n            }\r\n            if (source != null) {\r\n                //createSource(source.name, source.model.position.x, source.model.position.y, source.model.position.z, source.material, false);\r\n                sources.push(source);\r\n            }\r\n            if (detector != null) {\r\n                // createDetector(detector.name, detector.model.position.x, detector.model.position.y, detector.model.position.z,\r\n                //     detector.model.rotation.x, detector.model.rotation.y, detector.model.rotation.z,\r\n                //     detector.model.scale.x, detector.model.scale.y, detector.model.scale.z, detector.material, 'stl', VolumeList.getVolume(detector_geometry).data, new Vector3(.5, .5, .5), false);\r\n                if (VolumeList.getVolume(detector_geometry) != undefined) detectors.push(detector);\r\n            }\r\n        }\r\n        //TO_DO\r\n        if (error) {\r\n\r\n            Parser.confirmDialog(\"Volume not found!\", \"Add the volume to the volume list before referencing it in the script then click 'Run script' again.\",\r\n                () => {\r\n                    Parser.showVolumeDialog.showDialog(failed_detectors, () => {\r\n                        //Parser.parse(text, canvas, clearSetup, createDetector, createSource, createGun);\r\n                    });\r\n\r\n                });\r\n            return;\r\n        }\r\n        clearSetup();\r\n        guns.forEach(gun => {\r\n            createGun(gun.name, gun.model.position.x, gun.model.position.y, gun.model.position.z, gun.direction.x, gun.direction.y, gun.direction.z, gun.energy, false,1,1,1);\r\n        });\r\n\r\n        sources.forEach(source => {\r\n            createSource(source.name, source.model.position.x, source.model.position.y, source.model.position.z, source.material, false,1,1,1);\r\n        });\r\n\r\n        detectors.forEach(detector => {\r\n            createDetector(detector.name, detector.model.position.x, detector.model.position.y, detector.model.position.z,\r\n                detector.model.rotation.x, detector.model.rotation.y, detector.model.rotation.z,\r\n                detector.model.scale.x, detector.model.scale.y, detector.model.scale.z, detector.material, detector.geometry, VolumeList.getVolume(detector.geometry).data, new Vector3(.5, .5, .5), false,1,1,1);\r\n        });\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default Parser;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Modal, Button, Table, Container, Col, FormControl, Row} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport MaterialList from '../detector/MaterialList';\r\n\r\nclass MaterialTable extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false, materials: [], table: \"elements\", element: true, compound: false};\r\n    this.changeTable = this.changeTable.bind(this);\r\n  }\r\n  changeTable(s){\r\n    if(s==\"elements\"){\r\n      this.setState({element: true, compound: false});\r\n    }\r\n    if(s==\"compounds\"){\r\n      this.setState({element: false, compound: true});\r\n    }\r\n    this.setState({table: s});\r\n    this.updateMaterials(\"\", s);\r\n  }\r\n  componentDidMount(){\r\n   this.updateMaterials(\"\", this.state.table);\r\n    \r\n  }\r\n  showDialog(){\r\n    this.setState({show: true});\r\n    this.updateMaterials(\"\", \"elements\");\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  updateMaterials(s, t){\r\n    if(t == \"elements\"){\r\n      let list = MaterialList.materials.filter(x => x.name.toUpperCase().includes(s.toUpperCase()) || x.symbol.toUpperCase().includes(s.toUpperCase()));\r\n      let tmp_mats = [];\r\n      let rows = Math.ceil(list.length / 5);    \r\n      for(let i = 0;i<rows;i++){\r\n        let tmp = [];\r\n        for(let j = Math.floor((i/rows)*list.length);j<Math.floor((i/rows)*list.length)+5;j++){\r\n              if(list[j] === undefined) break;\r\n              tmp.push(<th className=\"tablebutton\" onClick={e=>{this.props.updatematerial(list[j].symbol);this.hideDialog();}}>\r\n                <p style={{\"font-size\":'12px'}}>{list[j].z}</p>\r\n                <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\"}}>{list[j].symbol}</h1>\r\n                <p style={{\"font-size\":'12px'}}>{list[j].name}</p>\r\n                </th>);\r\n        }\r\n        tmp_mats.push(<tr>{tmp}</tr>);\r\n      }\r\n      this.setState({materials: tmp_mats});\r\n    }\r\n    if(t == \"compounds\"){\r\n      let list = MaterialList.compounds.filter(x => x.toUpperCase().includes(s.toUpperCase()));\r\n      let tmp_mats = [];\r\n      let rows = Math.ceil(list.length / 3);    \r\n      for(let i = 0;i<rows;i++){\r\n        let tmp = [];\r\n        for(let j = Math.floor((i/rows)*list.length);j<Math.floor((i/rows)*list.length)+3;j++){\r\n              if(list[j] === undefined) break;\r\n              tmp.push(<th className=\"tablebutton\" onClick={e=>{this.props.updatematerial(list[j]);this.hideDialog();}}>\r\n                <h1 style={{\"font-size\":'10px',\"font-weight\":\"bold\"}}>{list[j]}</h1>\r\n                </th>);\r\n        }\r\n        tmp_mats.push(<tr>{tmp}</tr>);\r\n      }\r\n      this.setState({materials: tmp_mats});\r\n    }\r\n    \r\n  }\r\n  render(){\r\n    \r\n\r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Choose a material</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <FormControl type=\"text\" onChange={v=>{this.updateMaterials(v.target.value, this.state.table);}}placeholder=\"Search\" style={{\"margin\":\"20px\",\"width\":\"200px\"}}/>\r\n        <Row style={{\"margin\" : \"auto\"}}>\r\n        <Button style={{\"background-color\":\"gray\", \"color\": \"white\", \"border-radius\" : \"0\", \"border\": \"1px solid black\"}} disabled={this.state.element} onClick={()=>{this.changeTable(\"elements\");}}>Elements</Button>\r\n        <Button style={{\"background-color\":\"gray\", \"color\": \"white\", \"border-radius\" : \"0\", \"border\": \"1px solid black\"}} disabled={this.state.compound} onClick={()=>{this.changeTable(\"compounds\");}}>Compounds</Button>\r\n        </Row>\r\n            <Container style={{\"margin\" : \"auto\"}}>\r\n             {this.state.materials}\r\n\r\n            </Container>\r\n            \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default MaterialTable;\r\n","import Requests from \"./Reqs\";\r\n\r\n\r\n/*\r\nLogging class\r\n*/\r\nclass Logger {\r\n    //Create a log\r\n    static log(lvl, msg){\r\n        Requests.post(\"log\",{level: lvl, message: msg});\r\n    }\r\n    //get all logs\r\n    static async getLogs(){\r\n        let message = await (await Requests.get(\"log\")).text();\r\n\r\n        return message;\r\n    }\r\n}\r\n\r\nexport default Logger;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport { Button, Nav, Navbar, FormControl, Container, Col, Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { Vector3 } from '../utils/maths';\r\nimport MaterialList from './MaterialList';\r\nimport ConfirmDialog from '../graphics/ConfirmDialog';\r\nimport Parser from '../utils/Parser';\r\nimport MaterialTable from '../graphics/MaterialTable';\r\nimport STLParser from '../utils/STLParser';\r\nimport Model from '../rendering/model';\r\nimport UnitConverter from '../utils/UnitConverter';\r\nimport Logger from '../utils/Logger';\r\nimport VolumeList from '../volume/VolumeList';\r\nimport Error from '../utils/Error';\r\n\r\n/*\r\nThis class let's you modify a detector's parameters.\r\n*/\r\n\r\nclass DetectorEditDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.confirmDialog = React.createRef();\r\n    this.table = React.createRef();\r\n    this.updateMaterial = this.updateMaterial.bind(this);\r\n    this.updateGeometry = this.updateGeometry.bind(this);\r\n\r\n    this.state = {\r\n      show: false,\r\n      detname: this.props.detector.name,\r\n      detposx: this.props.detector.model.position.x / this.props.detector.units[0],\r\n      detposy: this.props.detector.model.position.y / this.props.detector.units[0],\r\n      detposz: this.props.detector.model.position.z / this.props.detector.units[0],\r\n      detrotx: this.props.detector.model.rotation.x / this.props.detector.units[1],\r\n      detroty: this.props.detector.model.rotation.y / this.props.detector.units[1],\r\n      detrotz: this.props.detector.model.rotation.z / this.props.detector.units[1],\r\n      detscalex: this.props.detector.model.scale.x / this.props.detector.units[2],\r\n      detscaley: this.props.detector.model.scale.y / this.props.detector.units[2],\r\n      detscalez: this.props.detector.model.scale.z / this.props.detector.units[2],\r\n      detmat: this.props.detector.material,\r\n      geomrty: this.props.detector.geometry,\r\n      posme: this.props.detector.units[0],\r\n      rotme: this.props.detector.units[1],\r\n      scaleme: this.props.detector.units[2],\r\n      showError: 'none',\r\n      modeldata: [],\r\n      display: 'none',\r\n      filelabel: \"\",\r\n      color: this.props.detector.model.color,\r\n      options: []\r\n    }\r\n    this.materials = [];\r\n  }\r\n  updateMaterial(m) {\r\n    this.setState({ detmat: m });\r\n  }\r\n  //this method converts a hex color to an RGB Vector\r\n  hexToRgb(hex) {\r\n    hex = hex.substr(1);\r\n    var bigint = parseInt(hex, 16);\r\n    var r = (bigint >> 16) & 255;\r\n    var g = (bigint >> 8) & 255;\r\n    var b = bigint & 255;\r\n\r\n    return new Vector3(r / 255, g / 255, b / 255);\r\n  }\r\n  componentDidMount() {\r\n\r\n  }\r\n  updateGeometry(g){\r\n    this.setState({geomrty: g});\r\n  }\r\n  async showDialog(volumes, detector) {\r\n    this.setState({ showError: 'none',show: true, geomrty: detector.geometry});\r\n    \r\n    let opt = volumes.map(e=>{\r\n    return <option value={e.name}>{e.name}</option>;\r\n    });\r\n    this.setState({options: opt});\r\n  }\r\n  hideDialog() {\r\n    this.setState({ show: false });\r\n  }\r\n  static id = 0;\r\n  render() {\r\n    const handleDelete = () => {\r\n      this.hideDialog();\r\n      this.props.removebutton(this.props.detector, this.props.button.id);\r\n    }\r\n    let mat = [];\r\n    if (MaterialList.get(this.state.detmat) == this.state.detmat) {\r\n      mat = <th className=\"tablebutton\" onClick={() => { this.table.current.showDialog(); }}><h1 style={{ \"font-size\": '10px', \"font-weight\": \"bold\" }}>{this.state.detmat}</h1></th>;\r\n    } else {\r\n      mat = <th className=\"tablebutton\" onClick={() => { this.table.current.showDialog(); }}>\r\n        <p style={{ \"font-size\": '12px' }}>{MaterialList.get(this.state.detmat).z}</p>\r\n        <h1 style={{ \"font-size\": '15px', \"font-weight\": \"bold\" }}>{MaterialList.get(this.state.detmat).symbol}</h1>\r\n        <p style={{ \"font-size\": '12px' }}>{MaterialList.get(this.state.detmat).name}</p></th>;\r\n    }\r\n    return <>\r\n      <MaterialTable ref={this.table} updatematerial={this.updateMaterial}></MaterialTable>\r\n      <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete this component?\" fun={handleDelete}></ConfirmDialog>\r\n      <Modal show={this.state.show} onHide={() => { this.hideDialog(); }}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify Detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form>\r\n            <Container>\r\n              <Row>\r\n                Name <Col><Form.Control\r\n                  className=\"name\"\r\n                  required\r\n                  type=\"text\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detname}\r\n                  onChange={(event) => { this.setState({ detname: event.target.value }); }} />\r\n                </Col>\r\n              </Row>\r\n              <hr />\r\n              <Row>\r\n                Geometry\r\n            </Row>\r\n\r\n              <Form.Control as=\"select\" value={this.state.geomrty} onChange={(evt) => {\r\n                this.setState({ geomrty: evt.target.value });\r\n                if (evt.target.value == \"stl\") this.setState({ display: 'block' });\r\n                else this.setState({ display: 'none' });\r\n              }}>\r\n\r\n                {/* <option value=\"cube\">Cube</option>\r\n            <option value=\"cylinder\">Cylinder</option>\r\n            <option value=\"sphere\">Sphere</option> */}\r\n                {this.state.options}\r\n\r\n                <option value=\"stl\">Custom (.STL)</option>\r\n              </Form.Control>\r\n\r\n              <Form.File\r\n                style={{ 'display': this.state.display }}\r\n                id=\"stl-file\"\r\n                label={this.state.filelabel}\r\n                data-browse=\"Open\"\r\n                custom\r\n                onChange={(evt) => {\r\n\r\n\r\n                  var r = new FileReader();\r\n\r\n                  r.onload = () => {\r\n                    var data = r.result;\r\n                    this.setState({ modeldata: data });\r\n                    if(this.state.filelabel.split(\".\")[this.state.filelabel.split(\".\").length - 1].toUpperCase() !== 'STL'){\r\n                      this.setState({filelabel: \"\",modeldata: []});\r\n                      Error.showError(\"Bad format\",\"Select an .stl file!\");\r\n                    }\r\n                  }\r\n                  r.readAsBinaryString(evt.target.files[0]);\r\n\r\n                  let path = evt.target.value;\r\n                  path = path.split(\"\\\\\")[path.split(\"\\\\\").length - 1];\r\n                  this.setState({ filelabel: path });\r\n                }}\r\n              />\r\n              <hr />\r\n              <Row>Position</Row>\r\n              <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.posme} onChange={(e)=>{this.setState({posme: e.target.value});}}>\r\n                <option value=\".1\">mm</option>\r\n                <option value=\"1\">cm</option>\r\n                <option value=\"10\">dm</option>\r\n                <option value=\"100\">m</option>\r\n                </Form.Control>\r\n              \r\n              <Row>\r\n                x<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detposx}\r\n                  onChange={(event) => { this.setState({ detposx: event.target.value }); }} />\r\n                </Col>\r\n            y<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detposy}\r\n                  onChange={(event) => { this.setState({ detposy: event.target.value }); }} />\r\n                </Col>\r\n            z<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detposz}\r\n                  onChange={(event) => { this.setState({ detposz: event.target.value }); }} />\r\n                </Col>\r\n              </Row>\r\n              <br />\r\n              <hr />\r\n              <Row>Rotation</Row>\r\n              <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.rotme} onChange={(e)=>{this.setState({rotme: e.target.value});}}>\r\n                <option value=\"0.0174\">deg</option>\r\n                <option value=\"1\">rad</option>\r\n                </Form.Control>\r\n              <Row>\r\n                x<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detrotx}\r\n                  onChange={(event) => { this.setState({ detrotx: event.target.value }); }} />\r\n                </Col>\r\n                \r\n            y<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detroty}\r\n                  onChange={(event) => { this.setState({ detroty: event.target.value }); }} />\r\n                </Col>\r\n            z<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detrotz}\r\n                  onChange={(event) => { this.setState({ detrotz: event.target.value }); }} />\r\n                </Col>\r\n              </Row>\r\n              <br />\r\n              <hr />\r\n              <Row>Scale</Row>\r\n              <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.scaleme} onChange={(e)=>{this.setState({scaleme: e.target.value});}}>\r\n                <option value=\".1\">mm</option>\r\n                <option value=\"1\">cm</option>\r\n                <option value=\"10\">dm</option>\r\n                <option value=\"100\">m</option>\r\n                </Form.Control>\r\n              <Row>\r\n                x<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detscalex}\r\n                  onChange={(event) => { this.setState({ detscalex: event.target.value }); }} />\r\n                </Col>\r\n            y<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detscaley}\r\n                  onChange={(event) => { this.setState({ detscaley: event.target.value }); }} />\r\n                </Col>\r\n            z<Col><Form.Control\r\n                  className=\"numspinner\"\r\n                  required\r\n                  value='0'\r\n                  type=\"number\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.detscalez}\r\n                  onChange={(event) => { this.setState({ detscalez: event.target.value }); }} />\r\n                </Col>\r\n              </Row>\r\n              <br />\r\n              <hr />\r\n              <Row>\r\n                <Form.Group controlId=\"exampleForm.SelectCustom\">\r\n                  <Form.Label>Material</Form.Label>\r\n                  {mat}\r\n                  <Button onClick={() => { this.table.current.showDialog(); }}>Choose</Button>\r\n                </Form.Group>\r\n\r\n              </Row>\r\n              <hr />\r\n              <Row>\r\n                Color: <span style={{ 'padding-left': '20px' }}>\r\n                  <input type=\"color\"\r\n                    onInput={(evt) => {\r\n                      this.setState({ color: this.hexToRgb(evt.target.value) });\r\n                    }}></input>\r\n                </span>\r\n              </Row>\r\n            </Container>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => {\r\n            this.confirmDialog.current.showDialog();\r\n          }} style={{ backgroundColor: 'red', color: 'white' }}>\r\n            Delete\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={async () => {\r\n            Logger.log(3, \"Modified detector\");\r\n            \r\n            if (this.state.geomrty == 'stl') {\r\n              //To-DO\r\n              //Create new volume if not in voluems\r\n              if(this.state.modeldata.length === 0){\r\n                Error.showError(\"No file selected\",\"Select an .stl file!\");\r\n                return;\r\n              }\r\n              this.state.geomrty = this.state.detname + \"Volume\";\r\n              let modelData = STLParser.parseData(this.state.modeldata);\r\n              this.props.createvolume(this.state.detname + \"Volume\",this.state.modeldata,this.state.detname + \"Volume\");\r\n              this.props.detector.model = new Model(modelData.vertices, modelData.normals, this.props.canvas.current.gl);\r\n              this.props.detector.model.drawLines = false;\r\n            } else {\r\n              let data = VolumeList.getVolume(this.state.geomrty).data;\r\n              let modeldata = STLParser.parseData(data);\r\n              this.props.detector.model = new Model(modeldata.vertices, modeldata.normals, this.props.canvas.current.gl);\r\n              this.props.detector.model.drawLines = false;\r\n            }\r\n            this.hideDialog();\r\n\r\n            this.props.detector.name = this.state.detname;\r\n\r\n            this.props.detector.model.position.x = this.state.detposx * this.state.posme;\r\n            this.props.detector.model.position.y = this.state.detposy * this.state.posme;\r\n            this.props.detector.model.position.z = this.state.detposz * this.state.posme;\r\n\r\n            this.props.detector.model.rotation.x = this.state.detrotx * this.state.rotme;\r\n            this.props.detector.model.rotation.y = this.state.detroty * this.state.rotme;\r\n            this.props.detector.model.rotation.z = this.state.detrotz * this.state.rotme;\r\n\r\n            this.props.detector.model.scale.x = this.state.detscalex * this.state.scaleme;\r\n            this.props.detector.model.scale.y = this.state.detscaley * this.state.scaleme;\r\n            this.props.detector.model.scale.z = this.state.detscalez * this.state.scaleme;\r\n\r\n            this.props.detector.material = this.state.detmat;\r\n\r\n            this.props.detector.model.color = this.state.color;\r\n\r\n            this.props.setname(this.state.detname);\r\n\r\n            let text = \"\";\r\n\r\n            let pm = UnitConverter.convertLength(this.state.posme);\r\n            \r\n            let rm = UnitConverter.convertAngle(this.state.rotme);\r\n            let sm = UnitConverter.convertLength(this.state.scaleme);\r\n            \r\n            for (let i = 0; i < Parser.chunks.length; i++) {\r\n              if (this.props.buttonid == Parser.chunks[i].id) {\r\n                Parser.chunks[i].code = \"\\\\Detector{\\n\" +\r\n                  \"\\tname: \" + '\"' + this.state.detname + '\";\\n' +\r\n                  \"\\tposition[\" + pm + \"]: \" + this.state.detposx + \", \" + this.state.detposy + \", \" + this.state.detposz + \";\\n\" +\r\n                  \"\\trotation[\" + rm + \"]: \" + this.state.detrotx + \", \" + this.state.detroty + \", \" + this.state.detrotz + \";\\n\" +\r\n                  \"\\tscale[\" + sm + \"]: \" + this.state.detscalex + \", \" + this.state.detscaley + \", \" + this.state.detscalez + \";\\n\" +\r\n                  \"\\tmaterial: \" + '\"' + this.state.detmat + '\";\\n' +\r\n                  \"\\tgeometry: \" + '\"' + this.state.geomrty + '\";\\n' + \r\n                  \"}\\n\";\r\n              }\r\n              text += Parser.chunks[i].code;\r\n            }\r\n\r\n            this.props.codeeditor.current.updateText(text);\r\n\r\n            this.props.updatedetails(this.props.detector);\r\n          }}>\r\n            Modify\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  }\r\n}\r\n\r\nexport default DetectorEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure, Col, Row, Container} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport image from '../images/editicon.png';\r\nimport DetectorEditDialog from './DetectorEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport UnitConverter from '../utils/UnitConverter';\r\nimport { Vector3 } from '../utils/maths';\r\n\r\n/*\r\nClass handling detector buttons, clicking it shows an accordion containing the detectors parameters.\r\nClicking edit shows a dialog where you can modify the detector.\r\n*/\r\n\r\nclass DetectorButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.setName = this.setName.bind(this);\r\n    this.state = {position: this.props.detector.model.position, rotation: this.props.detector.model.rotation, scale: this.props.detector.model.scale,\r\n    deposit: this.props.detector.deposit, material: this.props.detector.material, punit: this.props.detector.units[0], runit: this.props.detector.units[1],\r\n  sunit: this.props.detector.units[2], name: this.props.name}\r\n    \r\n    this.id = this.props.id;\r\n    this.accordion = React.createRef();\r\n  }\r\n  static id = 0;\r\n  componentDidMount(){\r\n    \r\n  }\r\n  updateDetails(d){\r\n    this.setState({deposit: d.deposit, name: d.name, position: d.model.position, rotation: d.model.rotation, scale: d.model.scale, material: d.material, punit: d.units[0], runit: d.units[1], sunit: d.units[2]});\r\n  }\r\n  updateGeometry(g){\r\n    this.editdialog.updateGeometry(g);\r\n  }\r\n  setName(n){\r\n    this.setState({name: n});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <DetectorEditDialog createvolume = {this.props.createvolume} setname={this.setName} canvas={this.props.canvas} name={this.props.name} buttonid={this.id} codeeditor={this.props.codeeditor} updatedetails={this.updateDetails} button={this} removebutton={this.props.removebutton}\r\n      detector={this.props.detector} ref={this.editdialog} buttons={this.props.buttons} details={this.props.details}></DetectorEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle ref={this.accordion} as={Button} onClick={()=>{\r\n          if(RenderSystem.active_id == this.props.detector.id){\r\n            RenderSystem.active_id = -1;\r\n            return;\r\n          }\r\n          RenderSystem.active_id = this.props.detector.id;\r\n          }} variant=\"link\" eventKey={this.id}>\r\n          {this.state.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog(this.props.volumes,this.props.detector);}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey={this.id}>\r\n        <Card.Body>\r\n        <Container>\r\n      <Row>\r\n        <Col>Position: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.state.position.x} {UnitConverter.convertLength(this.state.punit)}</Col>\r\n        <Col>y: {this.state.position.y} {UnitConverter.convertLength(this.state.punit)}</Col>\r\n        <Col>z: {this.state.position.z} {UnitConverter.convertLength(this.state.punit)}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>Rotation: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.state.rotation.x} {UnitConverter.convertAngle(this.state.runit)}</Col>\r\n        <Col>y: {this.state.rotation.y} {UnitConverter.convertAngle(this.state.runit)}</Col>\r\n        <Col>z: {this.state.rotation.z} {UnitConverter.convertAngle(this.state.runit)}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>Scale: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.state.scale.x} {UnitConverter.convertLength(this.state.sunit)}</Col>\r\n        <Col>y: {this.state.scale.y} {UnitConverter.convertLength(this.state.sunit)}</Col>\r\n        <Col>z: {this.state.scale.z} {UnitConverter.convertLength(this.state.sunit)}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>Material: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>{this.state.material}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>Deposit: </Col>\r\n        <Col>{this.state.deposit} keV</Col>\r\n      </Row>\r\n    </Container>\r\n          </Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default DetectorButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport DetectorButton from './DetectorButton';\r\nimport MaterialList from './MaterialList';\r\nimport { Vector3 } from '../utils/maths';\r\nimport MaterialTable from '../graphics/MaterialTable';\r\nimport Error from '../utils/Error';\r\n\r\n/*\r\nThis dialog pops up when creating a detector. Let's you specify the detector's parameters.\r\n*/\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.updateMaterial = this.updateMaterial.bind(this);\r\n    this.table = React.createRef();\r\n    this.state = {show: false, \r\n      detname: 'Detector',\r\n      detposx: 0,\r\n      detposy: 0,\r\n      detposz: 0,\r\n      detrotx: 0,\r\n      detroty: 0,\r\n      detrotz: 0,\r\n      detscalex: 10,\r\n      detscaley: 10,\r\n      detscalez: 10,\r\n      posme: 1,\r\n      rotme: 1,\r\n      scaleme: 1,\r\n      detmat: 'Pb',\r\n      geomrty: 'cube',\r\n      display: 'none',\r\n      filelabel: 'Path to STL',\r\n      modeldata: null,\r\n      showError: 'none',\r\n      color: new Vector3(.5,.5,.5),\r\n      options: []\r\n     }\r\n     \r\n  }\r\n  updateMaterial(m){\r\n    this.setState({detmat: m});\r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  //this method converts a hex color to an RGB Vector\r\n  hexToRgb(hex) {\r\n    hex = hex.substr(1);\r\n    var bigint = parseInt(hex, 16);\r\n    var r = (bigint >> 16) & 255;\r\n    var g = (bigint >> 8) & 255;\r\n    var b = bigint & 255;\r\n\r\n    return new Vector3(r / 255, g / 255, b / 255);\r\n  }\r\n  async showDialog(volumes){\r\n      MaterialList.getElement(\"All\");\r\n      this.setState({show: true});\r\n      let detectorName = 'Detector' + this.props.buttons.length;\r\n      this.setState({detname: detectorName});\r\n      this.setState({geomrty: volumes[0].name});\r\n      \r\n      let opt = volumes.map(e=>{\r\n      return <option value={e.name}>{e.name}</option>;\r\n      });\r\n      this.setState({options: opt});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    let mat = [];\r\n    if(MaterialList.get(this.state.detmat) == this.state.detmat){\r\n      mat = <th className=\"tablebutton\" onClick={()=>{this.table.current.showDialog();}}><h1 style={{\"font-size\":'10px',\"font-weight\":\"bold\"}}>{this.state.detmat}</h1></th>;\r\n    }else{\r\n      mat = <th className=\"tablebutton\" onClick={()=>{this.table.current.showDialog();}}>\r\n      <p style={{\"font-size\":'12px'}}>{MaterialList.get(this.state.detmat).z}</p>\r\n      <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\"}}>{MaterialList.get(this.state.detmat).symbol}</h1>\r\n      <p style={{\"font-size\":'12px'}}>{MaterialList.get(this.state.detmat).name}</p></th>;\r\n    }\r\n    return <>\r\n        <MaterialTable ref={this.table} updatematerial={this.updateMaterial}></MaterialTable>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Create detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <hr />\r\n            <Row>\r\n              Geometry\r\n            </Row>\r\n\r\n            <Form.Control as=\"select\" value={this.state.geomrty} onChange={(evt)=>{\r\n              this.setState({geomrty: evt.target.value});\r\n              if(evt.target.value == \"stl\") this.setState({display: 'block'});\r\n              else this.setState({display: 'none'});}}>\r\n\r\n            {/* <option value=\"cube\">Cube</option>\r\n            <option value=\"cylinder\">Cylinder</option>\r\n            <option value=\"sphere\">Sphere</option> */}\r\n            {this.state.options}\r\n\r\n            <option value=\"stl\">Custom (.STL)</option>\r\n            </Form.Control>\r\n\r\n            <Form.File \r\n            style={{'display':this.state.display}}\r\n            id=\"stl-file\"\r\n            label={this.state.filelabel}\r\n            data-browse=\"Open\"\r\n            custom\r\n            onChange={(evt)=>{\r\n\r\n\r\n              var r = new FileReader();\r\n\r\n              r.onload = ()=>{\r\n                var data = r.result;\r\n                this.setState({modeldata: data});\r\n                if(this.state.filelabel.split(\".\")[this.state.filelabel.split(\".\").length - 1].toUpperCase() !== 'STL'){\r\n                  this.setState({filelabel: \"\",modeldata: null});\r\n                  Error.showError(\"Bad format\",\"Select an .stl file!\");\r\n                }\r\n              }\r\n              r.readAsBinaryString(evt.target.files[0]);\r\n\r\n              let path = evt.target.value;\r\n              path = path.split(\"\\\\\")[path.split(\"\\\\\").length-1];\r\n              this.setState({filelabel: path});\r\n              \r\n            }}\r\n          />\r\n            <hr />\r\n            <Row>Position</Row>\r\n            <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.posme} onChange={(e)=>{this.setState({posme: e.target.value});}}>\r\n                <option value=\".1\">mm</option>\r\n                <option value=\"1\">cm</option>\r\n                <option value=\"10\">dm</option>\r\n                <option value=\"100\">m</option>\r\n                </Form.Control>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>Rotation</Row>\r\n          <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.rotme} onChange={(e)=>{this.setState({rotme: e.target.value});}}>\r\n                <option value=\"0.0174\">deg</option>\r\n                <option value=\"1\">rad</option>\r\n                </Form.Control>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detrotx}\r\n            onChange={(event)=>{this.setState({detrotx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detroty}\r\n            onChange={(event)=>{this.setState({detroty: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detrotz}\r\n            onChange={(event)=>{this.setState({detrotz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>Scale</Row>\r\n          <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.scaleme} onChange={(e)=>{this.setState({scaleme: e.target.value});}}>\r\n                <option value=\".1\">mm</option>\r\n                <option value=\"1\">cm</option>\r\n                <option value=\"10\">dm</option>\r\n                <option value=\"100\">m</option>\r\n                </Form.Control>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscalex}\r\n            onChange={(event)=>{this.setState({detscalex: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscaley}\r\n            onChange={(event)=>{this.setState({detscaley: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscalez}\r\n            onChange={(event)=>{this.setState({detscalez: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>\r\n          <Form.Group controlId=\"exampleForm.SelectCustom\">\r\n            \r\n            <Form.Label>Material</Form.Label>\r\n           {mat}\r\n            <Button onClick={()=>{this.table.current.showDialog();}}>Choose</Button>\r\n            \r\n          </Form.Group>\r\n          \r\n          </Row>\r\n          <hr />\r\n          <Row>\r\n          Color: <span style={{'padding-left':'20px'}}>\r\n          <input type=\"color\"\r\n          onInput={(evt)=>{\r\n            this.setState({color: this.hexToRgb(evt.target.value)});\r\n          }}></input>\r\n            </span>\r\n        </Row>\r\n          </Container>\r\n        </Form>\r\n        \r\n        \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n            if(this.state.modeldata === null && this.state.geomrty === 'stl'){\r\n              Error.showError(\"No file selected\",\"Select an .stl file!\");\r\n              return;\r\n          }\r\n          this.hideDialog();\r\n          this.props.createbutton(this.state.detname, this.state.detposx, this.state.detposy,this.state.detposz,\r\n            this.state.detrotx, this.state.detroty, this.state.detrotz, this.state.detscalex, this.state.detscaley, this.state.detscalez, this.state.detmat, this.state.geomrty,\r\n            this.state.modeldata,this.state.color, false, this.state.posme, this.state.rotme, this.state.scaleme);}}>\r\n            Create\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport ConfirmDialog from '../graphics/ConfirmDialog';\r\nimport Parser from '../utils/Parser';\r\nimport UnitConverter from \"../utils/UnitConverter\";\r\n\r\nclass GunEditDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.confirmDialog = React.createRef();\r\n\r\n    this.state = {show: false, \r\n      detname: this.props.detector.name,\r\n      detposx: this.props.detector.model.position.x / this.props.detector.units[0],\r\n      detposy: this.props.detector.model.position.y / this.props.detector.units[0],\r\n      detposz: this.props.detector.model.position.z / this.props.detector.units[0],\r\n      detdirx: this.props.detector.direction.x,\r\n      detdiry: this.props.detector.direction.y,\r\n      detdirz: this.props.detector.direction.z,\r\n      posu: this.props.detector.units[0],\r\n      energyu: this.props.detector.units[1],\r\n      energy: this.props.detector.energy / this.props.detector.units[1]}\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    const handleDelete = ()=>{\r\n      this.hideDialog();\r\n      this.props.removebutton(this.props.detector, this.props.button.id);\r\n    }\r\n    return <>\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete this component?\" fun={handleDelete}></ConfirmDialog>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify Gun</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <Row>Position</Row>\r\n            <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.posu} onChange={(e)=>{this.setState({posu: e.target.value});}}>\r\n                <option value=\".1\">mm</option>\r\n                <option value=\"1\">cm</option>\r\n                <option value=\"10\">dm</option>\r\n                <option value=\"100\">m</option>\r\n                </Form.Control>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <Row>Direction</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirx}\r\n            onChange={(event)=>{this.setState({detdirx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdiry}\r\n            onChange={(event)=>{this.setState({detdiry: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirz}\r\n            onChange={(event)=>{this.setState({detdirz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          \r\n          <br/>\r\n          <Row>\r\n            Energy <Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.energy}\r\n            onChange={(event)=>{this.setState({energy: event.target.value});}} />\r\n            \r\n            </Col>\r\n            <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.energyu} onChange={(e)=>{this.setState({energyu: e.target.value});}}>\r\n                <option value=\"1\">eV</option>\r\n                <option value=\"1000\">keV</option>\r\n                <option value=\"1000000\">MeV</option>\r\n                <option value=\"1000000000\">GeV</option>\r\n                </Form.Control>\r\n          </Row>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{\r\n            this.confirmDialog.current.showDialog();\r\n          }} style={{backgroundColor: 'red', color: 'white'}}>\r\n            Delete\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();\r\n\r\n            this.props.detector.name = this.state.name;\r\n\r\n            this.props.detector.model.position.x = this.state.detposx * this.state.posu;\r\n            this.props.detector.model.position.y = this.state.detposy * this.state.posu;\r\n            this.props.detector.model.position.z = this.state.detposz * this.state.posu;\r\n            \r\n            this.props.detector.direction.x = this.state.detdirx;\r\n            this.props.detector.direction.y = this.state.detdiry;\r\n            this.props.detector.direction.z = this.state.detdirz;\r\n            \r\n            \r\n            this.props.detector.energy = this.state.energy * this.state.energyu;\r\n\r\n            let text = \"\";\r\n            for(let i = 0;i<Parser.chunks.length;i++){\r\n              if(this.props.buttonid == Parser.chunks[i].id){\r\n                Parser.chunks[i].code = \"\\\\Gun{\\n\" +\r\n                \"\\tname: \" + '\"' + this.props.name + '\";\\n' + \r\n                \"\\tposition[\" + UnitConverter.convertLength(this.state.posu) + \"]: \" + this.state.detposx + \", \" + this.state.detposy + \", \" + this.state.detposz + \";\\n\" + \r\n                \"\\tdirection: \" + this.state.detdirx + \", \" + this.state.detdiry + \", \" + this.state.detdirz + \";\\n\" + \r\n                \"\\tenergy[\" + UnitConverter.convertEnergy(this.state.energyu) + \"]: \" +  this.state.energy + ';\\n' + \r\n                \"}\\n\";\r\n              }\r\n              text += Parser.chunks[i].code;\r\n            }\r\n\r\n            this.props.codeeditor.current.updateText(text);\r\n\r\n            this.props.updatedetails(\r\n           this.props.detector\r\n            );            \r\n            }}>\r\n            Modify\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default GunEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure, Row, Col, Container} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport GunEditDialog from './GunEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport UnitConverter from '../utils/UnitConverter';\r\n\r\nclass GunButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.state = {detector: this.props.detector};\r\n    this.id = this.props.id;\r\n    this.accordion = React.createRef();\r\n\r\n  }\r\n  static id = 0;\r\n  updateDetails(d){\r\n    this.setState({detector: d});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <GunEditDialog buttonid={this.id} codeeditor={this.props.codeeditor} name={this.props.name} updatedetails={this.updateDetails} button={this} removebutton={this.props.removebutton}\r\n      detector={this.props.detector} ref={this.editdialog} buttons={this.props.buttons} details={this.props.details}></GunEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n      <Accordion.Toggle ref={this.accordion} as={Button} onClick={()=>{\r\n          if(RenderSystem.active_id == this.props.detector.id){\r\n            RenderSystem.active_id = -1;\r\n            return;\r\n          }\r\n          RenderSystem.active_id = this.props.detector.id;\r\n          }} variant=\"link\" eventKey={this.id}>\r\n          {this.props.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog();}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey={this.id}>\r\n      <Card.Body>\r\n      <Container>\r\n      <Row>\r\n        <Col>Position: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.state.detector.model.position.x} {UnitConverter.convertLength(this.state.detector.units[0])}</Col>\r\n        <Col>y: {this.state.detector.model.position.y} {UnitConverter.convertLength(this.state.detector.units[0])}</Col>\r\n        <Col>z: {this.state.detector.model.position.z} {UnitConverter.convertLength(this.state.detector.units[0])}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>Direction: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.state.detector.direction.x} </Col>\r\n        <Col>y: {this.state.detector.direction.y} </Col>\r\n        <Col>z: {this.state.detector.direction.z} </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>Energy: {this.state.detector.energy} {UnitConverter.convertEnergy(this.state.detector.units[1])}</Col>\r\n      </Row>\r\n    </Container>\r\n    </Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default GunButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport GunButton from '../gun/GunButton';\r\n\r\nclass GunDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false, \r\n      detname: 'Gun',\r\n      detposx: 0,\r\n      detposy: 0,\r\n      detposz: 0,\r\n      detdirx: 1,\r\n      detdiry: 0,\r\n      detdirz: 0,\r\n      posu: 1,\r\n      energyu: 1000,\r\n      energy: 100 }\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Create Particle Gun</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <Row>Position</Row>\r\n            <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.posu} onChange={(e)=>{this.setState({posu: e.target.value});}}>\r\n                <option value=\".1\">mm</option>\r\n                <option value=\"1\">cm</option>\r\n                <option value=\"10\">dm</option>\r\n                <option value=\"100\">m</option>\r\n                </Form.Control>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <Row>Direction</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirx}\r\n            onChange={(event)=>{this.setState({detdirx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdiry}\r\n            onChange={(event)=>{this.setState({detdiry: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirz}\r\n            onChange={(event)=>{this.setState({detdirz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          \r\n          <Row>\r\n            Energy <Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.energy}\r\n            onChange={(event)=>{this.setState({energy: event.target.value});}} />\r\n            </Col>\r\n            <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.energyu} onChange={(e)=>{this.setState({energyu: e.target.value});}}>\r\n                <option value=\"1\">eV</option>\r\n                <option value=\"1000\">keV</option>\r\n                <option value=\"1000000\">MeV</option>\r\n                <option value=\"1000000000\">GeV</option>\r\n                </Form.Control>\r\n          </Row>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();this.props.createbutton(this.state.detname, this.state.detposx, this.state.detposy, this.state.detposz,\r\n            this.state.detdirx, this.state.detdiry, this.state.detdirz, this.state.energy, false, this.state.posu, this.state.energyu);}}>\r\n            Create\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default GunDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Modal, Button, Table, Container, Col, FormControl, Row} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport MaterialList from '../detector/MaterialList';\r\n\r\nclass SourceTable extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false, materials: []};\r\n  }\r\n  componentDidMount(){\r\n   this.updateMaterials(\"\", this.state.table);\r\n    \r\n  }\r\n  showDialog(){\r\n    this.updateMaterials(\"\");\r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  updateMaterials(s, t){\r\n      let list = MaterialList.sources.filter(x => x.toUpperCase().includes(s.toUpperCase()));\r\n      let tmp_mats = [];\r\n      let rows = Math.ceil(list.length / 5);    \r\n      for(let i = 0;i<rows;i++){\r\n        let tmp = [];\r\n        for(let j = Math.floor((i/rows)*list.length);j<Math.floor((i/rows)*list.length)+5;j++){\r\n              if(list[j] === undefined) break;\r\n              tmp.push(<th className=\"tablebutton\" onClick={e=>{this.props.updatematerial(list[j]);this.hideDialog();}}>\r\n                \r\n                <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\"}}>{list[j]}</h1>\r\n               \r\n                </th>);\r\n        }\r\n        tmp_mats.push(<tr>{tmp}</tr>);\r\n      }\r\n      this.setState({materials: tmp_mats});\r\n    \r\n    \r\n  }\r\n  render(){\r\n    \r\n\r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Choose a material</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <FormControl type=\"text\" onChange={v=>{this.updateMaterials(v.target.value, this.state.table);}}placeholder=\"Search\" style={{\"margin\":\"20px\",\"width\":\"200px\"}}/>\r\n        <Row style={{\"margin\" : \"auto\"}}>\r\n        </Row>\r\n            <Container style={{\"margin\" : \"auto\"}}>\r\n             {this.state.materials}\r\n\r\n            </Container>\r\n            \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default SourceTable;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport ConfirmDialog from '../graphics/ConfirmDialog';\r\nimport Parser from '../utils/Parser';\r\nimport SourceTable from '../graphics/SourceTable';\r\nimport UnitConverter from \"../utils/UnitConverter\";\r\n\r\nclass SourceEditDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.updateMaterial = this.updateMaterial.bind(this);\r\n\r\n    this.confirmDialog = React.createRef();\r\n    this.table = React.createRef();\r\n    this.state = {show: false, \r\n      detname: this.props.detector.name,\r\n      detposx: this.props.detector.model.position.x / this.props.detector.units[0],\r\n      detposy: this.props.detector.model.position.y / this.props.detector.units[0],\r\n      detposz: this.props.detector.model.position.z / this.props.detector.units[0],\r\n      posu: this.props.detector.units[0],\r\n      material: this.props.detector.material}\r\n    \r\n  }\r\n  updateMaterial(m){\r\n    this.setState({material: m});\r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    const handleDelete = ()=>{\r\n      this.hideDialog();\r\n      this.props.removebutton(this.props.detector, this.props.button.id);\r\n    }\r\n    return <>\r\n        <SourceTable ref={this.table} updatematerial={this.updateMaterial}></SourceTable>\r\n\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete this component?\" fun={handleDelete}></ConfirmDialog>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify Source</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <hr />\r\n            <Row>Position</Row>\r\n            <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.posu} onChange={(e)=>{this.setState({posu: e.target.value});}}>\r\n                <option value=\".1\">mm</option>\r\n                <option value=\"1\">cm</option>\r\n                <option value=\"10\">dm</option>\r\n                <option value=\"100\">m</option>\r\n                </Form.Control>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          \r\n          <br/>\r\n          <hr />\r\n          <Form.Group>\r\n          Material \r\n                <th className=\"tablebutton\" onClick={e=>{this.table.current.showDialog();}}>\r\n                <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}}>{this.state.material}</h1>\r\n                </th>\r\n          </Form.Group>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{\r\n             this.confirmDialog.current.showDialog();\r\n          }} style={{backgroundColor: 'red', color: 'white'}}>\r\n            Delete\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();\r\n\r\n            this.props.detector.name = this.state.name;\r\n\r\n            this.props.detector.model.position.x = this.state.detposx * this.state.posu;\r\n            this.props.detector.model.position.y = this.state.detposy * this.state.posu;\r\n            this.props.detector.model.position.z = this.state.detposz * this.state.posu;\r\n            \r\n            \r\n            this.props.detector.material = this.state.material;\r\n\r\n            let text = \"\";\r\n            for(let i = 0;i<Parser.chunks.length;i++){\r\n              if(this.props.buttonid == Parser.chunks[i].id){\r\n                Parser.chunks[i].code = \"\\\\Source{\\n\" +\r\n                \"\\tname: \" + '\"' + this.props.name + '\";\\n' + \r\n                \"\\tposition[\" + UnitConverter.convertLength(this.state.posu) + \"]: \" + this.state.detposx + \", \" + this.state.detposy + \", \" + this.state.detposz + \";\\n\" + \r\n                \"\\tmaterial: \" + '\"' + this.state.material + '\";\\n' + \r\n              \"}\\n\";\r\n              }\r\n              text += Parser.chunks[i].code;\r\n            }\r\n\r\n            this.props.codeeditor.current.updateText(text);\r\n\r\n            this.props.updatedetails(this.props.detector);            \r\n            }}>\r\n            Modify\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default SourceEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure, Row, Container, Col} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport SourceEditDialog from './SourceEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport UnitConverter from '../utils/UnitConverter';\r\n\r\nclass SourceButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.state = {detector: this.props.detector\r\n    };\r\n    this.id = this.props.id;\r\n    this.accordion = React.createRef();\r\n  }\r\n  static id = 0;\r\n  componentDidMount(){\r\n  }\r\n  updateDetails(d){\r\n    this.setState({detector: d});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <SourceEditDialog codeeditor={this.props.codeeditor} name={this.props.name} buttonid={this.id} updatedetails={this.updateDetails} button={this} removebutton={this.props.removebutton}\r\n      detector={this.props.detector} ref={this.editdialog} buttons={this.props.buttons} details={this.props.details}></SourceEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle ref={this.accordion} as={Button} onClick={()=>{\r\n          if(RenderSystem.active_id == this.props.detector.id){\r\n            RenderSystem.active_id = -1;\r\n            return;\r\n          }\r\n          RenderSystem.active_id = this.props.detector.id;\r\n          }} variant=\"link\" eventKey={this.id}>\r\n          {this.props.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog();}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey={this.id}>\r\n      <Card.Body>\r\n      <Container>\r\n      <Row>\r\n        <Col>Position: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.state.detector.model.position.x} {UnitConverter.convertLength(this.state.detector.units[0])}</Col>\r\n        <Col>y: {this.state.detector.model.position.y} {UnitConverter.convertLength(this.state.detector.units[0])}</Col>\r\n        <Col>z: {this.state.detector.model.position.z} {UnitConverter.convertLength(this.state.detector.units[0])}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>Material: {this.props.detector.material}</Col>\r\n      </Row>\r\n    </Container>\r\n      </Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default SourceButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport SourceButton from '../source/SourceButton';\r\nimport SourceTable from '../graphics/SourceTable';\r\n\r\nclass SourceDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.updateMaterial = this.updateMaterial.bind(this);\r\n    this.table = React.createRef();\r\n    this.state = {show: false, \r\n      detname: 'Detector',\r\n      detposx: 0,\r\n      detposy: 0,\r\n      detposz: 0,\r\n      posu: 1,\r\n      material: 'Co60' }\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  updateMaterial(m){\r\n    this.setState({material: m});\r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n      let detectorName = 'Source' + this.props.buttons.length;\r\n      this.setState({detname: detectorName});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    \r\n    return <>\r\n        <SourceTable ref={this.table} updatematerial={this.updateMaterial}></SourceTable>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Create Particle Source</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <hr />\r\n            <Row>Position</Row>\r\n            <Form.Control as=\"select\" style={{\"width\":\"100px\",\"margin-left\":\"-15px\",\"margin-bottom\":\"10px\"}} value={this.state.posu} onChange={(e)=>{this.setState({posu: e.target.value});}}>\r\n                <option value=\".1\">mm</option>\r\n                <option value=\"1\">cm</option>\r\n                <option value=\"10\">dm</option>\r\n                <option value=\"100\">m</option>\r\n                </Form.Control>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          \r\n          <br/>\r\n          <br/>\r\n          <hr />\r\n          <Form.Group>\r\n          Material \r\n                <th className=\"tablebutton\" onClick={e=>{this.table.current.showDialog();}}>\r\n                <h1 style={{\"font-size\":'15px',\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}}>{this.state.material}</h1>\r\n                </th>\r\n          </Form.Group>\r\n           \r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();this.props.createbutton(this.state.detname,  this.state.detposx, this.state.detposy, this.state.detposz,\r\n            this.state.material, false, this.state.posu);}}>\r\n            Create\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default SourceDialog;\r\n","// module.exports = ()=>{\r\n    \r\n//     let logged_in = false;\r\n\r\n//     let process_id = null;\r\n\r\n//     let login = (name, password)=>{\r\n//         fetch('http://localhost:9000/userAPI/login', {\r\n//             headers: {\r\n//               'Accept': 'application/json',\r\n//               'Content-Type': 'application/json'\r\n//             },\r\n//             method: 'POST',\r\n//             body: JSON.stringify({ name: name, password: password })\r\n//           })\r\n//             .then(response => response.text())\r\n//             .then(response => {\r\n//               if(response === \"Successfull login!\") logged_in = true;\r\n//             });\r\n//     }\r\n// }\r\nimport Requests from \"./Reqs\";\r\n\r\nclass User {\r\n  static logged_in = false;\r\n  static process_id = null;\r\n  static login(name, password) {\r\n    fetch('http://localhost:9000/userAPI/login', {\r\n            headers: {\r\n              'Accept': 'application/json',\r\n              'Content-Type': 'application/json'\r\n            },\r\n            method: 'POST',\r\n            body: JSON.stringify({ name: name, password: password })\r\n          })\r\n            .then(response => response.text())\r\n            .then(response => {\r\n              if(response === \"Successfull login!\"){\r\n                User.logged_in = true;\r\n              }\r\n            });\r\n  }\r\n}\r\n\r\nexport default User;","import React, { Component, createRef } from 'react';\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal, Spinner, ProgressBar} from 'react-bootstrap';\r\nimport Requests from \"../utils/Reqs\";\r\nimport User from \"../utils/User\";\r\n\r\nclass RunDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {numberOfParticles: 100,show: false, loading: false, progress: 0}\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.setLoading = this.setLoading.bind(this);\r\n        this.startProgress = this.startProgress.bind(this);\r\n        this.id = 0;\r\n    }\r\n    hideDialog(){\r\n        this.setState({show: false});\r\n        clearInterval(this.id);\r\n        \r\n    }\r\n    startProgress(){\r\n      this.setState({progress: 0});\r\n      this.id = setInterval(()=>{\r\n        Requests.post(\"gammaAPI/progress\",{id: User.process_id}) .then(response => response.text())\r\n        .then(response => {\r\n          console.log(response);\r\n          if(response.length > 0) this.setState({progress: parseInt(response)});\r\n        });\r\n      },1000);\r\n    }\r\n    showDialog(){\r\n        this.setState({show: true,loading: false});\r\n    }\r\n    setLoading(b){\r\n      this.setState({loading: b});\r\n    }\r\n    render(){\r\n      if(this.state.loading){\r\n        return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Run simulation</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Row style={{margin: '5px'}}>\r\n                Runnig simulation\r\n            </Row>\r\n            <ProgressBar now={this.state.progress} label={this.state.progress + \"%\"}></ProgressBar>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={()=>{\r\n         Requests.post(\"gammaAPI/cancel\",{id: User.process_id});\r\n          this.hideDialog();\r\n          }}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n            this.props.runsim(this.state.numberOfParticles);\r\n            }}>\r\n            Run\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n      }\r\n        return <>\r\n    <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n    <Modal.Header closeButton>\r\n      <Modal.Title>Run simulation</Modal.Title>\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n        <Row style={{margin: '5px'}}>\r\n            Number of particles: \r\n        </Row>\r\n    <Form onSubmit={e=>{e.preventDefault();}}>\r\n        <Form.Control required\r\n        type=\"number\"\r\n        value={this.state.numberOfParticles}\r\n        onChange={(evt)=>{if(evt.target.value.length < 6) this.setState({numberOfParticles: evt.target.value});}}>\r\n        </Form.Control>\r\n    </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n    <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n        Cancel\r\n      </Button>\r\n      <Button variant=\"primary\" onClick={()=>{\r\n        this.setLoading(true);\r\n        this.startProgress();\r\n        this.props.runsim(this.state.numberOfParticles, this.hideDialog);}}>\r\n        Run\r\n      </Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n</> \r\n    \r\n      \r\n        \r\n    }\r\n}\r\nexport default RunDialog;","import React, { Component, createRef } from 'react';\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal, ProgressBar, Spinner} from 'react-bootstrap';\r\nimport Requests from \"../utils/Reqs\";\r\nimport User from \"../utils/User\";\r\n\r\nclass SpectrumDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {numberofparticles: 1000, detector: 0,show: false, loading: false, now: 60, binsize: 10, progress: 0}\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.setLoading = this.setLoading.bind(this);\r\n        this.startProgress = this.startProgress.bind(this);\r\n        this.id = 0;\r\n    }\r\n    hideDialog(){\r\n        this.setState({show: false});\r\n        clearInterval(this.id);\r\n        Requests.post(\"gammaAPI/cancel\",{id: User.process_id});\r\n    }\r\n    setLoading(b){\r\n        this.setState({loading: b});\r\n    }\r\n    startProgress(){\r\n        this.setState({progress: 0});\r\n        this.id = setInterval(()=>{\r\n          Requests.post(\"gammaAPI/progress\",{id: User.process_id}) .then(response => response.text())\r\n          .then(response => {\r\n            console.log(response);\r\n            if(response.length > 0) this.setState({progress: parseInt(response)});\r\n          });\r\n        },1000);\r\n      }\r\n    showDialog(){\r\n        this.setState({show: true, loading: false});\r\n    }\r\n    render(){\r\n        if(this.state.loading){\r\n            return <Modal show={this.state.show}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Configure Spectroscopy</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n            <Row style={{margin: '5px'}}>\r\n                Runnig simulation\r\n            </Row>\r\n            <ProgressBar now={this.state.progress} label={this.state.progress + \"%\"}></ProgressBar>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n        }\r\n        let options = [];\r\n        for(let i = 0;i<this.props.detectors.length;i++){\r\n            options.push(<option value={this.props.detectors[i].id}>{this.props.detectors[i].name}</option>)\r\n        }\r\n\r\n        return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Configure Spectroscopy</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n            <Row style={{margin: '5px'}}>\r\n                Select detector \r\n            </Row>\r\n        <Form>\r\n        <Form.Control as=\"select\" value={this.state.detector} onChange={(evt)=>{this.setState({detector: evt.target.value});}}>\r\n            {options}\r\n            </Form.Control>\r\n            <hr />\r\n            <Row style={{margin: '5px'}}>\r\n                Number of particles\r\n            </Row>\r\n        <Form.Control\r\n        className=\"numspinner\"\r\n        required\r\n        value='0'\r\n        type=\"number\"\r\n        maxLength=\"10\"\r\n        value = {this.state.numberofparticles}\r\n        onChange={(event)=>{this.setState({numberofparticles: event.target.value});}} />\r\n        <hr />\r\n        <Row style={{margin: '5px'}}>\r\n                Bin size\r\n            </Row>\r\n            <Row>\r\n            <Form.Control\r\n        className=\"numspinner\"\r\n        required\r\n        value='0'\r\n        type=\"number\"\r\n        maxLength=\"10\"\r\n        value = {this.state.binsize}\r\n        style={{'width':'20%','margin':'15px'}}\r\n        onChange={(event)=>{this.setState({binsize: event.target.value});}} />\r\n        <span style={{'padding':'20px'}}>\r\n        keV\r\n\r\n        </span>\r\n            </Row>\r\n        \r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n              this.setLoading(true);\r\n              this.startProgress();\r\n              this.props.runsim(this.state.numberofparticles, this.state.detector, this.hideDialog, this.state.binsize);}}>\r\n            Run\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n    }\r\n}\r\nexport default SpectrumDialog;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport { Button, Modal, Row, Col, Form, Container } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Error from '../utils/Error';\r\n\r\nclass VolumeDialog extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.state = {\r\n            show: false,\r\n            name: \"model\",\r\n            filelabel: \"\",\r\n            modeldata: []\r\n        }\r\n\r\n    }\r\n    componentDidMount() {\r\n\r\n\r\n    }\r\n    showDialog(name) {\r\n        this.setState({ show: true });\r\n        if(name==undefined) return;\r\n        this.setState({name: name});\r\n        \r\n    }\r\n    hideDialog() {\r\n        this.setState({ show: false });\r\n    }\r\n\r\n    static id = 0;\r\n    render() {\r\n        return <>\r\n            <Modal show={this.state.show} onHide={() => { this.hideDialog(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Choose a geometry</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Container>\r\n                        Name\r\n                            <Row>\r\n                                \r\n                       \r\n                                <Col><Form.Control\r\n                                    className=\"name\"\r\n                                    required\r\n                                    type=\"text\"\r\n                                    maxLength=\"10\"\r\n                                    value={this.state.name}\r\n                                    onChange={(event) => { this.setState({ name: event.target.value }); }} />\r\n                                </Col>\r\n                            </Row>\r\n                        <hr />\r\n\r\n                            STL File\r\n                            <Form.File\r\n                                id=\"stl-file\"\r\n                                label={this.state.filelabel}\r\n                                data-browse=\"Open\"\r\n                                custom\r\n                                onChange={(evt) => {\r\n\r\n\r\n                                    var r = new FileReader();\r\n\r\n                                    r.onload = () => {\r\n                                        var data = r.result;\r\n                                        this.setState({ modeldata: data });\r\n                                        if(this.state.filelabel.split(\".\")[this.state.filelabel.split(\".\").length - 1].toUpperCase() !== 'STL'){\r\n                                            //To do error handling\r\n                                            this.setState({filelabel: \"\",modeldata: []});\r\n                                            Error.showError(\"Bad format\",\"Select an .stl file!\");\r\n                                        }\r\n                                    }\r\n                                    r.readAsBinaryString(evt.target.files[0]);\r\n\r\n                                    let path = evt.target.value;\r\n                                    path = path.split(\"\\\\\")[path.split(\"\\\\\").length - 1];\r\n                                    this.setState({ filelabel: path });\r\n                                    \r\n                                }}\r\n                            />\r\n                        </Container>\r\n                   </Form>\r\n                </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button variant=\"secondary\" onClick={() => { this.hideDialog(); }}>\r\n                            Cancel\r\n          </Button>\r\n                        <Button variant=\"primary\" onClick={() => {\r\n                            if(this.state.modeldata.length == 0){\r\n                                Error.showError(\"No file selected\",\"Select an .stl file!\");\r\n                                return;\r\n                            }\r\n                            this.hideDialog(); \r\n                            this.props.createbutton(this.state.name, this.state.modeldata, this.state.filelabel);\r\n                        }}>\r\n                            Create\r\n          </Button>\r\n                    </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    }\r\n}\r\n\r\nexport default VolumeDialog;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Form, Dropdown, OverlayTrigger, Tooltip, Modal } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport DetectorDialog from '../detector/DetectorDialog';\r\nimport GunDialog from '../gun/GunDialog';\r\nimport SourceDialog from '../source/SourceDialog';\r\nimport RunDialog from './RunDialog';\r\nimport SpectrumDialog from './SpectrumDialog';\r\nimport ConfirmDialog from './ConfirmDialog';\r\nimport VolumeDialog from '../volume/VolumeDialog';\r\nimport Logger from '../utils/Logger';\r\n\r\n//const Cookies = require(\"js-cookie\");\r\n\r\nclass NavigationBar extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.dialog = React.createRef();\r\n    this.gundialog = React.createRef();\r\n    this.sourcedialog = React.createRef();\r\n    this.rundialog = React.createRef();\r\n    this.spectrumdialog = React.createRef();\r\n    this.confirmDialog = React.createRef();\r\n    this.volumedialog = React.createRef();\r\n    this.showRun = this.showRun.bind(this);\r\n    this.state = {showTracks: true, showParticles: true, showAxes: true, showGrid: false, showrun: \"none\", showclearsetup: \"none\",\r\n     showclearparticles: \"none\", login: window.sessionStorage.getItem('user'),projectname: this.props.projectname};\r\n  }\r\n  componentDidMount(){\r\n  }\r\n  static id = 0;\r\n  showRun(b){\r\n    if(b) this.setState({showrun: \"block\"});\r\n    else this.setState({showrun: \"none\"});\r\n  }\r\n  showClearParticles(b){\r\n    if(b) this.setState({showclearparticles: \"block\"});\r\n    else this.setState({showclearparticles: \"none\"});\r\n  }\r\n  showClearSetup(b){\r\n    if(b) this.setState({showclearsetup: \"block\"});\r\n    else this.setState({showclearsetup: \"none\"});\r\n  }\r\n  setProjectName(name){\r\n    this.setState({projectname: name});\r\n  }\r\n  render(){\r\n\r\n    const handleDelete = ()=>{\r\n      this.props.clearSetup();\r\n      this.showClearSetup(false);\r\n    }\r\n    const login = this.state.login;\r\n\r\n    return <>\r\n\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete all components?\" fun={handleDelete}>\r\n\r\n    </ConfirmDialog>\r\n   <DetectorDialog ref={this.dialog} createbutton={this.props.createbutton} buttons={this.props.buttons}></DetectorDialog>\r\n   <GunDialog ref={this.gundialog} createbutton={this.props.creategunbutton} buttons={this.props.buttons}></GunDialog>\r\n   <SourceDialog ref={this.sourcedialog} createbutton={this.props.createsourcebutton} buttons={this.props.buttons}></SourceDialog>\r\n   <RunDialog ref={this.rundialog} runsim={this.props.run}></RunDialog>\r\n   <SpectrumDialog ref={this.spectrumdialog} runsim={this.props.runspectroscopy} detectors={this.props.detectors}></SpectrumDialog>\r\n   <VolumeDialog ref={this.volumedialog} createbutton={this.props.createvolume}></VolumeDialog>\r\n\r\n   <Navbar bg=\"light\" variant=\"light\" style={{position: 'fixed', 'z-index': '4'}}>\r\n        <Navbar.Brand>{this.state.projectname}</Navbar.Brand>\r\n        <Button style={{\"display\": this.state.showrun, \"borderRadius\" : 0}} variant=\"primary\" onClick={()=>{\r\n          this.rundialog.current.showDialog();}} >Run</Button>\r\n\r\n        <Button variant=\"primary\" style={{backgroundColor: 'green', \"display\" : this.state.showrun, \"borderRadius\" : 0}} onClick={()=>{\r\n          this.spectrumdialog.current.showDialog();}}>Spectroscopy</Button>\r\n\r\n        <Button variant=\"primary\" style={{\"display\" : this.state.showclearparticles, backgroundColor: 'red',\"borderRadius\" : 0}} onClick={()=>{\r\n                  this.props.clearrun();\r\n                  this.showClearParticles(false);\r\n                  }}>Clear particles</Button>\r\n\r\n        <Button variant=\"primary\" style={{\"display\" : this.state.showclearsetup, backgroundColor: 'red',\"borderRadius\" : 0}} onClick={()=>{\r\n                  this.confirmDialog.current.showDialog();\r\n                  \r\n                  }}>Clear setup</Button>\r\n\r\n        <Button variant=\"primary\" style={{backgroundColor: 'gray',\"borderRadius\" : 0}} onClick={()=>{\r\n                  Logger.log(1, \"asd\");\r\n                  }}>Send log</Button>\r\n\r\n        <Nav className=\"mr-auto\">\r\n        <Dropdown>\r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={{backgroundColor: 'white', border: 'none', color: 'black'}}>\r\n          File\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu>\r\n        <Dropdown.Item className='exportoption' onClick={()=>{this.props.save(this.state.projectname);}}>Export</Dropdown.Item>\r\n        <Dropdown.Item className='importoption' onClick={()=>{this.props.load();}}>Import</Dropdown.Item>\r\n        <Dropdown.Item className='saveoption' style={login == undefined ? {\"display\":\"none\"}:{\"display\":\"block\"}} onClick={()=>{\r\n          this.props.updateproject();\r\n        }}>Save</Dropdown.Item>\r\n        <Dropdown.Item className='saveoption' style={login == undefined ? {\"display\":\"none\"}:{\"display\":\"block\"}} onClick={()=>{\r\n          this.props.saveonline();\r\n        }}>Save as</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n        \r\n      </Dropdown>\r\n        <Dropdown>\r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={{backgroundColor: 'white', border: 'none', color: 'black'}}>\r\n          Add\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">Particle Detector</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{this.dialog.current.showDialog(this.props.volumes);}}>Detector</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        <br/>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">General Particle Source</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{this.sourcedialog.current.showDialog();}}>GPS</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        <br/>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">Directed Particle Gun</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{this.gundialog.current.showDialog();}}>Gun</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">Detector volume</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{\r\n            this.volumedialog.current.showDialog();\r\n            }}>Volume</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n         \r\n      <Dropdown>\r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={{backgroundColor: 'white', border: 'none', color: 'black'}}>\r\n          View\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu>\r\n        <Form.Check type=\"checkbox\" label=\"Show Tracks\" checked={this.state.showTracks} onChange={(evt)=>{\r\n          this.setState({showTracks: evt.target.checked});\r\n          this.props.setshowtracks(this.state.showTracks);}} style={{margin: '12px'}} />\r\n        <Form.Check type=\"checkbox\" label=\"Show Particles\" checked={this.state.showParticles} onChange={(evt)=>{\r\n          this.setState({showParticles: evt.target.checked});\r\n          this.props.setshowparticles(this.state.showParticles);}}\r\n          style={{margin: '12px'}}/>\r\n\r\n<Form.Check type=\"checkbox\" label=\"Show Axes\" checked={this.state.showAxes} onChange={(evt)=>{\r\n          this.setState({showAxes: evt.target.checked});\r\n          this.props.setshowaxes(this.state.showAxes);}}\r\n          style={{margin: '12px'}}/>\r\n\r\n<Form.Check type=\"checkbox\" label=\"Show Grid\" checked={this.state.showGrid} onChange={(evt)=>{\r\n          this.setState({showGrid: evt.target.checked});\r\n          if(this.state.showGrid) this.props.canvas.current.updateHint(\" \");\r\n          this.props.setshowgrid(this.state.showGrid);}}\r\n          style={{margin: '12px'}}/>\r\n        \r\n\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n      <Button style={window.sessionStorage.getItem('user') === null ? {\"display\":\"none\"}:{\"display\":\"block\"}} onClick={()=>{\r\n        window.location = \"../Dashboard\";\r\n      }}>Dashboard</Button>\r\n      <p style={login == undefined ? {\"display\":\"none\"}:{\"fontSize\":\"20px\",\"display\":\"block\",\"position\":\"absolute\",\"right\":\"10%\"}}>Logged in as {login}! </p>\r\n      <Button style={login == undefined ? {\"display\":\"block\",\"position\":\"absolute\",\"right\":\"2%\"}:{\"display\":\"none\"}} onClick={()=>{window.location = \"Login\"}}>Login</Button>\r\n      <Button style={login == undefined ? {\"display\":\"none\"}:{\"display\":\"block\",\"backgroundColor\":\"#ff0000\",\"position\":\"absolute\",\"right\":\"2%\"}} onClick={()=>{\r\n        //Cookies.remove(\"login\");\r\n        window.sessionStorage.removeItem('user');\r\n        window.sessionStorage.removeItem('auth');\r\n       window.location = \"/\"\r\n       }}>Logout</Button>\r\n     \r\n        </Nav>\r\n        \r\n      </Navbar>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default NavigationBar;\r\n","import { Vector3 } from '../utils/maths';\r\n\r\nclass Particle {\r\n    constructor(){\r\n        this.track_id = 0;\r\n        this.parent_id = 0;\r\n        this.position = new Vector3(0,0,0);\r\n        this.color = new Vector3(1,1,1);\r\n        this.totalEnergy = 0;\r\n        this.energyDeposit = 0;\r\n        this.definition = \"\";\r\n        this.id = \"\";\r\n\r\n    }\r\n    \r\n};\r\n\r\nexport default Particle;","import React, { Component, createRef } from 'react';\r\nimport Chart from 'chart.js';\r\nimport 'chartjs-plugin-zoom';\r\n\r\n/*\r\n\r\n*/\r\n\r\nclass Spectrum extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.canvas = React.createRef();\r\n        \r\n    }\r\n    componentDidMount(){\r\n        this.chart = new Chart(this.canvas.current.getContext(\"2d\"), {\r\n            // The type of chart we want to create\r\n            type: 'bar',\r\n        \r\n            // The data for our dataset\r\n            data: {\r\n                labels: [],\r\n                datasets: [{\r\n                    label: 'counts',\r\n                    backgroundColor: 'rgb(0, 99, 132)',\r\n                    borderColor: 'rgb(0, 99, 132)',\r\n                    data: []\r\n                }]\r\n            },\r\n        \r\n            options: { responsive: true,\r\n                plugins: {\r\n                    zoom: {\r\n                        pan: {\r\n                            enabled: true,\r\n                            mode: 'xy'\r\n                        },\r\n                        zoom: {\r\n                            enabled: true,\r\n                            mode: 'xy',\r\n                        }\r\n                    }\r\n                }\r\n             }\r\n        });\r\n    }\r\n    render(){\r\n        return <div style={{'position':'absolute','width':'90%','height':'90%', 'bottom':'10%','left':'1%','margin':'auto'}}>\r\n            <canvas ref={this.canvas}></canvas>\r\n        </div>\r\n    }\r\n    add(e){\r\n        if(isNaN(e)) return;\r\n        if(this.contains(e)){\r\n            this.numberofenergies[this.getIndex(e)]++;\r\n        }else{\r\n            this.energies.push(e);\r\n            this.numberofenergies.push(1);\r\n        }\r\n    }\r\n    contains(e){\r\n        for(var i = 0;i<this.energies.length;i++){\r\n            if(this.energies[i] == e) return true;\r\n        }\r\n        return false;\r\n    }\r\n    getIndex(e){\r\n        for(var i = 0;i<this.energies.length;i++){\r\n            if(Math.abs(this.energies[i] - e) == 0) return i;\r\n        }\r\n        return -1;\r\n    }\r\n    maximum(l, bin){\r\n        if(l.length == 0) return 0;\r\n        let m = l[0];\r\n        for(let i = 0;i<l.length;i++){\r\n            if(l[i] > m) m = l[i];\r\n        }\r\n        return m;\r\n    }\r\n    sort(bin){\r\n        var list = [];\r\n        let max = this.maximum(this.energies);\r\n        alert(bin);\r\n        for(let i = 0;i<max+2*bin;i+=parseInt(bin)){\r\n            this.add(i);\r\n        }\r\n        for (var j = 0; j < this.energies.length; j++)\r\n            list.push({ 'hit': this.energies[j], 'no': this.numberofenergies[j] });\r\n\r\n        list.sort(function (a, b) {\r\n            return ((a.hit < b.hit) ? -1 : ((a.hit == b.hit) ? 0 : 1));\r\n        });\r\n        \r\n        for (var k = 0; k < list.length; k++) {\r\n            this.energies[k] = list[k].hit;\r\n            this.numberofenergies[k] = list[k].no;\r\n        }\r\n        for(var i = 0;i<this.energies.length;i++){\r\n            this.addData(parseInt(this.energies[i]),this.numberofenergies[i]-1);\r\n        }\r\n        this.chart.update();\r\n        \r\n    }\r\n    clear(bin){\r\n        this.energies = [];\r\n        this.numberofenergies = [];\r\n        this.chart.data.labels = [];\r\n        this.chart.data.datasets = [];\r\n        this.chart.destroy();\r\n        let ctx = this.canvas.current.getContext(\"2d\");\r\n        this.chart = new Chart(ctx, {\r\n            // The type of chart we want to create\r\n            type: 'bar',\r\n        \r\n            // The data for our dataset\r\n            data: {\r\n                labels: [],\r\n                datasets: [{\r\n                    label: 'counts',\r\n                    backgroundColor: 'rgb(0, 99, 132)',\r\n                    borderColor: 'rgb(0, 99, 132)',\r\n                    data: []\r\n                }]\r\n            },\r\n            \r\n            // Configuration options go here\r\n            options: { responsive: true,\r\n                \r\n                scales: {\r\n                    yAxes: [{\r\n                        scaleLabel: {\r\n                            display: true,\r\n                            fontSize: 18,\r\n                            fontColor: '#000',\r\n                            labelString: 'Number of hits'\r\n                        }\r\n                    }],\r\n                    xAxes: [{\r\n                        scaleLabel: {\r\n                            display: true,\r\n                            fontSize: 18,\r\n                            fontColor: '#000',\r\n                            labelString: 'Energies (keV)'\r\n                        }\r\n                    }]\r\n                },\r\n                plugins: {\r\n                    zoom: {\r\n                        pan: {\r\n                            enabled: true,\r\n                            mode: 'x'\r\n                        },\r\n        \r\n                        zoom: {\r\n                            enabled: true,\r\n                            mode: 'x',\r\n                        }\r\n                    }\r\n                }\r\n             }\r\n        });\r\n       \r\n        \r\n    }\r\n    static save(){\r\n        \r\n    }\r\n    addData(label, data) {\r\n        this.chart.data.labels.push(label);\r\n        this.chart.data.datasets.forEach((dataset) => {\r\n            dataset.data.push(data);\r\n        });\r\n    }\r\n}\r\nexport default Spectrum;","import React, {Component} from 'react';\r\nimport {Form, Button} from 'react-bootstrap';\r\nimport AceEditor from 'react-ace';\r\nimport 'brace/mode/elixir';\r\nimport 'brace/theme/monokai';\r\nimport Parser from '../utils/Parser';\r\nimport Logger from '../utils/Logger';\r\nimport UnitConverter from '../utils/UnitConverter';\r\nimport { saveAs } from 'file-saver';\r\n\r\nclass CodeEditor extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.fileinput = React.createRef();\r\n\r\n        this.updateText = this.updateText.bind(this);\r\n        this.state = {text: '', width: '20%'}\r\n        this.editor = React.createRef();\r\n        this.onclickfunction = ()=>{\r\n            let tmp = this.state.text;\r\n            Parser.parse(tmp,this.props.canvas.current, this.props.clearSetup,this.props.createDetector, this.props.createSource, this.props.createGun);\r\n            this.setState({text: tmp});\r\n            Logger.log(2, \"Ran script: \" + this.state.text);\r\n        };\r\n        \r\n    }\r\n    run(){\r\n        this.onclickfunction();\r\n    }\r\n    addDetectorCode(id, name, position, rotation, scale, material, geometry, posu, rotu, scaleu,code){\r\n        let tmp = this.state.text;\r\n        this.setState({text: tmp + Parser.addDetectorCode(id, name, position, rotation, scale, material, geometry, posu, rotu, scaleu)});\r\n        Parser.chunks.pop();\r\n    }\r\n    addSourceCode(name, position, material, posu){\r\n        let tmp = this.state.text;\r\n        this.setState({text: tmp + \"\\\\Source{\\n\" +\r\n        \"\\tname: \" + '\"' + name + '\";\\n' +\r\n        \"\\tposition[\" + UnitConverter.convertLength(posu) + \"]: \" + position.x + \", \" + position.y + \", \" + position.z + \";\\n\" +\r\n        \"\\tmaterial: \" + '\"' + material + '\";\\n' +\r\n        \"}\\n\"});\r\n    }\r\n    addGunCode(name, position, direction, energy, posu, energyu){\r\n        let tmp = this.state.text;\r\n        this.setState({text: tmp +  \"\\\\Gun{\\n\" +\r\n        \"\\tname: \" + '\"' + name + '\";\\n' +\r\n        \"\\tposition[\" + UnitConverter.convertLength(posu) + \"]: \" + position.x + \", \" + position.y + \", \" + position.z + \";\\n\" +\r\n        \"\\tdirection: \" + direction.x + \", \" + direction.y + \", \" + direction.z + \";\\n\" +\r\n        \"\\tenergy[\" + UnitConverter.convertEnergy(energyu) + \"]: \" + energy + ';\\n' +\r\n        \"}\\n\"});\r\n    }\r\n    componentDidMount(){\r\n        \r\n    }\r\n    updateText(s){\r\n        this.setState({text: s});\r\n        \r\n    }\r\n    renameGeometry(name, newname, detectors){\r\n        for(let i = 0;i<detectors.length;i++){\r\n            if(detectors[i].geometry == name){\r\n                let tmp = Parser.removeChunk(detectors[i].id);\r\n                this.updateText(tmp);\r\n                this.setState({text: tmp + Parser.addDetectorCode(detectors[i].id, detectors[i].name, detectors[i].model.position,\r\n                    detectors[i].model.rotation, detectors[i].model.scale, detectors[i].material, newname, detectors[i].units[0],\r\n                    detectors[i].units[1], detectors[i].units[2])});\r\n                //Parser.chunks.pop();\r\n                \r\n            }\r\n        }\r\n        // detectors.forEach(e =>{\r\n            \r\n        // });\r\n       \r\n    }\r\n    render(){\r\n        return <div \r\n        style={{'width':this.state.width,'height':'100%', 'top':'50px',\r\n         'position': 'fixed', 'right':'0', 'z-index':'3', 'border': '0', 'borderRadius' : '0', 'padding':'0', 'margin':'0', 'background-color' : 'white'}}> \r\n\r\n<Button style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}\r\nonClick={()=>{\r\n   this.setState({text: \"Write your code here\"});\r\n}}>New</Button>\r\n<input ref={this.fileinput} type=\"file\" style={{\"display\":\"none\"}} onChange={(e)=>{\r\n    var r = new FileReader();\r\n\r\n    r.onload = ()=>{\r\n      var data = r.result;\r\n      this.updateText(data);\r\n    }\r\n    r.readAsBinaryString(e.target.files[0]);\r\n\r\n}}></input>\r\n<Button style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}\r\nonClick={()=>{\r\n    this.fileinput.current.click();\r\n}}>Open</Button>\r\n            <Button \r\n            onClick={this.onclickfunction}\r\n            style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}>Run script</Button>\r\n            <Button style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}\r\nonClick={()=>{\r\n    window.location = \"Help\";\r\n}}>Help</Button>\r\n            <AceEditor style={{'z-index' : '2','width':'100%'}} \r\n            ref={this.editor}\r\n            value={this.state.text}\r\n            mode=\"elixir\"\r\n            theme=\"monokai\"\r\n            fontSize={16}\r\n            onChange={(evt)=>{\r\n                this.setState({text: evt});\r\n            }}>\r\n            </AceEditor>\r\n\r\n        <Button \r\n        onClick={()=>{\r\n            if(this.state.width == '20%'){\r\n                this.setState({width: '0'});\r\n            }else{\r\n                this.setState({width: '20%'});\r\n            }\r\n        }}\r\n        style={{'right': this.state.width, 'position' : 'fixed', 'top': '50%', 'z-index': '3', 'height':'50px', 'background-color': 'gray', 'border' : '0'}}>\r\n        </Button>\r\n        <div style={{'position':'fixed','z-index':'1','background-color' : 'black', 'height' : '100%', 'top' : '0' , 'width' : this.state.width}} />\r\n\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default CodeEditor;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport { Maths, Camera, Vector3 } from '../utils/maths.js';\r\nimport Detector from '../detector/Detektor';\r\nimport Model from '../rendering/model';\r\n\r\n\r\nclass ModelCanvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.updateCanvas = this.updateCanvas.bind(this);\r\n    this.state = ({ show: false });\r\n    this.canvas = React.createRef();\r\n    this.camera = new Camera(45, -45, 10, new Vector3(0, 0, 0), new Vector3(0, 0, 0));\r\n    this.oldX = 0;\r\n    this.oldY = 0;\r\n    this.move = false;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.keyDown = ` ${0}`;\r\n    this.down = false;\r\n  }\r\n  componentDidMount() {\r\n  }\r\n  updateCanvas(){\r\n    this.gl = this.canvas.current.getContext(\"webgl2\");\r\n    this.renderer = new RenderSystem(this.gl);\r\n    \r\n    function updateCamera(camera) {\r\n      if (camera.y > 89.0) {\r\n          camera.y = 89.0;\r\n      }\r\n      if (camera.y < -89.0) {\r\n          camera.y = -89.0;\r\n      }\r\n  \r\n      camera.p.x = (camera.d * -Math.sin(camera.x * Math.PI / 180.0)\r\n          * Math.cos(camera.y * Math.PI / 180.0) + camera.a.x);\r\n      camera.p.y = (camera.d * -Math.sin(camera.y * Math.PI / 180.0)\r\n          + camera.a.y);\r\n      camera.p.z = (-camera.d * Math.cos(camera.x * Math.PI / 180.0)\r\n          * Math.cos(camera.y * Math.PI / 180.0) + camera.a.z);\r\n  \r\n\r\n      return camera;\r\n  }\r\n    this.renderer = new RenderSystem(this.gl);\r\n    this.renderer.drawAxes = false;\r\n    let model = new Model(this.props.modeldata.vertices, this.props.modeldata.normals, this.gl);\r\n    model.drawLines = false;\r\n    model.color = new Vector3(.8,.8,.8);\r\n    this.renderer.addDetector(new Detector(model));\r\n    this.renderer.models = [];\r\n    var draw = ()=>{\r\n      if(this.state.show == false) return;\r\n      this.gl.clearColor(.1,1,.1,1.0);\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\r\n      let projection = Maths.createProjectionMatrix(70,.1 * this.camera.d,1000 * this.camera.d, this.canvas.current.offsetWidth,this.canvas.current.offsetHeight);\r\n      if(this.down && this.move){\r\n        if (this.keyDown === 17) {\r\n          this.camera.a.y -= .01 * (this.getMouseYd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n          this.camera.a.z += .01 * (Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d);\r\n\r\n              this.camera.a.z -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * -this.getMouseXd() * .01 * this.camera.d);\r\n\r\n\r\n\r\n      } else {\r\n        this.camera.x += this.getMouseXd() / 2;\r\n        this.camera.y += this.getMouseYd() / 2;\r\n      }\r\n      }\r\n      updateCamera(this.camera);\r\n      this.renderer.draw(projection, this.camera);\r\n      requestAnimationFrame(draw);\r\n    }\r\n    requestAnimationFrame(draw);\r\n  }\r\n  showDialog() {\r\n    this.setState({ show: true });\r\n\r\n  }\r\n  hideDialog() {\r\n    this.setState({ show: false });\r\n  }\r\n  \r\n  getMouseXd(){\r\n    return this.oldX - this.x;\r\n  }\r\n  getMouseYd(){\r\n    return this.oldY - this.y;\r\n  }\r\n  render() {\r\n    return <div>\r\n      <Modal show={this.state.show} onHide={() => { this.hideDialog(); }} onShow={this.updateCanvas}>\r\n        <canvas ref={this.canvas}\r\n        width='2000'\r\n        height='2000'\r\n        style={{\"width\":\"600px\", \"height\": \"600px\"}}\r\n        onKeyDown={(e)=>{this.keyDown = e.keyCode;}}\r\n        onKeyUp={(e)=>{this.keyDown = ` ${0}`;}}\r\n        onMouseMove={(e)=>{ \r\n          this.move = true;\r\n          this.oldX = this.x;\r\n          this.oldY = this.y;\r\n          this.x = e.pageX;\r\n          this.y = e.pageY;\r\n        }}\r\n        onMouseDown={()=>{this.down = true;}} \r\n        onMouseUp={()=>{this.down = false;}}\r\n        onWheel={(e)=>{\r\n          let delta = 0;\r\n          if(e.deltaY > 0) delta = 1;\r\n          else delta = -1;\r\n          this.camera.d += (this.camera.d / (delta*100)) * 10;\r\n          }}></canvas>\r\n      </Modal>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default ModelCanvas;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport { Button, Nav, Navbar, FormControl, Container, Col, Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport VolumeList from '../volume/VolumeList';\r\n\r\nclass VolumeEditDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n\r\n    this.state = {\r\n      show: false,\r\n      name: this.props.name,\r\n      filelabel: this.props.filelabel,\r\n      modeldata: this.props.modeldata\r\n    }\r\n\r\n  }\r\n  componentDidMount() {\r\n\r\n  }\r\n  async showDialog() {\r\n    this.setState({ show: true });\r\n\r\n  }\r\n  hideDialog() {\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  render() {\r\n    return <>\r\n      <Modal show={this.state.show} onHide={() => { this.hideDialog(); }}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify geometry</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form>\r\n            <Container>\r\n              Name\r\n                    <Row>\r\n\r\n\r\n                <Col><Form.Control\r\n                  className=\"name\"\r\n                  required\r\n                  type=\"text\"\r\n                  maxLength=\"10\"\r\n                  value={this.state.name}\r\n                  onChange={(event) => { this.setState({ name: event.target.value }); }} />\r\n                </Col>\r\n              </Row>\r\n              <hr />\r\n\r\n                    STL File\r\n                    <Form.File\r\n                id=\"stl-file\"\r\n                label={this.state.filelabel}\r\n                data-browse=\"Open\"\r\n                custom\r\n                onChange={(evt) => {\r\n\r\n\r\n                  var r = new FileReader();\r\n\r\n                  r.onload = () => {\r\n                    var data = r.result;\r\n                    this.setState({ modeldata: data });\r\n                  }\r\n                  r.readAsBinaryString(evt.target.files[0]);\r\n\r\n                  let path = evt.target.value;\r\n                  path = path.split(\"\\\\\")[path.split(\"\\\\\").length - 1];\r\n                  this.setState({ filelabel: path });\r\n                }}\r\n              />\r\n            </Container>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => { this.hideDialog(); }}>\r\n            Cancel\r\n  </Button>\r\n          <Button variant=\"primary\" onClick={() => {\r\n            if (this.state.modeldata.length == 0) {\r\n              alert(\"Select an stl file!\");\r\n              return;\r\n            }\r\n            this.hideDialog();\r\n            VolumeList.updateVolume(this.props.volume.name,this.state.name,this.state.data,this.props.detectors);\r\n\r\n            this.props.volume.name = this.state.name;\r\n            this.props.setname(this.state.name);\r\n            this.props.volume.data = this.state.modeldata;\r\n            \r\n\r\n          }}>\r\n            Modify\r\n  </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  }\r\n}\r\n\r\nexport default VolumeEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport image from '../images/editicon.png';\r\nimport VolumeEditDialog from './VolumeEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport ModelCanvas from '../graphics/ModelCanvas';\r\n\r\nclass VolumeButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.setName = this.setName.bind(this);\r\n    this.state = {details: this.props.details,name: this.props.name};\r\n    this.canvas = React.createRef();\r\n  }\r\n  static id = 0;\r\n  componentDidMount(){\r\n  }\r\n  updateDetails(d){\r\n    this.setState({details: d});\r\n  }\r\n  setName(n){\r\n    this.setState({name: n});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <ModelCanvas modeldata={this.props.modeldata} ref={this.canvas}></ModelCanvas>\r\n    <VolumeEditDialog detectors={this.props.detectors} setname={this.setName} ref={this.editdialog} volume={this.props.volume} name={this.props.name} modeldata={this.props.modeldata} filelabel={this.props.filelabel}></VolumeEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey={this.id} onClick={()=>{\r\n          this.canvas.current.showDialog();\r\n          }}>\r\n          {this.state.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog();}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default VolumeButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false,title: \"\",content: \"\",fun: null, arg: null}\r\n     \r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  showDialog(title, content, f, arg){\r\n    this.setState({title: title, content: content, fun: f, arg: arg});\r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{this.state.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        {this.state.content}\r\n      \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n              this.state.fun(this.state.arg);\r\n              this.hideDialog();\r\n          }}>\r\n            OK\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport { Button, Modal, Row, Col, Form, Container } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass VolumeSelectDialog extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.addVolume = this.addVolume.bind(this);\r\n        this.removeVolume = this.removeVolume.bind(this);\r\n\r\n        this.state = {\r\n            show: false,\r\n            volumes: [],\r\n            fixed: [],\r\n            showConfirm: 'none',\r\n            fun: null\r\n        }\r\n\r\n    }\r\n    componentDidMount() {\r\n    }\r\n    updateVolume(v, l){\r\n        let res = this.state.fixed;\r\n        for(let i = 0;i<this.state.fixed.length;i++){\r\n            if(this.state.fixed[i].volume == v){\r\n                res[i].label = l;\r\n            }\r\n        }\r\n        this.setState({fixed: res});\r\n    }\r\n    removeVolume(v) {\r\n        let res = this.state.volumes;\r\n        for (let i = 0; i < this.state.volumes.length; i++) {\r\n            if (this.state.volumes[i] == v) {\r\n                res.splice(i, 1);\r\n            }\r\n        }\r\n        this.setState({ volumes: res });\r\n    }\r\n    addVolume(v, label, data) {\r\n        let res = this.state.fixed;\r\n        res.push({volume: v,label: label,data: data});\r\n        this.setState({ fixed: res });\r\n        if(this.state.volumes.length == 0){\r\n            this.setState({showConfirm: 'block'});\r\n        }\r\n    }\r\n    showDialog(volumes, f) {\r\n        this.setState({ show: true, fun: f });\r\n        this.setState({ volumes: volumes, fixed: [], showConfirm: 'none'});\r\n    }\r\n    hideDialog() {\r\n        this.setState({ show: false });\r\n    }\r\n\r\n    static id = 0;\r\n    render() {\r\n        const vs = this.state.volumes.map(e => {\r\n            return <>\r\n                <Row style={{ \"padding\": \"10px\", \"border\": \"solid 1px black\" }}>\r\n                    <Col>\r\n                        {e}\r\n                    </Col>\r\n                    <Col>\r\n                    <Form.File\r\n                        id=\"stl-file\"\r\n                        data-browse=\"Open\"\r\n                        label=\"\"\r\n                        custom\r\n                        onChange={(evt) => {\r\n                            \r\n\r\n                            var r = new FileReader();\r\n\r\n                            r.onload = () => {\r\n                                var data = r.result;\r\n                                this.addVolume(e, path, data);\r\n                            }\r\n                            r.readAsBinaryString(evt.target.files[0]);\r\n\r\n                            let path = evt.target.value;\r\n                            path = path.split(\"\\\\\")[path.split(\"\\\\\").length - 1];\r\n                            this.setState({ filelabel: path });\r\n                            this.removeVolume(e);\r\n\r\n                            \r\n                        }}\r\n                    />\r\n                    </Col>\r\n                </Row></>;\r\n        });\r\n        const fs = this.state.fixed.map((e, i) => {\r\n            return <>\r\n                <Row style={{ \"padding\": \"10px\", \"border\": \"solid 1px black\" }}>\r\n\r\n                    <Col>\r\n                        {e.volume}\r\n                    </Col>\r\n                    <Col>\r\n                    <Form.File\r\n                        id=\"stl-file\"\r\n                        data-browse=\"Open\"\r\n                        label={e.label}\r\n                        custom\r\n                        onChange={(evt) => {\r\n                            \r\n\r\n                            var r = new FileReader();\r\n\r\n                            r.onload = () => {\r\n                                var data = r.result;\r\n                                this.setState({ modeldata: data });\r\n                            }\r\n                            r.readAsBinaryString(evt.target.files[0]);\r\n\r\n                            let path = evt.target.value;\r\n                            path = path.split(\"\\\\\")[path.split(\"\\\\\").length - 1];\r\n                            this.setState({ filelabel: path });\r\n                            \r\n                            this.updateVolume(e.volume, path);\r\n                        }}\r\n                    />\r\n                    </Col>\r\n                </Row></>;\r\n        });\r\n        return <>\r\n            <Modal show={this.state.show} onHide={() => { this.hideDialog(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Choose a geometry</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Container>\r\n                            Missing volumes\r\n                           {vs}\r\n                            < hr />\r\n                           Fixed volumes\r\n                           {fs}\r\n                        </Container>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => { this.hideDialog(); }}>\r\n                        Cancel\r\n          </Button>\r\n                    <Button \r\n                    style={{\"display\":this.state.showConfirm}}\r\n                    variant=\"primary\" onClick={() => {\r\n                        if (this.state.volumes != 0) {\r\n                            alert(\"Select an stl file!\");\r\n                            return;\r\n                        }\r\n                        this.hideDialog();\r\n                        for(let i = 0;i<this.state.fixed.length;i++){\r\n                            this.props.createbutton(this.state.fixed[i].volume, this.state.fixed[i].data);\r\n                        }\r\n                        this.state.fun();\r\n                    }}>\r\n                        OK\r\n          </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    }\r\n}\r\n\r\nexport default VolumeSelectDialog;\r\n","import React, {Component} from \"react\";\r\n \r\nclass NumberSpinner extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {value: 0}\r\n    }\r\n    set(n){\r\n        this.setState({value: n});\r\n    }\r\n    render(){\r\n        return <><button style={{\"outline\" : \"none\"}} onClick={()=>{this.set(this.state.value-1)}}>-</button><input style={{\"width\":\"20%\"}} type=\"number\" value={this.state.value}></input>\r\n        <button style={{\"outline\" : \"none\"}} onClick={()=>{this.set(this.state.value+1)}}>+</button></>;\r\n    }\r\n}\r\n\r\nexport default NumberSpinner;","import React, {Component } from \"react\";\r\nimport {Modal} from 'react-bootstrap';\r\nimport ReactDOM from \"react-dom\";\r\nimport Graph from \"react-graph-vis\";\r\n\r\nclass GraphDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {show: false}\r\n    }\r\n    hideDialog(){\r\n        this.setState({show: false});\r\n    }\r\n    showDialog(){\r\n        this.setState({show: true});\r\n    }\r\n    render(){\r\n        const graph = {\r\n            nodes: [\r\n              { id: 1, label: \"Node 1\", title: \"node 1 tootip text\" },\r\n              { id: 2, label: \"Node 2\", title: \"node 2 tootip text\" },\r\n              { id: 3, label: \"Node 3\", title: \"node 3 tootip text\" },\r\n              { id: 4, label: \"Node 4\", title: \"node 4 tootip text\" },\r\n              { id: 5, label: \"Node 5\", title: \"node 5 tootip text\" }\r\n            ],\r\n            edges: [\r\n              { from: 1, to: 2 },\r\n              { from: 1, to: 3 },\r\n              { from: 2, to: 4 },\r\n              { from: 2, to: 5 }\r\n            ]\r\n          };\r\n         \r\n          const options = {\r\n            layout: {\r\n              hierarchical: true\r\n            },\r\n            edges: {\r\n              color: \"#000000\"\r\n            },\r\n            height: \"500px\"\r\n          };\r\n         \r\n          const events = {\r\n            select: function(event) {\r\n              var { nodes, edges } = event;\r\n            }\r\n          };\r\n          return (\r\n          <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Run simulation</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Graph\r\n              graph={graph}\r\n              options={options}\r\n              events={events}\r\n              getNetwork={network => {\r\n                //  if you want access to vis.js network api you can set the state in a parent component using this property\r\n              }}\r\n            />\r\n        </Modal.Body>\r\n        </Modal>\r\n            );\r\n    }\r\n}\r\n\r\nexport default GraphDialog;","import { saveAs } from 'file-saver';\r\nimport STLParrser from './STLParser';\r\nimport Requests from './Reqs';\r\n\r\n\r\nconst request = require('request');\r\n // const Cookies = require(\"js-cookie\");\r\nconst JSZip = require(\"jszip\");\r\n        \r\nclass SaveLoad {\r\n    static async update(id, code, volumes){\r\n        var zip = new JSZip();\r\n        zip.file(\"signature\", \"Created at radsim.inf.elte.hu\");\r\n        zip.file(\"script.txt\", code);\r\n        zip.folder(\"volumes\");\r\n        volumes.forEach(e=>{\r\n            zip.file(\"volumes/\" + e.name + \".stl\",e.data,{binary: true});\r\n        });\r\n        zip.generateAsync({type:\"base64\"})\r\n                .then(async function(content) {\r\n                //projectAPI\r\n                Requests.post(\"projectAPI/update\",{id: id,data: content});\r\n         });\r\n\r\n        \r\n    }\r\n    static async loadonline(id){\r\n        let files = [];\r\n\r\n        let pdata = await Requests.get(\"projectAPI/get/\" + id, window.sessionStorage.getItem('auth'));\r\n        \r\n        let json = await pdata.json();\r\n        for (let i = 0; i < json.length; i++) {\r\n            var zip = new JSZip();\r\n            const content = json[i].data;\r\n            //document.location = 'data:application/zip;base64,' + json[i].data;\r\n            //saveAs(content, \"example.zip\");\r\n            let contents = await zip.loadAsync(content,{base64: true});\r\n            for(let i = 0;i<Object.keys(contents.files).length;i++){\r\n                if(zip.file(Object.keys(contents.files)[i]) == undefined) continue;\r\n                let content = await zip.file(Object.keys(contents.files)[i]).async('uint8array');\r\n                let data = \"\";\r\n                for(let i = 0;i<content.length;i++){\r\n                    data += String.fromCharCode(content[i]);\r\n                }\r\n                files.push({\"name\": Object.keys(contents.files)[i], content: data});\r\n            }\r\n        }\r\n        return [json[0].name,files];\r\n    }\r\n    static saveonline(code, volumes,name){\r\n        var zip = new JSZip();\r\n        zip.file(\"signature\", \"Created at radsim.inf.elte.hu\");\r\n        zip.file(\"script.txt\", code);\r\n        zip.folder(\"volumes\");\r\n        volumes.forEach(e=>{\r\n            zip.file(\"volumes/\" + e.name + \".stl\",e.data,{binary: true});\r\n        });\r\n        zip.generateAsync({type:\"base64\"})\r\n                .then(async function(content) {\r\n                //projectAPI\r\n                \r\n                Requests.post(\"projectAPI/add\",{name: name,data: content, user: window.sessionStorage.getItem('user')});\r\n         });\r\n    }\r\n    static save(code, volumes, name){\r\n        const JSZip = require(\"jszip\");\r\n        var zip = new JSZip();\r\n        zip.file(\"signature\", \"Created at radsim.inf.elte.hu\");\r\n        zip.file(\"script.txt\", code);\r\n        zip.folder(\"volumes\");\r\n        volumes.forEach(e=>{\r\n            zip.file(\"volumes/\" + e.name + \".stl\",e.data,{binary: true});\r\n        });\r\n        zip.generateAsync({type:\"blob\"})\r\n                .then(function(content) {\r\n                // see FileSaver.js\r\n                saveAs(content, \"name.zip\");\r\n         });\r\n    }\r\n    static async load(file){\r\n        let files = [];\r\n        const JSZip = require(\"jszip\");\r\n        var zip = new JSZip();\r\n        let contents = await zip.loadAsync(file);\r\n        for(let i = 0;i<Object.keys(contents.files).length;i++){\r\n            if(zip.file(Object.keys(contents.files)[i]) == undefined) continue;\r\n            let content = await zip.file(Object.keys(contents.files)[i]).async('uint8array');\r\n            let data = \"\";\r\n            for(let i = 0;i<content.length;i++){\r\n                data += String.fromCharCode(content[i]);\r\n            }\r\n            files.push({\"name\": Object.keys(contents.files)[i], content: data});\r\n        }\r\n        \r\n        return files;\r\n    }\r\n};\r\n\r\nexport default SaveLoad;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Modal, Col, Row, Container} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {ExclamationOctagon} from 'react-bootstrap-icons';\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false,content: this.props.content,title: this.props.title }\r\n    this.setTitle = this.setTitle.bind(this);\r\n    this.setContent = this.setContent.bind(this);\r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  setTitle(t){\r\n    this.setState({title: t});\r\n  }\r\n  setContent(c){\r\n      this.setState({content: c});\r\n  }\r\n  showDialog(){\r\n      \r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>            \r\n            {this.state.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Col>\r\n        <Container>\r\n          <Row className=\"justify-content-md-center\">\r\n          <ExclamationOctagon color=\"red\" size={48} />\r\n\r\n          </Row>\r\n\r\n          <Row className=\"justify-content-md-center\">\r\n          {this.state.content}\r\n          </Row>\r\n        </Container>\r\n        </Col>\r\n      <Col>\r\n    \r\n      </Col>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Container>\r\n          <Row className=\"justify-content-md-center\" >\r\n\r\n          <Button variant=\"primary\" onClick={()=>{\r\n            this.hideDialog();\r\n          }}>\r\n          OK\r\n          </Button>\r\n          </Row>\r\n          </Container>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false,name: \"Untitled\"}\r\n     \r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  showDialog(){\r\n      \r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Save as</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        Project name: <input type=\"text\" className=\"saveName\" value={this.state.name} onChange={e=>{\r\n            this.setState({name: e.target.value});\r\n        }} ></input>\r\n      \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n              this.props.saveonline(this.state.name);\r\n              this.hideDialog();\r\n          }}>\r\n            OK\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","class WindowParams {\r\n    constructor(){}\r\n    static get(parameter){\r\n        const windowUrl = window.location.search;\r\n        const params = new URLSearchParams(windowUrl);\r\n        const param = params.get(parameter);\r\n\r\n        return param;\r\n    }\r\n}\r\n\r\nexport default WindowParams;","import React, { Component, createRef } from 'react';\r\nimport './App.css';\r\n\r\nimport Canvas from './graphics/Canvas.js';\r\nimport { Button, Card, Accordion, Container, Row, Col, Tabs, Tab, Nav } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport DetectorButton from './detector/DetectorButton';\r\nimport NavigationBar from './graphics/NavigationBar';\r\nimport GunButton from './gun/GunButton';\r\nimport SourceButton from './source/SourceButton';\r\nimport Particle from './entities/Particle';\r\nimport { Vector3 } from './utils/maths';\r\nimport Model from './rendering/model';\r\nimport Spectrum from './graphics/spectrum';\r\nimport STLParser from './utils/STLParser';\r\nimport CodeEditor from './graphics/CodeEditor';\r\nimport Parser from './utils/Parser';\r\nimport ModelCanvas from './graphics/ModelCanvas';\r\nimport VolumeButton from './volume/VolumeButton';\r\nimport VolumeList from './volume/VolumeList';\r\nimport VolumeDialog from './volume/VolumeDialog';\r\nimport PopupDialog from './graphics/PopupDialog';\r\nimport VolumeSelectDialog from './volume/VolumeSelectDialog';\r\nimport { Element } from 'react-scroll';\r\nimport UnitConverter from './utils/UnitConverter';\r\nimport Logger from './utils/Logger';\r\nimport CodeTests from './utils/codeTests';\r\nimport MousePicker from './utils/mousePicker';\r\nimport RenderSystem from './rendering/renderSystem';\r\nimport NumberSpinner from './graphics/NumberSpinner';\r\nimport GraphDialog from './graphics/GraphDialog';\r\nimport MaterialList from './detector/MaterialList';\r\nimport SaveLoad from './utils/SaveLoad';\r\nimport ErrorDialog from './graphics/ErrorDialog';\r\nimport User from './utils/User';\r\nimport SaveOnlineDialog from './graphics/SaveOnlineDialog';\r\n\r\nimport Requests from './utils/Reqs';\r\nimport WindowParams from './utils/WindowParameters';\r\nimport Error from './utils/Error';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.spectrum = React.createRef();\r\n    this.navbar = React.createRef();\r\n    this.codeeditor = React.createRef();\r\n    this.volumedialog = React.createRef();\r\n    this.popup = React.createRef();\r\n    this.volumeselect = React.createRef();\r\n    this.graphdialog = React.createRef();\r\n    this.loadfile = React.createRef();\r\n    this.errordialog = React.createRef();\r\n    this.confirmdialog = React.createRef();\r\n\r\n\r\n    this.state = {\r\n      buttons: [], gunbuttons: [], sourcebuttons: [], volumebuttons: [], spectrum: true, page: 'first',\r\n      volumebuttonheight: \"100%\"\r\n    }\r\n    this.createDetector = this.createDetector.bind(this);\r\n    this.createSource = this.createSource.bind(this);\r\n    this.createGun = this.createGun.bind(this);\r\n    this.createVolume = this.createVolume.bind(this);\r\n    this.removeDetector = this.removeDetector.bind(this);\r\n    this.removeGun = this.removeGun.bind(this);\r\n    this.removeSource = this.removeSource.bind(this);\r\n\r\n    this.runSim = this.runSim.bind(this);\r\n    this.runSpectroscopy = this.runSpectroscopy.bind(this);\r\n\r\n    this.setShowParticles = this.setShowParticles.bind(this);\r\n    this.setShowTracks = this.setShowTracks.bind(this);\r\n    this.setShowAxes = this.setShowAxes.bind(this);\r\n    this.setShowGrid = this.setShowGrid.bind(this);\r\n\r\n    this.clearRun = this.clearRun.bind(this);\r\n    this.clearSetup = this.clearSetup.bind(this);\r\n    this.save = this.save.bind(this);\r\n    this.load = this.load.bind(this);\r\n    this.saveOnline = this.saveOnline.bind(this);\r\n    this.showSaveDialog = this.showSaveDialog.bind(this);\r\n    this.updateProject = this.updateProject.bind(this);\r\n\r\n    this.accordion = React.createRef();\r\n    this.canvas = React.createRef();\r\n\r\n    this.detectors = [];\r\n    this.guns = [];\r\n    this.sources = [];\r\n    this.particles = [];\r\n    this.tracks = [];\r\n    this.volumes = [];\r\n  }\r\n  checkRunnable(){\r\n    this.navbar.current.showRun((this.detectors.length > 0 && this.sources.length > 0) || (this.detectors.length > 0 && this.guns.length > 0));\r\n  }\r\n  clearRun() {\r\n    this.canvas.current.clearRun();\r\n    this.canvas.current.updateColorHint(\"0 keV\",\"0 keV\");\r\n  }\r\n  runSpectroscopy(number_of_particles, detector, hideDialog, binsize) {\r\n    Logger.log(1, \"Started spectrum simulation\");\r\n    let message_data = [];\r\n\r\n    // particle gun stuff\r\n    message_data.push(0);\r\n\r\n    message_data.push(1);\r\n\r\n\r\n    message_data.push(0);\r\n    message_data.push(0);\r\n    message_data.push(0);\r\n\r\n    message_data.push(0);\r\n    message_data.push(0);\r\n    message_data.push(0);\r\n\r\n    message_data.push(0);\r\n\r\n    // detector stuff\r\n    var number_of_detectors = this.detectors.length;\r\n\r\n    message_data.push(number_of_detectors);\r\n\r\n    for (var i = 0; i < number_of_detectors; i++) {\r\n\r\n      message_data.push(\"G4_\" + this.detectors[i].material);\r\n      message_data.push(this.detectors[i].id);\r\n      message_data.push(this.detectors[i].model.position.x);\r\n      message_data.push(this.detectors[i].model.position.y);\r\n      message_data.push(this.detectors[i].model.position.z);\r\n\r\n      message_data.push(this.detectors[i].model.rotation.x);\r\n      message_data.push(this.detectors[i].model.rotation.y);\r\n      message_data.push(this.detectors[i].model.rotation.z);\r\n\r\n      message_data.push(this.detectors[i].model.scale.x);\r\n      message_data.push(this.detectors[i].model.scale.y);\r\n      message_data.push(this.detectors[i].model.scale.z);\r\n\r\n      message_data.push(this.detectors[i].model.vertices.length);\r\n      for (var j = 0; j < this.detectors[i].model.vertices.length; j++) {\r\n        message_data.push(this.detectors[i].model.vertices[j]);\r\n      }\r\n    }\r\n    //sources\r\n    var number_of_sources = this.sources.length;\r\n    message_data.push(number_of_sources);\r\n    for (var i = 0; i < number_of_sources; i++) {\r\n\r\n      message_data.push(this.sources[i].material);\r\n      //message_data.push(detectors[i].id);\r\n\r\n      message_data.push(this.sources[i].model.position.x);\r\n      message_data.push(this.sources[i].model.position.y);\r\n      message_data.push(this.sources[i].model.position.z);\r\n    }\r\n    //guns\r\n    var number_of_guns = this.guns.length;\r\n    message_data.push(number_of_guns);\r\n    for (var i = 0; i < number_of_guns; i++) {\r\n      message_data.push(this.guns[i].model.position.x);\r\n      message_data.push(this.guns[i].model.position.y);\r\n      message_data.push(this.guns[i].model.position.z);\r\n\r\n      message_data.push(this.guns[i].direction.x);\r\n      message_data.push(this.guns[i].direction.y);\r\n      message_data.push(this.guns[i].direction.z);\r\n\r\n      message_data.push(this.guns[i].energy);\r\n    }\r\n    message_data.push(this.detectors[detector].id); //selected detector id\r\n    message_data.push(number_of_particles); //number of particles\r\n    message_data.push('end');\r\n    this.sendGamma(message_data, hideDialog, binsize);\r\n  }\r\n  runSim(number_of_particles, hidedialog) {\r\n    this.clearRun();\r\n    Logger.log(1, \"Started simulation\");\r\n    let message_data = [];\r\n\r\n    // particle gun stuff\r\n    message_data.push(1);\r\n\r\n    message_data.push(1);\r\n\r\n\r\n    message_data.push(0);\r\n    message_data.push(0);\r\n    message_data.push(0);\r\n\r\n    message_data.push(0);\r\n    message_data.push(0);\r\n    message_data.push(0);\r\n\r\n    message_data.push(0);\r\n\r\n    // detector stuff\r\n    var number_of_detectors = this.detectors.length;\r\n\r\n    message_data.push(number_of_detectors);\r\n\r\n    for (var i = 0; i < number_of_detectors; i++) {\r\n\r\n      message_data.push(\"G4_\" + this.detectors[i].material);\r\n      message_data.push(this.detectors[i].id);\r\n      message_data.push(this.detectors[i].model.position.x);\r\n      message_data.push(this.detectors[i].model.position.y);\r\n      message_data.push(this.detectors[i].model.position.z);\r\n\r\n      message_data.push(this.detectors[i].model.rotation.x);\r\n      message_data.push(this.detectors[i].model.rotation.y);\r\n      message_data.push(this.detectors[i].model.rotation.z);\r\n\r\n      message_data.push(this.detectors[i].model.scale.x);\r\n      message_data.push(this.detectors[i].model.scale.y);\r\n      message_data.push(this.detectors[i].model.scale.z);\r\n\r\n      message_data.push(this.detectors[i].model.vertices.length);\r\n      for (var j = 0; j < this.detectors[i].model.vertices.length; j++) {\r\n        message_data.push(this.detectors[i].model.vertices[j]);\r\n      }\r\n    }\r\n    //sources\r\n    var number_of_sources = this.sources.length;\r\n    message_data.push(number_of_sources);\r\n    for (var i = 0; i < number_of_sources; i++) {\r\n\r\n      message_data.push(this.sources[i].material);\r\n      //message_data.push(detectors[i].id);\r\n\r\n      message_data.push(this.sources[i].model.position.x);\r\n      message_data.push(this.sources[i].model.position.y);\r\n      message_data.push(this.sources[i].model.position.z);\r\n    }\r\n    //guns\r\n    var number_of_guns = this.guns.length;\r\n    message_data.push(number_of_guns);\r\n    for (var i = 0; i < number_of_guns; i++) {\r\n      message_data.push(this.guns[i].model.position.x);\r\n      message_data.push(this.guns[i].model.position.y);\r\n      message_data.push(this.guns[i].model.position.z);\r\n\r\n      message_data.push(this.guns[i].direction.x);\r\n      message_data.push(this.guns[i].direction.y);\r\n      message_data.push(this.guns[i].direction.z);\r\n\r\n      message_data.push(this.guns[i].energy);\r\n    }\r\n    message_data.push(number_of_particles); //number of particles\r\n    //alert(number_of_particles);\r\n    message_data.push('end');\r\n    this.send(message_data, hidedialog);\r\n  }\r\n  async sendGamma(data, hideDialog, binsize) {\r\n    var message = '';\r\n    for (var i = 0; i < data.length; i++) {\r\n      message += data[i];\r\n      message += ',';\r\n    }\r\n    let pdata = await Requests.get(\"gammaAPI/getid\");\r\n    User.process_id = await pdata.json();\r\n    Requests.post(\"gammaAPI\",{data: message}).then(response => response.text()).then(response=>{\r\n      this.processGammaSpectrum(response, binsize);\r\n      hideDialog();\r\n      this.setState({ spectrum: false, page: \"second\" });\r\n      Logger.log(1, \"Finished spectrum simulation\");\r\n    });\r\n    \r\n  }\r\n  async send(data, hidedialog) {\r\n    var message = '';\r\n    for (var i = 0; i < data.length; i++) {\r\n      message += data[i];\r\n      message += ',';\r\n    }\r\n    let pdata = await Requests.get(\"gammaAPI/getid\");\r\n    User.process_id = await pdata.json();\r\n    //alert(\"id: \" + User.process_id);\r\n    Requests.post(\"gammaAPI\",{data: message}).then(response => response.text())\r\n    .then(response => {\r\n      this.processResponse(response);\r\n      hidedialog();\r\n      Logger.log(1, \"Finished simulation\");\r\n\r\n    });\r\n  }\r\n  processGammaSpectrum(response, binsize) {\r\n\r\n    let message = response;\r\n\r\n    message = message.split(\" \");\r\n    this.spectrum.current.clear(binsize);\r\n    for (var i = 0; i < message.length; i++) {\r\n      this.spectrum.current.add(Math.floor(parseFloat(message[i]) / binsize) * binsize);\r\n    }\r\n    this.spectrum.current.sort(binsize);\r\n  }\r\n  processResponse(response) {\r\n    var message = response;\r\n    var floats = message.split(' ');\r\n    var index = 0;\r\n    var j = 0;\r\n    function toNode(p, l) {\r\n      if (p == 'gamma') return '\"' + l + '\"';\r\n      if (p == 'e-') return '\"' + l + '\"';\r\n      if (p == 'e+') return '\"' + l + '\"';\r\n    }\r\n    this.particles = [];\r\n    while (index < floats.length - 1 - this.detectors.length - 1) {\r\n      var track_data = [];\r\n      var numberOfSteps = parseInt(floats[index]);\r\n      if (numberOfSteps == 0) break;\r\n      var definition = floats[index + 1];\r\n      for (var i = 0; i < numberOfSteps; i++) {\r\n        var particle = new Particle();\r\n        particle.position.x = parseFloat(floats[index + i * 7 + 2]) * .1;\r\n        particle.position.y = parseFloat(floats[index + i * 7 + 3]) * .1;\r\n        particle.position.z = parseFloat(floats[index + i * 7 + 4]) * .1;\r\n\r\n        track_data.push(parseFloat(floats[index + i * 7 + 2]) * .1);\r\n        track_data.push(parseFloat(floats[index + i * 7 + 3]) * .1);\r\n        track_data.push(parseFloat(floats[index + i * 7 + 4]) * .1);\r\n\r\n        particle.definition = definition;\r\n        particle.track_id = parseInt(floats[index + i * 7 + 5]);\r\n        particle.parent_id = parseInt(floats[index + i * 7 + 6]);\r\n        particle.totalEnergy = parseFloat(floats[index + i * 7 + 7]);\r\n        particle.energyDeposit = parseFloat(floats[index + i * 7 + 8]);\r\n\r\n        particle.color = new Vector3(1, 0, 0);\r\n        particle.id = j;\r\n\r\n\r\n        j++;\r\n\r\n\r\n        if(i>0) this.particles.push(particle); //ignore source particle for now\r\n      }\r\n      index += numberOfSteps * 7 + 2;\r\n\r\n      var t_norm = [];\r\n      for (var k = 0; k < track_data.length; k++) {\r\n        t_norm.push(1);\r\n      }\r\n\r\n      var tm = this.canvas.current.addModel(track_data, t_norm);\r\n      tm.color = new Vector3(1,0,0);\r\n      if (definition == \"e-\") tm.color = new Vector3(1, 0, 1);\r\n      if (definition == \"gamma\") tm.color = new Vector3(1, 1, 1);\r\n      if (definition == \"e+\") tm.color = new Vector3(1, 1, 0);\r\n      tm.drawLines = true;\r\n      this.tracks.push(tm);\r\n\r\n    }\r\n    // if(this.particles.length > 1000){\r\n    //   this.popup.current.showDialog(\"Too many particles!\",\"Low energy particles will be ommited!\",()=>{});\r\n    //   this.particles = this.particles.sort((a,b)=>{return b.energyDeposit - a.energyDeposit});\r\n    //   this.particles.length = 1000;\r\n    //   //this.particles.splice(1000, this.particles.length-1000);\r\n    // } \r\n    let tmp_particles = [];\r\n    for (var i = 0; i < this.particles.length; i ++) {\r\n      tmp_particles.push(this.particles[i]);\r\n    }\r\n    \r\n    this.particles = tmp_particles.slice();\r\n    function get_max(particles){\r\n      var max = 0;\r\n      for (var i = 0; i < particles.length; i++) {\r\n        if(particles[i].energyDeposit > max) max = particles[i].energyDeposit;\r\n      }\r\n      return max;\r\n    }\r\n    function get_min(particles){\r\n      var min = 0;\r\n      for (var i = 0; i < particles.length; i++) {\r\n        if(particles[i].energyDeposit <= max) min = particles[i].energyDeposit;\r\n      }\r\n      return min;\r\n    }\r\n    let max = get_max(this.particles);\r\n    var min = get_min(this.particles);\r\n    this.canvas.current.updateColorHint(Math.ceil(max * 1000) + \" keV\",Math.ceil(min * 1000) + \" keV\");\r\n    this.canvas.current.instanceRenderer.maxenergy = max;\r\n\r\n    function get_average(particles) {\r\n      var max = 0;\r\n      for (var i = 0; i < particles.length; i++) {\r\n        max += +particles[i].energyDeposit;\r\n      }\r\n      max = max / particles.length;\r\n\r\n      return max;\r\n    }\r\n    \r\n    //let max = get_average(this.particles) * 2;\r\n\r\n    for (let i = 0; i < this.particles.length; i++) {\r\n      //if (this.particles[i].totalEnergy > max) this.particles[i].totalEnergy = max;\r\n      \r\n      this.particles[i].color.x = this.particles[i].energyDeposit;\r\n      //this.particles[i].color.y = 1 - this.particles[i].color.x;\r\n\r\n      let d = Math.sqrt(this.particles[i].color.x / max);\r\n      this.particles[i].scale = new Vector3(d*.03,d*.03,d*.03);\r\n      this.canvas.current.addParticle(this.particles[i]);\r\n    }\r\n    if (this.particles.length > 0) this.navbar.current.showClearParticles(true);\r\n    let ind = floats.length - this.detectors.length - 1;\r\n    this.detectors.forEach(e=>{\r\n      e.deposit = parseFloat(floats[ind]);\r\n      ind++;\r\n      this.canvas.current.detector_buttons.forEach(b=>{\r\n        // alert(b.current.id);\r\n        // alert(e.id);\r\n\r\n        if(e.id == b.current.id) b.current.updateDetails(e);\r\n      });\r\n    });\r\n    console.log(floats);\r\n  }\r\n  \r\n  modifyDetector(detector) {\r\n\r\n  }\r\n  createVolume(name, data, label) {\r\n    let modeldata = STLParser.parseData(data);\r\n    if(modeldata == null){\r\n      alert(\"Geometry too complicated.\");\r\n      return;\r\n    }\r\n    let bs = this.state.volumebuttons;\r\n    VolumeList.addVolume({ name: name, data: data });\r\n    let vol = { name: name, data: data };\r\n    this.volumes.push(vol);\r\n    bs.push(<VolumeButton detectors={this.detectors} name={name} volumes={this.volumes} modeldata={modeldata} filelabel={label} volume={vol}></VolumeButton>);\r\n    this.setState({ volumebuttons: bs });\r\n  }\r\n  async createSource(n, x, y, z, mat, code, posu) {\r\n   this.checkRunnable();\r\n    this.navbar.current.showClearSetup(true);\r\n    if (!code) this.codeeditor.current.addSourceCode(n, new Vector3(x,y,z), mat, posu);\r\n\r\n    let bs = this.state.sourcebuttons;\r\n    let source = this.canvas.current.addSource(x*posu, y*posu, z*posu, mat);\r\n    source.id = +DetectorButton.id;\r\n    Parser.chunks.push({\r\n      id: source.id, code: \"\\\\Source{\\n\" +\r\n        \"\\tname: \" + '\"' + n + '\";\\n' +\r\n        \"\\tposition[\" + UnitConverter.convertLength(posu) + \"]: \" + x + \", \" + y + \", \" + z + \";\\n\" +\r\n        \"\\tmaterial: \" + '\"' + mat + '\";\\n' +\r\n        \"}\\n\"\r\n    });\r\n    source.name = n;\r\n    source.units[0] = posu;\r\n    this.sources.push(source);\r\n    var b = React.createRef();\r\n    bs.push(<SourceButton ref={b} codeeditor={this.codeeditor} name={n} removebutton={this.removeSource} id={DetectorButton.id} detector={source} key={++DetectorButton.id} buttons={this.state.sourcebuttons}></SourceButton>);\r\n    this.setState({ sourcebuttons: bs });\r\n    this.canvas.current.source_buttons.push(b);\r\n    Logger.log(1, \"Created source\");\r\n    this.checkRunnable();\r\n\r\n    return [source, DetectorButton.id];\r\n  }\r\n  async createGun(n, px, py, pz, dx, dy, dz, energy, code, posu, energyu) {\r\n    this.checkRunnable();\r\n    this.navbar.current.showClearSetup(true);\r\n\r\n    if (!code) this.codeeditor.current.addGunCode(n, new Vector3(px, py, pz), new Vector3(dx, dy, dz), energy, posu, energyu);\r\n\r\n    let bs = this.state.gunbuttons;\r\n\r\n    let gun = this.canvas.current.addGun(px*posu, py*posu, pz*posu, dx, dy, dz, energy*energyu);\r\n    gun.id = +DetectorButton.id;\r\n    gun.name = n;\r\n    gun.units[0] = posu;\r\n    gun.units[1] = energyu;\r\n    Parser.addGunCode(gun.id, n, new Vector3(px, py, pz),new Vector3(dx, dy, dz),energy, posu, energyu);\r\n\r\n    this.guns.push(gun);\r\n    var b = React.createRef();\r\n    bs.push(<GunButton ref={b} codeeditor={this.codeeditor} name={n} removebutton={this.removeGun} id={DetectorButton.id} detector={gun} key={++DetectorButton.id} buttons={this.state.gunbuttons}></GunButton>);\r\n    this.setState({ gunbuttons: bs });\r\n    this.canvas.current.gun_buttons.push(b);\r\n    Logger.log(1, \"Created gun\");\r\n    this.checkRunnable();\r\n\r\n    return [gun, DetectorButton.id];\r\n  }\r\n  /*Create detector object\r\n    name string\r\n    position vector3\r\n    rotation vector3\r\n    scale vector3\r\n    material string\r\n    the geometry of the detector its selected from the geometries list string\r\n    data if stl is selected the data contains the vertices of the detector's geometry\r\n    code generate code for the codeeditor boolean\r\n    measurements\r\n  */\r\n  async createDetector(n, px, py, pz, rx, ry, rz, sx, sy, sz, material, type, data, color, code, posu, rotu, scaleu) {\r\n    this.navbar.current.showClearSetup(true);\r\n    let bs = this.state.buttons;\r\n    if(!code) this.codeeditor.current.addDetectorCode(0, n, new Vector3(px,py,pz), new Vector3(rx,ry,rz), new Vector3(sx, sy, sz), material,\r\n    type, posu, rotu, scaleu);\r\n    let paramterize = (detector) => {\r\n      detector.id = +DetectorButton.id;\r\n      detector.geometry = type;\r\n      \r\n      Parser.addDetectorCode(detector.id, n, new Vector3(px,py,pz), new Vector3(rx,ry,rz), new Vector3(sx, sy, sz), material,\r\n      type, posu, rotu, scaleu);\r\n      \r\n    //   this.codeeditor.current.addDetectorCode(detector.id, n, new Vector3(px,py,pz), new Vector3(rx,ry,rz), new Vector3(sx, sy, sz), material,\r\n    // type, posu, rotu, scaleu, code);\r\n\r\n      detector.name = n;\r\n      detector.model.color = color;\r\n      detector.units[0] = posu;\r\n      detector.units[1] = rotu;\r\n      detector.units[2] = scaleu;\r\n      this.detectors.push(detector);\r\n      var b = React.createRef();\r\n      bs.push(<DetectorButton createvolume={this.createVolume} ref={b} volumes={this.volumes} canvas={this.canvas} codeeditor={this.codeeditor} name={n} removebutton={this.removeDetector} id={DetectorButton.id} detector={detector} key={++DetectorButton.id} buttons={this.state.buttons}></DetectorButton>);\r\n      this.canvas.current.detector_buttons.push(b);\r\n      this.setState({ buttons: bs });\r\n    }\r\n    let detector = null;\r\n    if (type == \"stl\") {\r\n      //let modelData = STLParser.parseData(data);\r\n      //detector = this.canvas.current.addSTLDetector(px*posu, py*posu, pz*posu, rx*rotu, ry*rotu, rz*rotu, sx*scaleu, sy*scaleu, sz*scaleu, material, modelData);\r\n      //paramterize(detector);\r\n      this.createVolume(n + \"Volume\", data, n + \"Volume\");\r\n      this.createDetector(n, px, py, pz, rx, ry, rz, sx, sy, sz, material, n + \"Volume\", data, color, code, posu, rotu, scaleu);\r\n    } else {\r\n      detector = await this.canvas.current.addDetector(px*posu, py*posu, pz*posu, rx*rotu, ry*rotu, rz*rotu, sx*scaleu, sy*scaleu, sz*scaleu, material, type, this.volumes);\r\n      paramterize(detector);\r\n    }\r\n    Logger.log(1, \"Created detector\");\r\n    this.checkRunnable();\r\n\r\n    return [detector, DetectorButton.id];\r\n  }\r\n  clearSetup() {\r\n    Parser.chunks = [];\r\n    this.codeeditor.current.updateText(\" \");\r\n    this.codeeditor.current.text = \"\";\r\n    //DetectorButton.id = 0;\r\n    this.setState({ buttons: [], gunbuttons: [], sourcebuttons: [] });\r\n    this.canvas.current.clearSetup();\r\n    RenderSystem.active_id = -1;\r\n    this.detectors = [];\r\n    this.sources = [];\r\n    this.guns = [];\r\n    this.state.buttons = [];\r\n    this.state.gunbuttons = [];\r\n    this.state.sourcebuttons = [];\r\n    this.canvas.current.detector_buttons = [];\r\n    this.canvas.current.source_buttons = [];\r\n    this.canvas.current.gun_buttons = [];\r\n\r\n    this.clearRun();\r\n    this.checkRunnable();\r\n    Logger.log(1, \"Cleared setup\")\r\n  }\r\n  removeVolumes(){\r\n    this.volumes = [];\r\n    this.setState({volumebuttons: []});\r\n    VolumeList.removeAll();\r\n  }\r\n  /*\r\n  Remove particle source\r\n  */\r\n  removeSource(source, buttonid) {\r\n\r\n    if (this.sources.length == 0 && this.guns.length == 0 && this.detectors.length == 0) this.navbar.current.showClearSetup(false);\r\n    this.canvas.current.removeSource(source);\r\n    this.codeeditor.current.updateText(Parser.removeChunk(source.id));\r\n\r\n    for (var i = 0; i < this.state.sourcebuttons.length; i++) {\r\n      if (this.state.sourcebuttons[i].key - 1 == buttonid) {\r\n        let bs = this.state.sourcebuttons;\r\n        bs.splice(i, 1);\r\n        this.sources.splice(i, 1);\r\n        this.canvas.current.source_buttons.splice(i, 1);\r\n        this.setState({ sourcebuttons: bs });\r\n        Logger.log(1, \"Removed source\")\r\n        this.checkRunnable();\r\n\r\n        return;\r\n      }\r\n    }\r\n  }\r\n  /*\r\n  Remove particle gun\r\n  */\r\n  removeGun(gun, buttonid) {\r\n\r\n    if (this.sources.length == 0 && this.guns.length == 0 && this.detectors.length == 0) this.navbar.current.showClearSetup(false);\r\n    Logger.log(1, \"Removed gun\");\r\n\r\n    this.canvas.current.removeGun(gun);\r\n    this.codeeditor.current.updateText(Parser.removeChunk(gun.id));\r\n\r\n    for (var i = 0; i < this.state.gunbuttons.length; i++) {\r\n      if (this.state.gunbuttons[i].key - 1 == buttonid) {\r\n        let bs = this.state.gunbuttons;\r\n        bs.splice(i, 1);\r\n        this.guns.splice(i, 1);\r\n        this.canvas.current.gun_buttons.splice(i, 1);\r\n        this.setState({ gunbuttons: bs });\r\n        this.checkRunnable();\r\n\r\n        return;\r\n      }\r\n    }\r\n  }\r\n  /*\r\n  Remove detector\r\n  */\r\n  removeDetector(detector, buttonid) {\r\n    if (this.sources.length == 0 && this.guns.length == 0 && this.detectors.length == 0) this.navbar.current.showClearSetup(false);\r\n    RenderSystem.active_id = -1;\r\n    this.canvas.current.removeDetector(detector);\r\n    this.codeeditor.current.updateText(Parser.removeChunk(detector.id));\r\n\r\n    for (var i = 0; i < this.state.buttons.length; i++) {\r\n      if (this.state.buttons[i].key - 1 == buttonid) {\r\n        let bs = this.state.buttons;\r\n        bs.splice(i, 1);\r\n        this.canvas.current.detector_buttons.splice(i, 1);\r\n        this.detectors.splice(i, 1);\r\n        this.setState({ buttons: bs });\r\n        Logger.log(1, \"Removed detector\");\r\n        this.checkRunnable();\r\n\r\n        return;\r\n      }\r\n    }\r\n\r\n  }\r\n  setShowTracks(b) {\r\n    this.canvas.current.setShowTracks(!b);\r\n  }\r\n  setShowParticles(b) {\r\n    this.canvas.current.drawParticles = !b;\r\n  }\r\n  setShowAxes(b) {\r\n    this.canvas.current.setShowAxes(!b);\r\n  }\r\n  setShowGrid(b) {\r\n    this.canvas.current.drawGrid = !b;\r\n  }\r\n  load(){\r\n    this.loadfile.current.click();\r\n  }\r\n  saveOnline(name){\r\n    SaveLoad.saveonline(this.codeeditor.current.state.text,this.volumes,name);\r\n  }\r\n  updateProject(){\r\n    const id = WindowParams.get(\"projectid\");\r\n    // const windowUrl = window.location.search;\r\n    // const params = new URLSearchParams(windowUrl);\r\n    // const id = params.get(\"projectid\");\r\n    SaveLoad.update(id, this.codeeditor.current.state.text,this.volumes);\r\n  }\r\n  save(name){\r\n    SaveLoad.save(this.codeeditor.current.state.text,this.volumes, name);\r\n  }\r\n  async componentDidMount() {\r\n\r\n    Requests.get(\"\");\r\n\r\n    await MaterialList.init();\r\n\r\n    //setup volumes from the database\r\n    Parser.init(this.volumeselect.current, this.popup.current.showDialog);\r\n    Error.init(this.errordialog.current);\r\n\r\n    let json = 0;\r\n    while(json.length == undefined){\r\n      \r\n      let response = await Requests.get(\"geometryAPI/get\");\r\n      json = await response.json();\r\n    }\r\n    \r\n    for (let i = 0; i < json.length; i++) {\r\n      var str = '';\r\n      for (let j = 0; j < json[i].data.data.length; j++) {\r\n        str += String.fromCharCode(json[i].data.data[j]);\r\n      }\r\n      this.createVolume(json[i].name, str, \"\");\r\n    }\r\n    //setup first detector\r\n    this.createDetector(\"Cube\", 0, 0, 0, 0, 0, 0, 10, 10, 10, \"Pb\", 'cube', null, new Vector3(.5, .5, .5), false, 1, 1, 1);\r\n    VolumeList.init(this.codeeditor.current);\r\n    //setup first source\r\n    this.createSource(\"GPS\",0,0,0,\"Co60\",false,1);\r\n\r\n     //run a few tests\r\n     //CodeTests.langTest([this.codeeditor.current.onclickfunction,this.createDetector, this.createSource, this.createGun,this.removeDetector,this.removeSource,this.removeGun, this.clearSetup]);\r\n    \r\n    //init project\r\n    // const windowUrl = window.location.search;\r\n    // const params = new URLSearchParams(windowUrl);\r\n    // const id = params.get(\"projectid\");\r\n    const id = WindowParams.get(\"projectid\");\r\n    this.navbar.current.setProjectName(\"Geant4\");\r\n    if(id != null){\r\n      //load project\r\n      await SaveLoad.loadonline(id).then(e=>{\r\n            \r\n        if(e[1][0].content != \"Created at radsim.inf.elte.hu\"){\r\n          this.errordialog.current.setContent(\"Invalid project file selected.\");\r\n          this.errordialog.current.showDialog();\r\n          return;\r\n        }\r\n        this.removeVolumes();\r\n        this.codeeditor.current.updateText(e[1][1].content+\"\"); \r\n        for(let i = 2;i<e[1].length;i++){\r\n          this.createVolume(e[1][i].name.split(\"/\")[1].split(\".\")[0]+\"\", e[1][i].content+\"\", e[1][i].name+\"\");\r\n        }\r\n        this.codeeditor.current.run();\r\n        //alert(e[0]);\r\n        this.navbar.current.setProjectName(e[0]);\r\n      });\r\n    }  \r\n  }\r\n  showSaveDialog(){\r\n    this.confirmdialog.current.showDialog();\r\n  }\r\n  render() {\r\n    \r\n    const items = this.state.buttons.map(function (item) {\r\n      return <div style={{ \"z-index\": \"3\", \"color\": \"black\" }}> {item} </div>;\r\n    });\r\n    const gunButtons = this.state.gunbuttons.map(function (item) {\r\n      return <div> {item} </div>\r\n    });\r\n    const sourceButtons = this.state.sourcebuttons.map(function (item) {\r\n      return <div> {item} </div>\r\n    });\r\n    let volumeButtons = this.state.volumebuttons.map(function (item) {\r\n      return <div style={{ \"z-index\": \"3\", \"color\": \"black\" }}> {item} </div>\r\n    });\r\n    return <div>\r\n      <ErrorDialog ref={this.errordialog} title=\"ERROR\" content=\"Choose a zip file.\"></ErrorDialog>\r\n      <input ref={this.loadfile} style={{\"display\": \"none\"}} type=\"file\" onChange={e=>{\r\n        var r = new FileReader();\r\n\r\n        r.onload = async ()=>{\r\n          var data = r.result;\r\n          await SaveLoad.load(data).then(e=>{\r\n            \r\n            if(e[0].content != \"Created at radsim.inf.elte.hu\"){\r\n              this.errordialog.current.setContent(\"Invalid project file selected.\");\r\n              this.errordialog.current.showDialog();\r\n              return;\r\n            }\r\n            this.removeVolumes();\r\n            this.codeeditor.current.updateText(e[1].content+\"\"); \r\n            for(let i = 2;i<e.length;i++){\r\n              this.createVolume(e[i].name.split(\"/\")[1].split(\".\")[0]+\"\", e[i].content+\"\", e[i].name+\"\");\r\n            }\r\n            this.codeeditor.current.run();\r\n          });\r\n          \r\n        }\r\n        if(e.target.files[0].name.split(\".\")[e.target.files[0].name.split(\".\").length-1] != \"zip\"){\r\n          this.errordialog.current.showDialog();\r\n          return;\r\n        }\r\n        r.readAsBinaryString(e.target.files[0]);\r\n        e.target.value = null;\r\n      }}></input>\r\n      \r\n      <VolumeSelectDialog ref={this.volumeselect} createbutton={this.createVolume}></VolumeSelectDialog>\r\n      <VolumeDialog ref={this.volumedialog} createbutton={this.createVolume}></VolumeDialog>\r\n      <PopupDialog ref={this.popup}></PopupDialog>\r\n      <GraphDialog ref={this.graphdialog}></GraphDialog>\r\n      <SaveOnlineDialog saveonline={this.saveOnline} ref={this.confirmdialog}></SaveOnlineDialog>\r\n      <Tab.Container id=\"left-tabs-example\" defaultActiveKey=\"first\" activeKey={this.state.page}>\r\n        <Col sm={3}>\r\n          <Nav variant=\"pills\" className=\"flex-column\" className='page'>\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"first\" onClick={() => { this.setState({ page: 'first' }); }}>simulation</Nav.Link>\r\n            </Nav.Item>\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"second\" disabled={this.state.spectrum} onClick={() => { this.setState({ page: 'second' }); }}>spectrum</Nav.Link>\r\n            </Nav.Item>\r\n          </Nav>\r\n        </Col>\r\n        <Tab.Content>\r\n          <Tab.Pane eventKey=\"first\" style={{ \"overflow\": \"hidden\" }}>\r\n            <Canvas ref={this.canvas} style={{ \"overflow\": \"hidden\" }} buttons={this.state.buttons}></Canvas>\r\n            <CodeEditor save={this.save} ref={this.codeeditor} createGun={this.createGun} clearSetup={this.clearSetup} createSource={this.createSource} createDetector={this.createDetector} canvas={this.canvas} />\r\n            <NavigationBar run={this.runSim}\r\n              save = {this.save}\r\n              load = {this.load}\r\n              saveonline = {this.showSaveDialog}\r\n              updateproject={this.updateProject}\r\n              ref={this.navbar}\r\n              canvas={this.canvas}\r\n              projectname={this.state.projectName}\r\n              className=\"navbar\"\r\n              volumes={this.volumes}\r\n              runspectroscopy={this.runSpectroscopy}\r\n              createbutton={this.createDetector}\r\n              creategunbutton={this.createGun}\r\n              createsourcebutton={this.createSource}\r\n              createvolume={this.createVolume}\r\n              setshowtracks={this.setShowTracks}\r\n              setshowparticles={this.setShowParticles}\r\n              setshowaxes={this.setShowAxes}\r\n              setshowgrid={this.setShowGrid}\r\n              clearrun={this.clearRun}\r\n              clearSetup={this.clearSetup}\r\n              detectors={this.detectors}\r\n              buttons={this.state.buttons}></NavigationBar>\r\n            <div className='buttonbackground'>\r\n            </div>\r\n            <Accordion ref={this.accordion} defaultActiveKey=\"0\" className='accordion' style={{ \"maxHeight\": window.innerHeight - 50, \"height\": window.innerHeight - 50, \"overflow-y\": \"scroll\" }}>\r\n              \r\n              <div style={{ color: 'white', 'text-align': 'center', 'background-color': 'gray', 'border': '1px solid white' }}>\r\n                Volumes\r\n          </div>\r\n              {volumeButtons}\r\n              <div style={{ color: 'white', 'text-align': 'center', 'background-color': 'gray', 'border': '1px solid white' }}>\r\n                Detectors\r\n          </div>\r\n              {items}\r\n              <div style={{ color: 'white', 'text-align': 'center', 'background-color': 'gray', 'border': '1px solid white' }}>\r\n                Sources\r\n          </div>\r\n              {sourceButtons}\r\n              <div style={{ color: 'white', 'text-align': 'center', 'background-color': 'gray', 'border': '1px solid white' }}>\r\n                Guns\r\n          </div>\r\n              {gunButtons}\r\n            </Accordion>\r\n          </Tab.Pane>\r\n          <Tab.Pane eventKey=\"second\">\r\n            <Spectrum ref={this.spectrum}></Spectrum>\r\n          </Tab.Pane>\r\n        </Tab.Content>\r\n      </Tab.Container>\r\n\r\n\r\n    </div>\r\n\r\n  }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}