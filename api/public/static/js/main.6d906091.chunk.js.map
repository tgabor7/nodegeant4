{"version":3,"sources":["images/editicon.png","rendering/shader.js","utils/maths.js","shaders/gridshader.js","shaders/instanceshader.js","rendering/InstanceRenderer.js","rendering/grid.js","shaders/mainshader.js","rendering/model.js","entities/cube.js","rendering/renderSystem.js","detector/Detektor.js","gun/ParticleGun.js","gun/gun.js","source/ParticleSource.js","utils/STLParser.js","graphics/Canvas.js","detector/MaterialList.js","graphics/ConfirmDialog.js","utils/Parser.js","detector/DetectorEditDialog.js","detector/DetectorButton.js","graphics/MaterialTable.js","detector/DetectorDialog.js","gun/GunEditDialog.js","gun/GunButton.js","gun/GunDialog.js","source/SourceEditDialog.js","source/SourceButton.js","source/SourceDialog.js","graphics/RunDialog.js","graphics/SpectrumDialog.js","graphics/NavigationBar.js","entities/Particle.js","graphics/spectrum.js","graphics/CodeEditor.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Shader","attribs","path","gl","this","vertexShaderText","vertexShader","fragmentShaderText","fragmentShader","createShader","VERTEX_SHADER","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","program","createProgram","attachShader","i","length","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","validateProgram","VALIDATE_STATUS","console","error","getProgramInfoLog","getShaderInfoLog","useProgram","name","value","location","getUniformLocation","uniform1f","uniform1i","x","y","z","uniform3f","uniformMatrix4fv","Matrix","Float64Array","Vector3","Camera","d","p","a","Maths","mat","v","res","result","l","Math","sqrt","r","eye","center","up","forward","upt","normalize","side","cross","m","invert","inv","det","angle","c","cos","s","sin","axis","temp","R","n","j","k","rx","ry","rz","sx","sy","sz","translate","rotate","scale","camera","view","lookAt","FOV","NEAR_PLANE","FAR_PLANE","width","height","aspectRatio","y_scale","tan","x_scale","frustum_length","projectionMatrix","left","right","bottom","top","zNear","zFar","u","GridShader","InstancedShader","InstanceRenderer","vertices","vao","createVertexArray","bindVertexArray","index","vbo","createVBO","color_vbo","shader","InstanceShader","storeData","disableVertexAttribArray","addIntanceAttrib","drawLines","particles","projection","vboData","colorData","colorIndex","bind","enableVertexAttribArray","storeMatrixData","createTransformationMatrix","position","storeVectorData","color","updateVBO","drawArraysInstanced","LINES","TRIANGLES","setUniform4fv","setUniform3f","setUniform","unBind","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STREAM_DRAW","attribnumber","coordinateSize","data","STATIC_DRAW","vertexAttribPointer","FLOAT","FALSE","attribute","datasize","datalength","offset","vertexAttribDivisor","bufferSubData","GridRenderer","vertical","horizontal","verticalRenderer","horizontalRenderer","Line","lines","push","hint","f","render","createViewMatrix","MainShader","Model","normals","outline","rotation","nvbo","drawArrays","LINE_STRIP","Cube","RenderSystem","models","sources","detectors","guns","addModel","drawTracks","drawParticles","drawAxes","detector","splice","gun","source","model","particle","disable","DEPTH_TEST","enable","setUniform1i","draw","id","active_id","atan2","direction","log","Detector","material","active","deposit","hits","numberOfHits","list","sort","b","hit","no","abs","ParticleGun","energy","GunMesh","ParticleSource","STLParrser","readFloat","chars","Uint8Array","charCodeAt","buffer","size","Int32Array","readInt","ModelData","Canvas","props","state","canvas","createRef","oldX","oldY","move","keyDown","down","renderer","instanceRenderer","drawGrid","updateHint","setState","clearTracks","current","getContext","gridRenderer","requestAnimationFrame","clearColor","clear","COLOR_BUFFER_BIT","createProjectionMatrix","offsetWidth","offsetHeight","getMouseYd","PI","getMouseXd","addSource","addDetector","type","parameterize","fetch","headers","method","body","JSON","stringify","response","json","String","str","fromCharCode","modeldata","STLParser","parseData","dx","dy","dz","gun_model","addGun","removeSource","removeDetector","removeGun","ref","style","onMouseMove","e","pageX","pageY","tabIndex","onKeyDown","keyCode","onKeyUp","onMouseDown","onMouseUp","onWheel","delta","deltaY","Component","MaterialList","materials","DetectorDialog","showDialog","hideDialog","show","Modal","onHide","Header","closeButton","Title","title","Body","content","Footer","Button","variant","onClick","fun","Parser","trim","split","chunks","alert","code","me","isNaN","parseFloat","text","clearSetup","createDetector","createSource","createGun","blocks","words","replace","measurement","substring","indexOf","includes","substr","params","checkFloat","checkString","DetectorEditDialog","confirmDialog","React","detname","detposx","detposy","detposz","detrotx","detroty","detrotz","detscalex","detscaley","detscalez","detmat","showError","hex","bigint","parseInt","ConfirmDialog","removebutton","button","Form","Container","Row","Col","Control","className","required","maxLength","onChange","event","target","Group","controlId","Label","onInput","evt","hexToRgb","backgroundColor","check","buttonid","codeeditor","updateText","updatedetails","DetectorButton","editdialog","updateDetails","details","buttons","Card","Accordion","Toggle","as","eventKey","Collapse","MaterialTable","mats","tmp","floor","Table","table","geomrty","display","filelabel","options","ann","detectorName","opt","File","label","data-browse","custom","FileReader","onload","readAsBinaryString","files","createbutton","GunEditDialog","detdirx","detdiry","detdirz","GunButton","acitve_id","GunDialog","SourceEditDialog","SourceButton","SourceDialog","RunDialog","numberOfParticles","loading","setLoading","margin","Spinner","animation","role","runsim","SpectrumDialog","numberofparticles","now","binsize","NavigationBar","dialog","gundialog","sourcedialog","rundialog","spectrumdialog","showRun","showTracks","showParticles","showAxes","showGrid","showrun","showclearsetup","showclearparticles","showClearSetup","creategunbutton","createsourcebutton","run","runspectroscopy","Navbar","bg","Brand","clearrun","showClearParticles","Nav","Dropdown","border","Menu","OverlayTrigger","overlay","Tooltip","Item","Check","checked","setshowtracks","setshowparticles","setshowaxes","setshowgrid","inline","FormControl","placeholder","Particle","track_id","parent_id","totalEnergy","energyDeposit","definition","Spectrum","energies","numberofenergies","chart","Chart","labels","datasets","borderColor","responsive","plugins","zoom","pan","enabled","mode","contains","getIndex","bin","max","add","addData","toString","destroy","ctx","scales","yAxes","scaleLabel","labelString","xAxes","forEach","dataset","update","CodeEditor","editor","parse","window","theme","fontSize","App","spectrum","navbar","gunbuttons","sourcebuttons","page","runSim","runSpectroscopy","setShowParticles","setShowTracks","setShowAxes","setShowGrid","clearRun","accordion","tracks","number_of_particles","message_data","number_of_detectors","number_of_sources","number_of_guns","sendGamma","hidedialog","send","message","then","processGammaSpectrum","processResponse","floats","track_data","numberOfSteps","t_norm","tm","tmp_particles","ceil","slice","get_average","addParticle","bs","key","px","py","pz","paramterize","modelData","addSTLDetector","sourceslength","removeChunk","items","map","item","gunButtons","sourceButtons","Tab","defaultActiveKey","activeKey","sm","Link","disabled","Content","Pane","overflow","Boolean","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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O,UAAY,IAAK,MAAU,UAAWpS,KAAK8O,MAAMlE,MACpI,4BAAQuH,IAAKnS,KAAK+O,OAAQsD,YAAa,SAACC,GACtC,EAAKnD,MAAO,EACZ,EAAKF,KAAO,EAAK/M,EACjB,EAAKgN,KAAO,EAAK/M,EACjB,EAAKD,EAAIoQ,EAAEC,MACX,EAAKpQ,EAAImQ,EAAEE,OAEbC,SAAS,IACT5M,MAAM,OACNC,OAAO,OACPsM,MAAO,CAAC9J,SAAU,QAAShC,MAAO,EAAGD,KAAM,EAAGR,MAAO,OAAQC,OAAQ,QACrE4M,UAAW,SAACJ,GAAK,EAAKlD,QAAUkD,EAAEK,SAClCC,QAAS,SAACN,GAAK,EAAKlD,QAAL,WAAmB,IAClCyD,YAAa,WAAK,EAAKxD,MAAO,GAC9ByD,UAAW,WAAK,EAAKzD,MAAO,GAC5B0D,QAAS,SAACT,GACR,IAAIU,EAAQ,EACKA,EAAdV,EAAEW,OAAS,EAAW,GACX,EACd,EAAK1N,OAAO5C,GAAM,EAAK4C,OAAO5C,GAAW,IAANqQ,GAAc,W,GAnOlCE,a,2GCjBfC,E,mGAwHO7O,GACT,IAAI,IAAIvD,EAAI,EAAEA,EAAEoS,EAAaC,UAAUpS,OAAOD,IAC1C,GAAGuD,GAAK6O,EAAaC,UAAUrS,GAAI,OAAO,EAE9C,OAAO,M,KA5HLoS,EACKC,UAAY,CACf,IACR,KACA,KACA,KACA,IACA,IACA,IACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,IACA,IACA,KACA,KACA,IACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA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","file":"static/js/main.6d906091.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","class Shader {\r\n    constructor(attribs,path ,gl){\r\n        this.gl = gl;\r\n        var vertexShaderText = path.vertexShader;\r\n        var fragmentShaderText = path.fragmentShader;\r\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n    \r\n        gl.shaderSource(vertexShader, vertexShaderText);\r\n        gl.shaderSource(fragmentShader, fragmentShaderText);\r\n    \r\n        gl.compileShader(vertexShader);\r\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling vertex shader!', gl.getShaderInfoLog(vertexShader));\r\n            return;\r\n        }\r\n    \r\n        gl.compileShader(fragmentShader);\r\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling fragment shader!', gl.getShaderInfoLog(fragmentShader));\r\n            return;\r\n        }\r\n    \r\n        this.program = gl.createProgram();\r\n        gl.attachShader(this.program, vertexShader);\r\n        gl.attachShader(this.program, fragmentShader);\r\n\r\n        for(var i = 0;i<attribs.length;i++){\r\n            gl.bindAttribLocation(this.program, attribs[i][0], attribs[i][1]);\r\n        }\r\n\r\n        gl.linkProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\r\n            console.error('ERROR linking program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        gl.validateProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.VALIDATE_STATUS)) {\r\n            console.error('ERROR validating program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        /*var positionAttribLocation = gl.getAttribLocation(this.program, 'vertPosition');\r\n        var normalAttribLocation = gl.getAttribLocation(this.program, 'normal');*/\r\n        \r\n        \r\n\r\n        /*for(var i = 0;i<attribs.length;i++){\r\n            gl.vertexAttribPointer(positionAttribLocation, attribs[i], gl.FLOAT,gl.FALSE,0,0);\r\n        }*/\r\n        \r\n        /*gl.vertexAttribPointer(\r\n            normalAttribLocation, 3, gl.FLOAT, gl.FALSE,\r\n            0,\r\n            0 \r\n        );*/\r\n        \r\n    }\r\n    bind(){\r\n        this.gl.useProgram(this.program);\r\n    }\r\n    unBind(){\r\n        this.gl.useProgram(null);\r\n    }\r\n    setUniform(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1f(location,value);\r\n        }\r\n    }\r\n    setUniform1i(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1i(location,value);\r\n        }\r\n    }\r\n    setUniform3f(name,x,y,z){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform3f(location,x,y,z);\r\n        }\r\n    }\r\n    setUniform4fv(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniformMatrix4fv(location,false,value);\r\n        }\r\n        \r\n    }\r\n}\r\nexport default Shader;","class Matrix extends Float64Array {\r\n    constructor() {\r\n        super(16);\r\n        this[0] = 1.0;\r\n        this[5] = 1.0;\r\n        this[10] = 1.0;\r\n        this[15] = 1.0;\r\n    }\r\n}\r\nclass Vector4 {\r\n    constructor(x, y, z, w) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n}\r\nclass Vector3 {\r\n    constructor(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n\r\n}\r\nclass Camera {\r\n    constructor(x, y, d, p, a) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.d = d;\r\n        this.p = p;\r\n        this.a = a;\r\n    }\r\n\r\n}\r\nclass Maths {\r\n    static scale(mat, v) {\r\n        var res = new Matrix();\r\n        for(var i = 0;i<16;i++){\r\n            res[i] = mat[i];\r\n        }\r\n        res[0] = res[0] * v.x;\r\n        res[1] = res[1] * v.x;\r\n        res[2] = res[2] * v.x;\r\n\r\n        res[4] = res[4] * v.y;\r\n        res[5] = res[5] * v.y;\r\n        res[6] = res[6] * v.y;\r\n\r\n        res[8] = res[8] * v.z;\r\n        res[9] = res[9] * v.z;\r\n        res[10] = res[10] * v.z;\r\n\r\n        return res;\r\n\r\n    }\r\n    static translate(mat, v) {\r\n        var res = new Matrix();\r\n        for(var i = 0;i<16;i++){\r\n            res[i] = mat[i];\r\n        }\r\n        res[12] = mat[0] * v.x + mat[4] * v.y + mat[8] * v.z + mat[12];\r\n        res[13] = mat[1] * v.x + mat[5] * v.y + mat[9] * v.z + mat[13];\r\n        res[14] = mat[2] * v.x + mat[6] * v.y + mat[10] * v.z + mat[14];\r\n        res[15] = mat[3] * v.x + mat[7] * v.y + mat[11] * v.z + mat[15];\r\n\r\n        return res;\r\n    }\r\n    static normalize(v) {\r\n        var result = new Vector3();\r\n        result.x = v.x;\r\n        result.y = v.y;\r\n        result.z = v.z;\r\n        \r\n        var l = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\r\n        result.x /= l;\r\n        result.y /= l;\r\n        result.z /= l;\r\n        \r\n        return result;\r\n    }\r\n    static mulVectorDouble(v, d) {\r\n        var res = new Vector3(0,0,0);\r\n        res.x = v.x;\r\n        res.y = v.y;\r\n        res.z = v.z;\r\n        \r\n        res.x *= d;\r\n        res.y *= d;\r\n        res.z *= d;\r\n\r\n        return res;\r\n    }\r\n    static cross(v, p) {\r\n        var r = new Vector3(0,0,0);\r\n\r\n        r.x = v.y * p.z - v.z * p.y;\r\n        r.y = v.z * p.x - v.x * p.z;\r\n        r.z = v.x * p.y - v.y * p.x;\r\n\r\n        return r;\r\n    }\r\n    static lookAt(eye, center, up) {\r\n        var forward = new Vector3(0,0,0);\r\n        var upt = new Vector3(0,0,0);\r\n\r\n        forward.x = center.x - eye.x;\r\n        forward.y = center.y - eye.y;\r\n        forward.z = center.z - eye.z;\r\n        \r\n        forward = this.normalize(forward);\r\n\r\n        \r\n        var side = new Vector3(0,0,0);\r\n        side = this.cross(forward, up);\r\n  \r\n        \r\n        side = this.normalize(side);\r\n       \r\n        \r\n\r\n        upt = this.cross(side, forward);\r\n        \r\n\r\n        var m = new Matrix();\r\n        m[0] = side.x;\r\n        m[1] = side.y;\r\n        m[2] = side.z;\r\n        m[4] = upt.x;\r\n        m[5] = upt.y;\r\n        m[6] = upt.z;\r\n        m[8] = -forward.x;\r\n        m[9] = -forward.y;\r\n        m[10] = -forward.z;\r\n        \r\n        m = this.invert(m);\r\n\r\n        return m;\r\n    }\r\n    static invert(m) {\r\n        var result = new Matrix();\r\n        var inv = new Matrix();\r\n        \r\n        var det = 0.0;\r\n        inv[0] = m[5] * m[10] * m[15] -\r\n            m[5] * m[11] * m[14] -\r\n            m[9] * m[6] * m[15] +\r\n            m[9] * m[7] * m[14] +\r\n            m[13] * m[6] * m[11] -\r\n            m[13] * m[7] * m[10];\r\n\r\n        inv[4] = -m[4] * m[10] * m[15] +\r\n            m[4] * m[11] * m[14] +\r\n            m[8] * m[6] * m[15] -\r\n            m[8] * m[7] * m[14] -\r\n            m[12] * m[6] * m[11] +\r\n            m[12] * m[7] * m[10];\r\n\r\n        inv[8] = m[4] * m[9] * m[15] -\r\n            m[4] * m[11] * m[13] -\r\n            m[8] * m[5] * m[15] +\r\n            m[8] * m[7] * m[13] +\r\n            m[12] * m[5] * m[11] -\r\n            m[12] * m[7] * m[9];\r\n\r\n        inv[12] = -m[4] * m[9] * m[14] +\r\n            m[4] * m[10] * m[13] +\r\n            m[8] * m[5] * m[14] -\r\n            m[8] * m[6] * m[13] -\r\n            m[12] * m[5] * m[10] +\r\n            m[12] * m[6] * m[9];\r\n\r\n        inv[1] = -m[1] * m[10] * m[15] +\r\n            m[1] * m[11] * m[14] +\r\n            m[9] * m[2] * m[15] -\r\n            m[9] * m[3] * m[14] -\r\n            m[13] * m[2] * m[11] +\r\n            m[13] * m[3] * m[10];\r\n\r\n        inv[5] = m[0] * m[10] * m[15] -\r\n            m[0] * m[11] * m[14] -\r\n            m[8] * m[2] * m[15] +\r\n            m[8] * m[3] * m[14] +\r\n            m[12] * m[2] * m[11] -\r\n            m[12] * m[3] * m[10];\r\n\r\n        inv[9] = -m[0] * m[9] * m[15] +\r\n            m[0] * m[11] * m[13] +\r\n            m[8] * m[1] * m[15] -\r\n            m[8] * m[3] * m[13] -\r\n            m[12] * m[1] * m[11] +\r\n            m[12] * m[3] * m[9];\r\n\r\n        inv[13] = m[0] * m[9] * m[14] -\r\n            m[0] * m[10] * m[13] -\r\n            m[8] * m[1] * m[14] +\r\n            m[8] * m[2] * m[13] +\r\n            m[12] * m[1] * m[10] -\r\n            m[12] * m[2] * m[9];\r\n\r\n        inv[2] = m[1] * m[6] * m[15] -\r\n            m[1] * m[7] * m[14] -\r\n            m[5] * m[2] * m[15] +\r\n            m[5] * m[3] * m[14] +\r\n            m[13] * m[2] * m[7] -\r\n            m[13] * m[3] * m[6];\r\n\r\n        inv[6] = -m[0] * m[6] * m[15] +\r\n            m[0] * m[7] * m[14] +\r\n            m[4] * m[2] * m[15] -\r\n            m[4] * m[3] * m[14] -\r\n            m[12] * m[2] * m[7] +\r\n            m[12] * m[3] * m[6];\r\n\r\n        inv[10] = m[0] * m[5] * m[15] -\r\n            m[0] * m[7] * m[13] -\r\n            m[4] * m[1] * m[15] +\r\n            m[4] * m[3] * m[13] +\r\n            m[12] * m[1] * m[7] -\r\n            m[12] * m[3] * m[5];\r\n\r\n        inv[14] = -m[0] * m[5] * m[14] +\r\n            m[0] * m[6] * m[13] +\r\n            m[4] * m[1] * m[14] -\r\n            m[4] * m[2] * m[13] -\r\n            m[12] * m[1] * m[6] +\r\n            m[12] * m[2] * m[5];\r\n\r\n        inv[3] = -m[1] * m[6] * m[11] +\r\n            m[1] * m[7] * m[10] +\r\n            m[5] * m[2] * m[11] -\r\n            m[5] * m[3] * m[10] -\r\n            m[9] * m[2] * m[7] +\r\n            m[9] * m[3] * m[6];\r\n\r\n        inv[7] = m[0] * m[6] * m[11] -\r\n            m[0] * m[7] * m[10] -\r\n            m[4] * m[2] * m[11] +\r\n            m[4] * m[3] * m[10] +\r\n            m[8] * m[2] * m[7] -\r\n            m[8] * m[3] * m[6];\r\n\r\n        inv[11] = -m[0] * m[5] * m[11] +\r\n            m[0] * m[7] * m[9] +\r\n            m[4] * m[1] * m[11] -\r\n            m[4] * m[3] * m[9] -\r\n            m[8] * m[1] * m[7] +\r\n            m[8] * m[3] * m[5];\r\n\r\n        inv[15] = m[0] * m[5] * m[10] -\r\n            m[0] * m[6] * m[9] -\r\n            m[4] * m[1] * m[10] +\r\n            m[4] * m[2] * m[9] +\r\n            m[8] * m[1] * m[6] -\r\n            m[8] * m[2] * m[5];\r\n\r\n        det = m[0] * inv[0] + m[1] * inv[4] + m[2] * inv[8] + m[3] * inv[12];\r\n        det = 1.0 / det;\r\n        \r\n        for (var i = 0; i < 16; i++)\r\n            result[i] = inv[i] * det;\r\n\r\n        return result;\r\n    }\r\n    \r\n    static rotate(mat, angle, v) {\r\n        var result = new Matrix();\r\n        var a = angle;\r\n        var c = Math.cos(a);\r\n        var s = Math.sin(a);\r\n\r\n        var axis = new Vector3(0,0,0);\r\n        axis.x = v.x;\r\n        axis.y = v.y;\r\n        axis.z = v.z;\r\n        var temp = new Vector3(axis.x * (1.0 - c),axis.y * (1.0 - c),axis.z * (1.0 - c));\r\n       \r\n        result[0] = c + temp.x * axis.x;\r\n        result[1] = temp.x * axis.y + s * axis.z;\r\n        result[2] = temp.x * axis.z - s * axis.y;\r\n\r\n        result[4] = temp.y * axis.x - s * axis.z;\r\n        result[5] = c + temp.y * axis.y;\r\n        result[6] = temp.y * axis.z + s * axis.x;\r\n\r\n        result[8] = temp.z * axis.x + s * axis.y;\r\n        result[9] = temp.z * axis.y - s * axis.x;\r\n        result[10] = c + temp.z * axis.z;\r\n\r\n        var R = new Matrix();\r\n        for(var i = 0;i<16;i++){\r\n            R[i] = mat[i];\r\n        }\r\n        R[0] = mat[0] * result[0] + mat[4] * result[1] + mat[8] * result[2];\r\n        R[1] = mat[1] * result[0] + mat[5] * result[1] + mat[9] * result[2];\r\n        R[2] = mat[2] * result[0] + mat[6] * result[1] + mat[10] * result[2];\r\n\r\n        R[4] = mat[0] * result[4] + mat[4] * result[5] + mat[8] * result[6];\r\n        R[5] = mat[1] * result[4] + mat[5] * result[5] + mat[9] * result[6];\r\n        R[6] = mat[2] * result[4] + mat[6] * result[5] + mat[10] * result[6];\r\n        \r\n        R[8] = mat[0] * result[8] + mat[4] * result[9] + mat[8] * result[10];\r\n        R[9] = mat[1] * result[8] + mat[5] * result[9] + mat[9] * result[10];\r\n        R[10] = mat[2] * result[8] + mat[6] * result[9] + mat[10] * result[10];\r\n        \r\n        R[12] = mat[12];\r\n        R[13] = mat[13];\r\n        R[14] = mat[14];\r\n        return R;\r\n    }\r\n    static mul(m,n){\r\n        var res = new Matrix();\r\n\r\n        for (var i = 0; i < 4; i++) {\r\n            for (var j = 0; j < 4; j++) {\r\n                res[i*4+j] = 0;\r\n                for (var k = 0; k < 4; k++) {\r\n                    res[i*4+j] += n[i*4+k] * m[k*4+j];\r\n                }\r\n            }\r\n        }\r\n\r\n\t    return res;\r\n    }\r\n    static createTransformationMatrix(x, y, z, rx, ry, rz, sx, sy, sz) {\r\n        var res = new Matrix();\r\n        res = Maths.translate(res, new Vector3(x, y, z));\r\n        \r\n        res = Maths.rotate(res, rx, new Vector3(1, 0, 0));\r\n        res = Maths.rotate(res, ry, new Vector3(0, 1, 0));\r\n        res = Maths.rotate(res, rz, new Vector3(0, 0, 1));\r\n\r\n        res = Maths.scale(res, new Vector3(sx, sy, sz));\r\n\r\n        return res;\r\n    }\r\n    static createViewMatrix(camera) {\r\n        var view = new Matrix();\r\n        \r\n        view = this.lookAt(camera.p, camera.a, new Vector3(0, 1 ,0));\r\n        view = this.translate(view, new Vector3(-camera.p.x, -camera.p.y, -camera.p.z));\r\n\r\n        return view;\r\n    }\r\n    static createBillBoardMatrix(camera){\r\n        var view = new Matrix();\r\n        \r\n        view = this.lookAt(camera.p, camera.a, new Vector3(0, 1 ,0));\r\n        view = this.translate(view, new Vector3(-camera.p.x, -camera.p.y, -camera.p.z));\r\n\r\n        return view;\r\n    }\r\n    static createProjectionMatrix(FOV, NEAR_PLANE, FAR_PLANE, width, height) {\r\n        var aspectRatio = width / height;\r\n        var y_scale = ((1.0 / Math.tan(((FOV / 2.0) / 360.0) * 3.14)) * aspectRatio);\r\n        var x_scale = y_scale / aspectRatio;\r\n        var frustum_length = FAR_PLANE - NEAR_PLANE;\r\n\r\n        var projectionMatrix = new Matrix();\r\n        \r\n        projectionMatrix[0] = x_scale;\r\n        projectionMatrix[5] = y_scale;\r\n        projectionMatrix[10] = -((FAR_PLANE + NEAR_PLANE) / frustum_length);\r\n        projectionMatrix[11] = -1.0;\r\n        projectionMatrix[14] = -((2.0 * NEAR_PLANE * FAR_PLANE) / frustum_length);\r\n        projectionMatrix[15] = 0.0;\r\n\r\n        return projectionMatrix;\r\n    }\r\n    static ortho(left, right, bottom, top, zNear, zFar) {\r\n        var res = new Matrix();\r\n\r\n        res[0] = 2.0 / (right - left);\r\n        res[5] = 2.0 / (top - bottom);\r\n        res[10] = -2 / (zFar - zNear);\r\n        res[12] = -((right + left) / (right - left));\r\n        res[13] = -((top + bottom) / (top - bottom));\r\n        res[14] = -((zFar + zNear) / (zFar - zNear));\r\n\r\n        return res;\r\n    }\r\n    static distance(v, u){\r\n        return Math.sqrt(v.x*u.x+v.y*u.y+v.z*u.z);\r\n    }\r\n}\r\n\r\nexport default Matrix;\r\nexport { Maths, Vector3, Camera }","export class GridShader{\r\n   \r\n    static vertexShader = \"precision mediump float;\" + \r\n\r\n    \"attribute vec2 vertPosition;\"+\r\n    \r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 transformation;\"+\r\n    \"uniform mat4 view;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n        \r\n     \"vec4 pos =  projection * view * transformation * vec4(vertPosition, 0.0, 1.0);\"+\r\n      \"tex_coords = vertPosition * 0.5 + 0.5;\"+\r\n      \"tex_coords.y = 1.0-tex_coords.y;\"+\r\n      \"gl_Position = pos;\"+\r\n      \r\n      \r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n    \r\n    \"uniform sampler2D sampler;\"+\r\n    \r\n    \"uniform float width;\"+\r\n    \"uniform float height;\"+\r\n    \"uniform float distance;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \r\n    \"int mod(int a, int b)\"+\r\n    \"{\"+\r\n    \"\treturn a - b * int(a/b);\"+\r\n    \"}\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"vec4 color = vec4(1.0);\"+\r\n      \r\n      \r\n      \"gl_FragColor = color;\"+\r\n    \"}\";\r\n}\r\n\r\n","export class InstancedShader{\r\n   \r\n    static vertexShader = \"precision mediump float;\"+\r\n\r\n    \"attribute vec3 vertPosition;\"+\r\n    \"attribute vec3 normal;\"+\r\n    \"attribute mat4 transformation;\"+\r\n    \"attribute vec3 color;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \"varying vec3 out_color;\"+\r\n    \r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 view;\"+\r\n    \"uniform float camera;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_Position = projection * view * transformation * vec4(vec3(vertPosition*camera*0.2), 1.0);\"+\r\n      \"out_color = color;\"+\r\n      \"fragPos = vec3(transformation * vec4(vertPosition, 1.0));\"+\r\n      \"Normal = normal;\"+\r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n\r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \r\n    \"varying vec3 out_color;\"+\r\n    \r\n    \"uniform sampler2D sampler;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"vec3 norm = normalize(Normal);\"+\r\n      \"vec3 lightDir = normalize(vec3(100) - fragPos);\"+ \r\n      \"float diff = max(dot(norm, lightDir), 0.0); \"+\r\n      \"vec3 diffuse = diff * vec3(1); \"+\r\n      \"gl_FragColor = vec4(out_color,1.0);\"+\r\n     \"}\";\r\n}\r\n\r\n","import Matrix, { Maths } from \"../utils/maths.js\";\r\nimport {InstancedShader} from \"../shaders/instanceshader\";\r\n\r\nexport class InstanceRenderer {\r\n    constructor(vertices, gl){\r\n        this.vao = gl.createVertexArray();\r\n        gl.bindVertexArray(this.vao);\r\n        this.vertices = vertices;\r\n        this.index = 0;\r\n        this.vbo = this.createVBO(gl);\r\n        this.color_vbo = this.createVBO(gl);\r\n        this.shader = new InstanceShader(gl);\r\n        this.storeData(0, 3, vertices, gl);\r\n        gl.bindVertexArray(null);\r\n        gl.disableVertexAttribArray(0);\r\n\r\n        this.addIntanceAttrib(this.vao, this.vbo, 1, 4, 16, 0, gl);\r\n        this.addIntanceAttrib(this.vao, this.vbo, 2, 4, 16, 4, gl);\r\n        this.addIntanceAttrib(this.vao, this.vbo, 3, 4, 16, 8, gl);\r\n        this.addIntanceAttrib(this.vao, this.vbo, 4, 4, 16, 12, gl);\r\n        this.addIntanceAttrib(this.vao, this.color_vbo, 5, 3, 3, 0, gl);\r\n        \r\n        this.drawLines = false;\r\n    }  \r\n    render(particles,view, projection,d, gl){\r\n        let vboData = [];\r\n        let colorData = [];\r\n        this.index = 0;\r\n        this.colorIndex = 0;\r\n        this.shader.bind();\r\n        gl.bindVertexArray(this.vao);\r\n        gl.enableVertexAttribArray(0);\r\n        gl.enableVertexAttribArray(1);\r\n        gl.enableVertexAttribArray(2);\r\n        gl.enableVertexAttribArray(3);\r\n        gl.enableVertexAttribArray(4);\r\n        gl.enableVertexAttribArray(5);\r\n        \r\n        for(let i = 0;i<particles.length;i++){\r\n            this.storeMatrixData(Maths.createTransformationMatrix(particles[i].position.x,particles[i].position.y,particles[i].position.z,0,0,0,\r\n                particles[i].scale.x,particles[i].scale.y,particles[i].scale.z), vboData);\r\n            this.storeVectorData(particles[i].color, colorData);\r\n        }\r\n        this.updateVBO(this.vbo, vboData, gl);\r\n        this.updateVBO(this.color_vbo, colorData, gl);\r\n        if(this.drawLines){\r\n            gl.drawArraysInstanced(gl.LINES, 0, this.vertices.length / 2, particles.length);\r\n\r\n        }else{\r\n            gl.drawArraysInstanced(gl.TRIANGLES, 0, this.vertices.length / 3, particles.length);\r\n        }\r\n\r\n        this.shader.setUniform4fv(\"view\", view);\r\n        this.shader.setUniform4fv(\"projection\", projection);\r\n        this.shader.setUniform3f(\"color\", 1,1,1);\r\n        this.shader.setUniform(\"camera\", d);\r\n\r\n        gl.bindVertexArray(null);\r\n        gl.disableVertexAttribArray(0);\r\n        gl.disableVertexAttribArray(1);\r\n        gl.disableVertexAttribArray(2);\r\n        gl.disableVertexAttribArray(3);\r\n        gl.disableVertexAttribArray(4);\r\n        gl.disableVertexAttribArray(5);\r\n        \r\n        this.shader.unBind();\r\n    }\r\n    createVBO(gl){\r\n        let vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(99999999), gl.STREAM_DRAW, 0);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n        return vbo;\r\n    }\r\n    storeVectorData(v, vboData){\r\n        vboData[this.colorIndex++] = v.x;\r\n        vboData[this.colorIndex++] = v.y;\r\n        vboData[this.colorIndex++] = v.z;\r\n        \r\n    }\r\n    storeMatrixData(mat, vboData){\r\n        /*for(let i = 0;i<4;i++){\r\n            vboData.push(mat[12-i*4]);\r\n            vboData.push(mat[13-i*4]);\r\n            vboData.push(mat[14-i*4]);\r\n            vboData.push(mat[15-i*4]);\r\n        }*/\r\n        for(let i = 0;i<16;i++){\r\n            vboData[this.index++] = mat[i];\r\n        }\r\n    }\r\n    storeData(attribnumber, coordinateSize, data, gl){\r\n        let vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER,vbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW, 0);\r\n        gl.vertexAttribPointer(attribnumber, coordinateSize, gl.FLOAT, gl.FALSE, 0, 0);\r\n    }\r\n    addIntanceAttrib(vao, vbo, attribute, datasize, datalength, offset, gl){\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\t    gl.bindVertexArray(vao);\r\n\t    gl.vertexAttribPointer(attribute, datasize, gl.FLOAT, false, datalength * 4, (offset * 4));\r\n\t    gl.vertexAttribDivisor(attribute, 1);\r\n\t    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\t    gl.bindVertexArray(null);\r\n    }\r\n    updateVBO(vbo, data, gl){\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\t    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STREAM_DRAW);\r\n\t    gl.bufferSubData(gl.ARRAY_BUFFER, 0, new Float32Array(data));\r\n\t    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n    }\r\n}\r\n\r\nexport class InstanceShader {\r\n    constructor(gl){\r\n        this.gl = gl;\r\n        var vertexShaderText = InstancedShader.vertexShader;\r\n        var fragmentShaderText = InstancedShader.fragmentShader;\r\n\r\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n    \r\n        gl.shaderSource(vertexShader, vertexShaderText);\r\n        gl.shaderSource(fragmentShader, fragmentShaderText);\r\n    \r\n        gl.compileShader(vertexShader);\r\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling vertex shader!', gl.getShaderInfoLog(vertexShader));\r\n            return;\r\n        }\r\n    \r\n        gl.compileShader(fragmentShader);\r\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\r\n            console.error('ERROR compiling fragment shader!', gl.getShaderInfoLog(fragmentShader));\r\n            return;\r\n        }\r\n    \r\n        this.program = gl.createProgram();\r\n        gl.attachShader(this.program, vertexShader);\r\n        gl.attachShader(this.program, fragmentShader);\r\n\r\n\r\n        gl.bindAttribLocation(this.program, 0, \"vertPosition\");\r\n        gl.bindAttribLocation(this.program, 1, \"transformation\");\r\n        gl.bindAttribLocation(this.program, 5, \"color\");\r\n        \r\n\r\n        gl.linkProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\r\n            console.error('ERROR linking program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        gl.validateProgram(this.program);\r\n        if (!gl.getProgramParameter(this.program, gl.VALIDATE_STATUS)) {\r\n            console.error('ERROR validating program!', gl.getProgramInfoLog(this.program));\r\n            return;\r\n        }\r\n        \r\n    }\r\n    bind(){\r\n        this.gl.useProgram(this.program);\r\n    }\r\n    unBind(){\r\n        this.gl.useProgram(null);\r\n    }\r\n    setUniform(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1f(location,value);\r\n        }\r\n    }\r\n    setUniform1i(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform1i(location,value);\r\n        }\r\n    }\r\n    setUniform3f(name,x,y,z){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniform3f(location,x,y,z);\r\n        }\r\n    }\r\n    setUniform4fv(name,value){\r\n        var location = this.gl.getUniformLocation(this.program,name);\r\n        if(location != -1){\r\n            this.gl.uniformMatrix4fv(location,false,value);\r\n        }\r\n        \r\n    }\r\n}","import Shader from \"./shader.js\";\r\nimport Matrix, {Maths, Vector3} from \"../utils/maths.js\";\r\nimport { Texture } from \"./texture.js\";\r\nimport { GridShader } from \"../shaders/gridshader.js\";\r\nimport {InstanceRenderer} from './InstanceRenderer';\r\n\r\nexport class GridRenderer {\r\n    constructor(gl){\r\n        this.gl = gl;\r\n        this.shader = new Shader([0, 'vertPosition'],GridShader, gl);\r\n        this.vertices = [ -1, 1, 1, 1, -1, -1,\r\n             1, -1, 1, 1, -1, -1];\r\n\r\n\r\n        this.vertical = [1,0,0,-1,0,0];\r\n        this.horizontal = [0,0,1,0,0,-1];\r\n            \r\n        this.vao = this.gl.createVertexArray();\r\n        this.gl.bindVertexArray(this.vao);\r\n        this.gl.enableVertexAttribArray(0);\r\n\r\n        this.vbo = gl.createBuffer();\r\n        this.gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\r\n        this.gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertical), gl.STATIC_DRAW, 0);\r\n        this.gl.vertexAttribPointer(0, 2, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n\r\n        this.gl.bindVertexArray(null);\r\n        this.gl.disableVertexAttribArray(0);\r\n\r\n        this.verticalRenderer = new InstanceRenderer(this.vertical, this.gl);\r\n        this.verticalRenderer.drawLines = true;\r\n        this.horizontalRenderer = new InstanceRenderer(this.horizontal, this.gl);\r\n        this.horizontalRenderer.drawLines = true;\r\n        \r\n        class Line {\r\n            constructor(x,y,z,sx,sy,sz){\r\n                this.position = new Vector3(x,y,z);\r\n                this.scale = new Vector3(sx,sy,sz);\r\n                this.color = new Vector3(1,1,1);\r\n            }\r\n        }\r\n        this.lines = [];\r\n\r\n        for(let i = -100;i<100;i++){\r\n            this.lines.push(new Line(0,0,i*100,10,1,1));\r\n        }\r\n        for(let i = -100;i<100;i++){\r\n            this.lines.push(new Line(i*100,0,0,1,1,10));\r\n        }\r\n    }\r\n    draw(projection, camera, width, height, d, hint){\r\n        let f = 100;\r\n        if(d > 1000) f = 5000;\r\n        if(d > 200 && d < 1000) f = 500;\r\n        if(d < 200 && d > 20) f = 100;\r\n        if(d < 20) f = 10;\r\n        hint(f / 100 + \" cm\");\r\n\r\n        for(let i = 0;i<200;i++){\r\n            this.lines[i].position.z = ((f*i) / 100) - f;\r\n            this.lines[i].scale.x = f / 200;\r\n        }\r\n        for(let i = 200;i<400;i++){\r\n            this.lines[i].position.x = ((f*(i-200)) / 100) - f;\r\n            this.lines[i].scale.z = f / 200;\r\n        }\r\n        this.verticalRenderer.render(this.lines, Maths.createViewMatrix(camera),projection, 1000, this.gl);\r\n        this.horizontalRenderer.render(this.lines, Maths.createViewMatrix(camera),projection, 1000, this.gl);\r\n    }\r\n} ","export class MainShader{\r\n   \r\n    static vertexShader = \"precision mediump float;\"+\r\n\r\n    \"attribute vec3 vertPosition;\"+\r\n    \"attribute vec3 normal;\"+\r\n    \r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \r\n    \"uniform mat4 projection;\"+\r\n    \"uniform mat4 transformation;\"+\r\n    \"uniform mat4 view;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"gl_Position = projection * view * transformation * vec4(vertPosition, 1.0);\"+\r\n      \"fragPos = vec3(transformation * vec4(vertPosition, 1.0));\"+\r\n      \"Normal = normal;\"+\r\n    \"}\";\r\n    static fragmentShader = \"precision mediump float;\"+\r\n\r\n    \"varying vec2 tex_coords;\"+\r\n    \"varying vec3 Normal;\"+\r\n    \"varying vec3 fragPos;\"+\r\n    \r\n    \"uniform vec3 color;\"+\r\n    \"uniform sampler2D sampler;\"+\r\n    \r\n    \"void main()\"+\r\n    \"{\"+\r\n      \"vec3 norm = normalize(Normal);\"+\r\n      \"vec3 lightDir = normalize(vec3(100) - fragPos);\"+ \r\n      \"float diff = max(dot(norm, lightDir), 0.0); \"+\r\n      \"vec3 diffuse = diff * vec3(1); \"+\r\n      \"gl_FragColor = vec4((vec3(.1)+diffuse)*color,1.0);\"+\r\n     \"}\";\r\n}\r\n\r\n","import { Vector3 } from '../utils/maths.js';\r\n\r\nclass Model {\r\n\r\n    constructor(vertices,normals, gl) {\r\n\r\n        this.vertices = vertices;\r\n        this.normals = normals;\r\n        this.gl = gl;\r\n        this.color = new Vector3(.1,.1,.1);\r\n        this.drawLines = true;\r\n        \r\n        this.outline = true;\r\n\r\n        this.position = new Vector3(0,0,0);\r\n        this.rotation = new Vector3(0,0,0);\r\n        this.scale = new Vector3(1,1,1);\r\n        this.vao = gl.createVertexArray();\r\n        gl.bindVertexArray(this.vao);\r\n\r\n        this.vbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW, 0);\r\n        gl.vertexAttribPointer(0, 3, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n        this.nvbo = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.nvbo);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.normals), gl.STATIC_DRAW, 0);\r\n        gl.vertexAttribPointer(1, 3, gl.FLOAT, gl.FALSE, 0, 0);\r\n\r\n        gl.bindVertexArray(null);\r\n    }\r\n    draw() {\r\n        if(this.drawLines) this.gl.drawArrays(this.gl.LINE_STRIP, 0, this.vertices.length / 3);\r\n        else this.gl.drawArrays(this.gl.TRIANGLES, 0, this.vertices.length / 3);\r\n    }\r\n};\r\n\r\nexport default Model;","export class Cube {\r\n    static vertices = [0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,\r\n        0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,\r\n        0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,\r\n        -0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5];\r\n    static normals = \r\n         [0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,\r\n            -1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,\r\n            0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0];\r\n}","import Shader from './shader.js'\r\nimport {MainShader} from '../shaders/mainshader.js';\r\nimport {Maths, Vector3} from '../utils/maths.js';\r\nimport Model from './model';\r\nimport {Cube} from '../entities/cube';\r\n\r\nclass RenderSystem {\r\n    constructor(gl){\r\n        this.shader = new Shader([[0,'vertPosition'],[1, 'normal']],MainShader,gl);\r\n        this.models = [];\r\n        this.sources = [];\r\n        this.detectors = [];\r\n        this.guns = [];\r\n        this.particles = [];\r\n        this.gl = gl;\r\n\r\n        this.addModel(new Model([1, 0, 0, -1, 0, 0], [1, 1, 1, 1, 1, 1], gl));\r\n        this.addModel(new Model([0, 1, 0, 0, -1, 0], [1, 1, 1, 1, 1, 1], gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], gl));\r\n\r\n        this.models[0].color = new Vector3(1,0,0);\r\n        this.models[1].color = new Vector3(0,1,0);\r\n        this.models[2].color = new Vector3(0,0,1);\r\n        this.models[3].color = new Vector3(0,0,1);\r\n        \r\n        \r\n        this.drawTracks = true;\r\n        this.drawParticles = true;\r\n        this.drawAxes = true;\r\n    }\r\n      static active_id = -1;\r\n\r\n    removeDetector(detector){\r\n        for(let i = 0;i<this.detectors.length;i++){\r\n            if(this.detectors[i] == detector){\r\n                this.detectors.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    removeGun(gun){\r\n        for(let i = 0;i<this.guns.length;i++){\r\n            if(this.guns[i] == gun){\r\n                this.guns.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    removeSource(source){\r\n        for(let i = 0;i<this.sources.length;i++){\r\n            if(this.sources[i] == source){\r\n                this.sources.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    addModel(model){\r\n        this.models.push(model);\r\n    }\r\n    addParticles(particle){\r\n        this.particles.push(particle);\r\n    }\r\n    addGun(gun){\r\n        this.guns.push(gun);\r\n    }\r\n    addSource(source){\r\n        this.sources.push(source);\r\n    }\r\n    addDetector(detector){\r\n        this.detectors.push(detector);\r\n    }\r\n    clearTracks(){\r\n        this.models = [];\r\n        this.addModel(new Model([1, 0, 0, -1, 0, 0], [1, 1, 1, 1, 1, 1], this.gl));\r\n        this.addModel(new Model([0, 1, 0, 0, -1, 0], [1, 1, 1, 1, 1, 1], this.gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], this.gl));\r\n        this.addModel(new Model([0, 0, 1, 0, 0, -1], [1, 1, 1, 1, 1, 1], this.gl));\r\n\r\n        this.models[0].color = new Vector3(1,0,0);\r\n        this.models[1].color = new Vector3(0,1,0);\r\n        this.models[2].color = new Vector3(0,0,1);\r\n        this.models[3].color = new Vector3(0,0,1);\r\n        //this is whack\r\n    }\r\n    draw(projection, camera){\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        this.shader.bind();\r\n\r\n\r\n        for(let i = 0;i<this.detectors.length;i++){\r\n            this.gl.enable(this.gl.DEPTH_TEST);\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(this.detectors[i].model.vao);\r\n            let mat = Maths.createTransformationMatrix(this.detectors[i].model.position.x, this.detectors[i].model.position.y, this.detectors[i].model.position.z,\r\n                this.detectors[i].model.rotation.x, this.detectors[i].model.rotation.y, this.detectors[i].model.rotation.z, this.detectors[i].model.scale.x,\r\n                 this.detectors[i].model.scale.y,\r\n                this.detectors[i].model.scale.z);\r\n            this.shader.setUniform3f(\"color\", this.detectors[i].model.color.x, this.detectors[i].model.color.y, this.detectors[i].model.color.z);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            this.detectors[i].model.draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n        }\r\n\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        for(let i = 0;i<this.detectors.length;i++){\r\n            if(this.detectors[i].id != RenderSystem.active_id) continue;\r\n            if(this.detectors[i].id == RenderSystem.active_id){\r\n                this.gl.enableVertexAttribArray(0);\r\n                this.gl.enableVertexAttribArray(1);\r\n                this.gl.bindVertexArray(this.detectors[i].model.vao);\r\n                let mat = Maths.createTransformationMatrix(this.detectors[i].model.position.x, this.detectors[i].model.position.y, this.detectors[i].model.position.z,\r\n                    this.detectors[i].model.rotation.x, this.detectors[i].model.rotation.y, this.detectors[i].model.rotation.z,\r\n                     this.detectors[i].model.scale.x * (1.01),\r\n                     this.detectors[i].model.scale.y * (1.01),\r\n                    this.detectors[i].model.scale.z * (1.01));\r\n                this.shader.setUniform3f(\"color\", 1, .4, 0);\r\n                this.shader.setUniform1i(\"sampler\", 0);\r\n                this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n                this.shader.setUniform4fv(\"projection\", projection);\r\n                this.shader.setUniform4fv(\"transformation\", mat);\r\n                this.detectors[i].model.draw();\r\n                this.gl.disableVertexAttribArray(0);\r\n                this.gl.disableVertexAttribArray(1);\r\n            }\r\n            \r\n        }\r\n        \r\n        \r\n        for (var i = 0; i < this.guns.length; i++) {\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(this.guns[i].model.vao);\r\n            \r\n            \r\n            let rotation = new Vector3(0,0,0);\r\n            rotation.x = Math.atan2(-this.guns[i].direction.y, this.guns[i].direction.z);\r\n            rotation.z = Math.atan2(this.guns[i].direction.x, -this.guns[i].direction.y);\r\n            rotation.y = Math.atan2(this.guns[i].direction.x, this.guns[i].direction.z);\r\n\r\n            let mat = Maths.createTransformationMatrix(this.guns[i].model.position.x, this.guns[i].model.position.y, this.guns[i].model.position.z,\r\n                rotation.x, rotation.y, rotation.z, camera.d*0.01,camera.d*0.01,camera.d*0.01);\r\n\r\n\r\n            \r\n            this.shader.setUniform3f(\"color\", this.guns[i].model.color.x, this.guns[i].model.color.y, this.guns[i].model.color.z);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            this.guns[i].model.draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n            console.log(this.guns[i].model.position.x);\r\n        }\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        for (var i = 0; i < this.sources.length; i++) {\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(this.sources[i].model.vao);\r\n            let mat = Maths.createTransformationMatrix(this.sources[i].model.position.x, this.sources[i].model.position.y, this.sources[i].model.position.z,\r\n                this.sources[i].model.rotation.x, this.sources[i].model.rotation.y, this.sources[i].model.rotation.z, camera.d*0.004,camera.d*0.004,camera.d*0.004);\r\n\r\n            this.shader.setUniform3f(\"color\", this.sources[i].model.color.x, this.sources[i].model.color.y, this.sources[i].model.color.z);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            this.sources[i].model.draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n        }\r\n        this.gl.enable(this.gl.DEPTH_TEST);\r\n\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        if(this.drawAxes){\r\n            for(let i = 0;i<4;i++){\r\n                this.gl.enableVertexAttribArray(0);\r\n                this.gl.enableVertexAttribArray(1);\r\n                this.gl.bindVertexArray(this.models[i].vao);\r\n                let mat = Maths.createTransformationMatrix(this.models[i].position.x, this.models[i].position.y, this.models[i].position.z,\r\n                    this.models[i].rotation.x, this.models[i].rotation.y, this.models[i].rotation.z,\r\n                    camera.d,\r\n                     camera.d,\r\n                    camera.d);\r\n                this.shader.setUniform3f(\"color\", this.models[i].color.x, this.models[i].color.y, this.models[i].color.z);\r\n                this.shader.setUniform1i(\"sampler\", 0);\r\n                this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n                this.shader.setUniform4fv(\"projection\", projection);\r\n                this.shader.setUniform4fv(\"transformation\", mat);\r\n                this.models[i].draw();\r\n                this.gl.disableVertexAttribArray(0);\r\n                this.gl.disableVertexAttribArray(1);\r\n            }\r\n            console.log(this.drawAxes);\r\n        }\r\n        \r\n        if(!this.drawTracks){\r\n            this.shader.unBind();\r\n            return;\r\n        }\r\n        \r\n        for(let i = 3;i<this.models.length;i++){\r\n            this.gl.enableVertexAttribArray(0);\r\n            this.gl.enableVertexAttribArray(1);\r\n            this.gl.bindVertexArray(this.models[i].vao);\r\n            let mat = Maths.createTransformationMatrix(this.models[i].position.x, this.models[i].position.y, this.models[i].position.z,\r\n                this.models[i].rotation.x, this.models[i].rotation.y, this.models[i].rotation.z,\r\n                this.models[i].scale.x, this.models[i].scale.y, this.models[i].scale.z);\r\n            this.shader.setUniform3f(\"color\", this.models[i].color.x, this.models[i].color.y, this.models[i].color.z);\r\n            this.shader.setUniform1i(\"sampler\", 0);\r\n            this.shader.setUniform4fv(\"view\", Maths.createViewMatrix(camera));\r\n            this.shader.setUniform4fv(\"projection\", projection);\r\n            this.shader.setUniform4fv(\"transformation\", mat);\r\n            this.models[i].draw();\r\n            this.gl.disableVertexAttribArray(0);\r\n            this.gl.disableVertexAttribArray(1);\r\n        }\r\n        this.shader.unBind();\r\n        \r\n    }\r\n}\r\nexport default RenderSystem;","class Detector {\r\n    constructor(m) {\r\n        this.model = m;\r\n        this.material = 'Pb';\r\n        this.active = false;\r\n        this.deposit = 0;\r\n        this.name = \"\";\r\n        this.id = 0;\r\n        this.hits = [];\r\n        this.numberOfHits = [];\r\n    }\r\n    contains(f) {\r\n        for (var i = 0; i < this.hits.length; i++) {\r\n            if (f == this.hits[i]) return true;\r\n        }\r\n        return false;\r\n    }\r\n    clearDeposit(){\r\n        this.hits = [];\r\n        this.numberOfHits = [];\r\n    }\r\n    sort() {\r\n        var list = [];\r\n        for (var j = 0; j < this.hits.length; j++)\r\n            list.push({ 'hit': this.hits[j], 'no': this.numberOfHits[j] });\r\n\r\n        list.sort(function (a, b) {\r\n            return ((a.hit < b.hit) ? -1 : ((a.hit == b.hit) ? 0 : 1));\r\n        });\r\n        \r\n        for (var k = 0; k < list.length; k++) {\r\n            this.hits[k] = list[k].hit;\r\n            this.numberOfHits[k] = list[k].no;\r\n        }\r\n    }\r\n    getIndex(f) {\r\n        for (var i = 0; i < this.hits.length; i++) {\r\n            if (Math.abs(f-this.hits[i]) == 0) return i;\r\n        }\r\n        return -1;\r\n    }\r\n};\r\n\r\nexport default Detector;","export class ParticleGun {\r\n    constructor(model, position, direction, energy){\r\n        this.position = position;\r\n        this.direction = direction;\r\n        this.energy = energy;\r\n        this.model = model;\r\n        this.name = \"Particle Gun\";\r\n    }\r\n}","export class GunMesh {\r\n    constructor(){}\r\n    static vertices = [-1,-1,-1,0,0,1,0,0,1,-1,-1,-1,0,0,1,-1,1,-1,-1,1,-1,0,0,1,0,0,1,-1,1,-1,0,0,1,1,1,-1,1,1,-1,0,0,1,0,0,1,1,1,-1,0,0,1,1,-1,-1,1,-1,-1,0,0,1,0,0,1,1,-1,-1,0,0,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1];\r\n    static normals = [0,0,0,0,0,0,0,0,0,-0.8944271802902222,0,0.4472135901451111,-0.8944271802902222,0,0.4472135901451111,-0.8944271802902222,0,0.4472135901451111,0,0,0,0,0,0,0,0,0,0,0.8944271802902222,0.4472135901451111,0,0.8944271802902222,0.4472135901451111,0,0.8944271802902222,0.4472135901451111,0,0,0,0,0,0,0,0,0,0.8944271802902222,0,0.4472135901451111,0.8944271802902222,0,0.4472135901451111,0.8944271802902222,0,0.4472135901451111,0,0,0,0,0,0,0,0,0,0,-0.8944271802902222,0.4472135901451111,0,-0.8944271802902222,0.4472135901451111,0,-0.8944271802902222,0.4472135901451111,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\r\n}","import { Vector3 } from \"../utils/maths.js\";\r\n\r\nexport class ParticleSource {\r\n    constructor(model, position, material){\r\n        this.position = position;\r\n        this.name = \"Particle Source\";\r\n        this.scale = new Vector3(1,1,1);\r\n        this.material = material;\r\n        this.model = model;\r\n        this.model.color = new Vector3(0,1,0);\r\n        this.active = false;\r\n        this.id = 0;\r\n    }\r\n}","class STLParrser {\r\n    \r\n    static parseData(data){\r\n\r\n        function readInt(data, i) {\r\n            var chars = new Uint8Array([data.charCodeAt(i), data.charCodeAt(i + 1), data.charCodeAt(i + 2), data.charCodeAt(i + 3)]);\r\n    \r\n            return new Int32Array(chars.buffer)[0];\r\n        }\r\n        function readFloat(data, i) {\r\n            var chars = new Uint8Array([data.charCodeAt(i), data.charCodeAt(i + 1), data.charCodeAt(i + 2), data.charCodeAt(i + 3)]);\r\n    \r\n            return new Float32Array(chars.buffer)[0];\r\n        }\r\n\r\n        let res = [];\r\n        var normals = [];\r\n        var size = readInt(data, 80);\r\n        for (var k = 0; k < size; k++) {\r\n            for (var j = 0; j < 9; j++) {\r\n                res.push(readFloat(data, 96 + j * 4 + k * 50));\r\n            }\r\n        }\r\n        for (var k = 0; k < size; k++) {\r\n            for (var j = 0; j < 3; j++) {\r\n                normals.push(readFloat(data, 84 + j * 4 + k * 50));\r\n            }\r\n            for (var j = 0; j < 3; j++) {\r\n                normals.push(readFloat(data, 84 + j * 4 + k * 50));\r\n            }\r\n            for (var j = 0; j < 3; j++) {\r\n                normals.push(readFloat(data, 84 + j * 4 + k * 50));\r\n            }\r\n        }\r\n        let m = new ModelData();\r\n        m.vertices = res;\r\n        m.normals = normals;\r\n\r\n        return m;\r\n    }\r\n}\r\nclass ModelData {\r\n    constructor(){\r\n        this.vertices = [];\r\n        this.normals = [];\r\n    }\r\n}\r\n\r\nexport default STLParrser;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\nimport { GridRenderer } from '../rendering/grid.js';\r\nimport { Maths,Camera,Vector3 } from '../utils/maths.js';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport { render } from '@testing-library/react';\r\nimport Detector from '../detector/Detektor.js';\r\nimport Model from '../rendering/model';\r\nimport {Cube} from '../entities/cube';\r\nimport {ParticleGun} from '../gun/ParticleGun';\r\nimport {GunMesh} from '../gun/gun';\r\nimport {ParticleSource} from '../source/ParticleSource';\r\nimport { InstanceRenderer } from '../rendering/InstanceRenderer';\r\n\r\nimport STLParser from '../utils/STLParser';\r\n\r\n\r\nclass Canvas extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = ({hint: \" \"});\r\n    this.canvas = createRef();\r\n    this.camera = new Camera(10, 10, 100, new Vector3(0, 0, 0), new Vector3(0, 0, 0));\r\n    this.oldX = 0;\r\n    this.oldY = 0;\r\n    this.move = false;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.keyDown = ` ${0}`;\r\n    this.down = false;\r\n    this.renderer = null;\r\n    this.instanceRenderer = null;\r\n    this.particles = [];\r\n    this.drawTracks = false;\r\n    this.drawParticles = true;\r\n    this.drawGrid = false;\r\n    this.gl = null;\r\n    this.updateHint = this.updateHint.bind(this);\r\n  }\r\n  updateHint(s){\r\n    this.setState({hint: s});\r\n  }\r\n  setShowTracks(b){\r\n    this.renderer.drawTracks = b;\r\n  }\r\n  setShowAxes(b){\r\n    this.renderer.drawAxes = b;\r\n  }\r\n  getMouseXd(){\r\n    return this.oldX - this.x;\r\n  }\r\n  getMouseYd(){\r\n    return this.oldY - this.y;\r\n  }\r\n  clearRun(){\r\n    this.particles = [];\r\n    this.renderer.clearTracks();\r\n  }\r\n  componentDidMount() {\r\n    function updateCamera(camera) {\r\n      if (camera.y > 89.0) {\r\n          camera.y = 89.0;\r\n      }\r\n      if (camera.y < -89.0) {\r\n          camera.y = -89.0;\r\n      }\r\n  \r\n      camera.p.x = (camera.d * -Math.sin(camera.x * Math.PI / 180.0)\r\n          * Math.cos(camera.y * Math.PI / 180.0) + camera.a.x);\r\n      camera.p.y = (camera.d * -Math.sin(camera.y * Math.PI / 180.0)\r\n          + camera.a.y);\r\n      camera.p.z = (-camera.d * Math.cos(camera.x * Math.PI / 180.0)\r\n          * Math.cos(camera.y * Math.PI / 180.0) + camera.a.z);\r\n  \r\n\r\n      return camera;\r\n  }\r\n    this.gl = this.canvas.current.getContext(\"webgl2\");\r\n    let color = 0;  \r\n    let gridRenderer = new GridRenderer(this.gl);\r\n    this.renderer = new RenderSystem(this.gl);\r\n    this.instanceRenderer = new InstanceRenderer(Cube.vertices, this.gl);\r\n    var draw = ()=>{\r\n      color += .001;\r\n      this.gl.clearColor(.2,.2,.2,1.0);\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n      \r\n\r\n      let projection = Maths.createProjectionMatrix(70,.1 * this.camera.d,1000 * this.camera.d, this.canvas.current.offsetWidth,this.canvas.current.offsetHeight);\r\n      if(this.down && this.move){\r\n        if (this.keyDown === 17) {\r\n          this.camera.a.y -= .01 * (this.getMouseYd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n          this.camera.a.z += .01 * (Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d * ((89.0 - Math.abs(this.camera.y)) / 89.0));\r\n\r\n          this.camera.a.x -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseXd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d);\r\n\r\n              this.camera.a.z -= .01 * (Math.cos(this.camera.x / (180 / Math.PI)) * this.getMouseYd() * .01 * this.camera.d +\r\n              Math.sin(this.camera.x / (180 / Math.PI)) * -this.getMouseXd() * .01 * this.camera.d);\r\n\r\n\r\n\r\n      } else {\r\n        this.camera.x += this.getMouseXd() / 2;\r\n        this.camera.y += this.getMouseYd() / 2;\r\n      }\r\n      }\r\n      \r\n      if(this.drawGrid) gridRenderer.draw(projection, this.camera, this.canvas.current.offsetWidth,this.canvas.current.offsetHeight, this.camera.d, this.updateHint);\r\n      this.renderer.draw(projection, this.camera);\r\n      if(this.drawParticles) this.instanceRenderer.render(this.particles, Maths.createViewMatrix(this.camera),projection, this.camera.d, this.gl);\r\n      updateCamera(this.camera);\r\n      this.move = false;\r\n      requestAnimationFrame(draw);\r\n      \r\n    }\r\n    requestAnimationFrame(draw);\r\n  }\r\n  addSource(x,y,z,mat){\r\n    let source = new ParticleSource(new Model(Cube.vertices, Cube.normals,this.gl),new Vector3(x,y,z),mat);\r\n    source.model.drawLines = false;\r\n    source.model.position = new Vector3(x,y,z);\r\n    this.renderer.addSource(source);\r\n\r\n    return source;\r\n  }\r\n  addParticle(particle){\r\n    this.particles.push(particle);\r\n  }\r\n  addSTLDetector(x,y,z,rx,ry,rz,sx,sy,sz,mat,data){\r\n    let detector = new Detector(new Model(data.vertices, data.normals, this.gl));\r\n    detector.model.drawLines = false;\r\n    detector.model.color = new Vector3(1,1,1);\r\n    detector.model.position.x = x;\r\n    detector.model.position.y = y;\r\n    detector.model.position.z = z;\r\n\r\n    detector.model.rotation.x = rx;\r\n    detector.model.rotation.y = ry;\r\n    detector.model.rotation.z = rz;\r\n\r\n    detector.model.scale.x = sx;\r\n    detector.model.scale.y = sy;\r\n    detector.model.scale.z = sz;\r\n    \r\n    detector.material = mat;\r\n\r\n    this.renderer.addDetector(detector);\r\n    \r\n    return detector;\r\n  }\r\n  async addDetector(x,y,z,rx,ry,rz,sx,sy,sz, mat, type){\r\n    let detector = null;\r\n    let parameterize = ()=>{\r\n      detector.model.drawLines = false;\r\n      detector.model.color = new Vector3(1,1,1);\r\n      detector.model.position.x = x;\r\n      detector.model.position.y = y;\r\n      detector.model.position.z = z;\r\n  \r\n      detector.model.rotation.x = rx;\r\n      detector.model.rotation.y = ry;\r\n      detector.model.rotation.z = rz;\r\n  \r\n      detector.model.scale.x = sx;\r\n      detector.model.scale.y = sy;\r\n      detector.model.scale.z = sz;\r\n      \r\n      detector.material = mat;\r\n  \r\n      this.renderer.addDetector(detector);\r\n    };\r\n    \r\n    let response = await fetch(\"http://localhost/database\", {\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          },\r\n          method: 'POST',\r\n          body: JSON.stringify({name: type})\r\n        });\r\n        let json = await response.json();\r\n        let data = new String(json[0].data.data);\r\n        var str='';\r\n        for (let i = 0;i < json[0].data.data.length;i++){\r\n          str+=String.fromCharCode(json[0].data.data[i]);\r\n        }\r\n        let modeldata = STLParser.parseData(str);\r\n        detector = new Detector(new Model(modeldata.vertices, modeldata.normals, this.gl));\r\n    parameterize();\r\n    return detector;\r\n    \r\n  }\r\n  addModel(vertices, normals){\r\n    let model = new Model(vertices, normals, this.gl);\r\n\r\n    this.renderer.addModel(model);\r\n\r\n    return model;\r\n  }\r\n  addGun(x,y,z,dx,dy,dz,energy){\r\n    let gun_model = new Model(GunMesh.vertices, GunMesh.normals, this.gl);\r\n    gun_model.drawLines = false;\r\n    let gun = new ParticleGun(gun_model,new Vector3(x,y,z),new Vector3(dx,dy,dz),energy);\r\n    gun.model.position = new Vector3(x,y,z);\r\n    \r\n    this.renderer.addGun(gun);\r\n\r\n    return gun;\r\n\r\n  }\r\n  removeSource(source){\r\n    this.renderer.removeSource(source);\r\n  }\r\n  removeDetector(detector){\r\n    this.renderer.removeDetector(detector);\r\n  }\r\n  removeGun(gun){\r\n    this.renderer.removeGun(gun);\r\n  }\r\n  render(){\r\n    return <div>\r\n      <p ref={this.hint} style={{\"position\":\"fixed\", \"bottom\" : \"10%\", \"left\" : \"20%\", \"z-index\" : \"4\", \"color\" : \"white\"}}>{this.state.hint}</p>\r\n    <canvas ref={this.canvas} onMouseMove={(e)=>{ \r\n      this.move = true;\r\n      this.oldX = this.x;\r\n      this.oldY = this.y;\r\n      this.x = e.pageX;\r\n      this.y = e.pageY;\r\n    }}\r\n    tabIndex=\"0\" \r\n    width='2000'\r\n    height='2000'\r\n    style={{position: 'fixed', right: 0, left: 0, width: '100%', height: '100%'}}\r\n    onKeyDown={(e)=>{this.keyDown = e.keyCode;}}\r\n    onKeyUp={(e)=>{this.keyDown = ` ${0}`;}}\r\n    onMouseDown={()=>{this.down = true;}} \r\n    onMouseUp={()=>{this.down = false;}}\r\n    onWheel={(e)=>{\r\n      let delta = 0;\r\n      if(e.deltaY > 0) delta = 1;\r\n      else delta = -1;\r\n      this.camera.d += (this.camera.d / (delta*100)) * 10;\r\n      }}/>\r\n  </div>\r\n    \r\n   \r\n  }\r\n}\r\n\r\nexport default Canvas;\r\n","class MaterialList{\r\n    static materials = [\r\n        'H',\r\n'He',\r\n'Li',\r\n'Be',\r\n'B',\r\n'C',\r\n'N',\r\n'O',\r\n'F',\r\n'Ne',\r\n'Na',\r\n'Mg',\r\n'Al',\r\n'Si',\r\n'P',\r\n'S',\r\n'Cl',\r\n'Ar',\r\n'K',\r\n'Ca',\r\n'Sc',\r\n'Ti',\r\n'V',\r\n'Cr',\r\n'Mn',\r\n'Fe',\r\n'Co',\r\n'Ni',\r\n'Cu',\r\n'Zn',\r\n'Ga',\r\n'Ge',\r\n'As',\r\n'Se',\r\n'Br',\r\n'Kr',\r\n'Rb',\r\n'Sr',\r\n'Y',\r\n'Zr',\r\n'Nb',\r\n'Mo',\r\n'Tc',\r\n'Ru',\r\n'Rh',\r\n'Pd',\r\n'Ag',\r\n'Cd',\r\n'In',\r\n'Sn',\r\n'Sb',\r\n'Te',\r\n'I',\r\n'Xe',\r\n'Cs',\r\n'Ba',\r\n'La',\r\n'Ce',\r\n'Pr',\r\n'Nd',\r\n'Pm',\r\n'Sm',\r\n'Eu',\r\n'Gd',\r\n'Tb',\r\n'Dy',\r\n'Ho',\r\n'Er',\r\n'Tm',\r\n'Yb',\r\n'Lu',\r\n'Hf',\r\n'Ta',\r\n'W',\r\n'Re',\r\n'Os',\r\n'Ir',\r\n'Pt',\r\n'Au',\r\n'Hg',\r\n'Tl',\r\n'Pb',\r\n'Bi',\r\n'Po',\r\n'At',\r\n'Rn',\r\n'Fr',\r\n'Ra',\r\n'Ac',\r\n'Th',\r\n'Pa',\r\n'U',\r\n'Np',\r\n'Pu',\r\n'Am',\r\n'Cm',\r\n'Bk',\r\n'Cf',\r\n'Es',\r\n'Fm',\r\n'Md',\r\n'No',\r\n'Lr',\r\n'Rf',\r\n'Db',\r\n'Sg',\r\n'Bh',\r\n'Hs',\r\n'Mt',\r\n'Ds',\r\n'Rg',\r\n'Cn',\r\n'Nh',\r\n'Fl',\r\n'Mc',\r\n'Lv',\r\n'Ts',\r\n'Og'];\r\nstatic check(s){\r\n    for(let i = 0;i<MaterialList.materials.length;i++){\r\n        if(s == MaterialList.materials[i]) return true;\r\n    }\r\n    return false;\r\n    }\r\n}\r\nexport default MaterialList;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false }\r\n     \r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  showDialog(){\r\n      \r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{this.props.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        {this.props.content}\r\n      \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            No\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n              this.props.fun();\r\n              this.hideDialog();\r\n          }}>\r\n            Yes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","import Detector from '../detector/Detektor';\r\nimport Model from '../rendering/model';\r\nimport {Cube} from '../entities/cube';\r\nimport {ParticleSource} from '../source/ParticleSource';\r\nimport {Vector3} from '../utils/maths';\r\nimport {ParticleGun} from '../gun/ParticleGun';\r\nimport GunMesh from '../gun/gun';\r\nimport DetectorButton from '../detector/DetectorButton';\r\nimport React, { Component, createRef } from 'react';\r\n\r\n//TO-DO\r\n//position[cm]\r\nvar m = 100;\r\nvar dm = 10;\r\nvar cm = 1;\r\nvar mm = .1;\r\nvar eV = .001;\r\nvar keV = 1;\r\nvar MeV = 1000;\r\nvar GeV = 1000000;\r\nvar deg = 0.0174527777777778;\r\nvar rad = 1;\r\nclass Parser {\r\n    static checkString(s){\r\n        s = s.trim();\r\n        if(s.split('\"').length % 2 == 0){\r\n            return false;\r\n        }\r\n        if(s[0] != '\"') return false;\r\n        if(s[s.length-1] != '\"') return false;\r\n        return true;\r\n    }\r\n    static chunks = [];\r\n\r\n    static removeChunk(id){\r\n        let result = \" \";\r\n        \r\n        for(let i = 0;i<Parser.chunks.length;i++){\r\n            if(Parser.chunks[i].id == id){\r\n                Parser.chunks.splice(i, 1);\r\n                break;\r\n            } \r\n        }\r\n        alert(id);\r\n        for(let i = 0;i<Parser.chunks.length;i++){\r\n            alert(Parser.chunks[i].code);\r\n            alert(Parser.chunks[i].id);\r\n            result += Parser.chunks[i].code;\r\n        }\r\n        return result;\r\n    }\r\n    static checkFloat(s, v, me){\r\n        if(isNaN(parseFloat(s.split(',')[0]))) return false;\r\n        if(isNaN(parseFloat(s.split(',')[1]))) return false;\r\n        if(isNaN(parseFloat(s.split(',')[2]))) return false;\r\n        v.x = parseFloat(s.split(',')[0]) * me;\r\n        v.y = parseFloat(s.split(',')[1]) * me;\r\n        v.z = parseFloat(s.split(',')[2]) * me;\r\n        return true;\r\n    }\r\n    static parse(text, canvas, clearSetup, createDetector, createSource, createGun){\r\n        this.detectors = [];\r\n        this.sources = [];\r\n        let gl = canvas.gl;\r\n        let blocks = text.split(\"\\\\\");\r\n        clearSetup();\r\n        for(let i = 0;i<blocks.length;i++){\r\n            let words = blocks[i].split(\"{\");\r\n            words[0] = words[0].replace(' ', '');\r\n            let detector = null;\r\n            let source = null;\r\n            let gun = null;\r\n\r\n            if(words[0] == 'Detector'){\r\n                detector = new Detector(new Model(Cube.vertices,Cube.normals,gl));\r\n            }\r\n            if(words[0] == 'Source'){\r\n                source = new ParticleSource(new Model(Cube.vertices,Cube.normals,gl),new Vector3(0,0,0),\"U235\");\r\n            }\r\n            if(words[0] == 'Gun'){\r\n                gun = new ParticleGun(new Model(Cube.vertices, Cube.normals, gl),new Vector3(0,0,0),new Vector3(0,0,0),0);\r\n            }\r\n            for(let j = 0;j<words.length;j++){\r\n                let lines = words[j].split(\";\");\r\n                for(let k = 0;k<lines.length;k++){\r\n                    if(lines[k].split(\"(\")[0].trim() == 'clear'){\r\n                        \r\n                    }\r\n                    if(lines[k].split(\":\").length == 1) continue;\r\n                    let attribute = lines[k].split(\":\")[0].trim();\r\n                    let measurement = cm;\r\n                    switch(attribute.substring(attribute.indexOf(\"[\")+1,attribute.indexOf(\"]\"))){\r\n                        case(\"eV\"):\r\n                            measurement = eV;\r\n                            break;\r\n                        case(\"keV\"):\r\n                            measurement = keV;\r\n                            break;\r\n                        case(\"MeV\"):\r\n                            measurement = MeV;\r\n                            break;\r\n                        case(\"GeV\"):\r\n                            measurement = GeV;\r\n                            break;\r\n                        case(\"mm\"):\r\n                            measurement = mm;\r\n                            break;\r\n                        case(\"deg\"):\r\n                            measurement = deg;\r\n                            break;\r\n                        case(\"rad\"):\r\n                            measurement = rad;\r\n                            break;\r\n                        case(\"cm\"):\r\n                            measurement = cm;\r\n                            break;\r\n                        case(\"dm\"):\r\n                            measurement = dm;\r\n                            break;\r\n                        case(\"m\"):\r\n                            measurement = m;\r\n                            break;\r\n                        default:\r\n                            measurement = cm;\r\n                    }\r\n                    if(attribute.includes(\"[\")) attribute = attribute.substr(0, attribute.indexOf(\"[\"));\r\n                    let params = lines[k].split(\":\")[1].replace(/\\n/g, '');\r\n                    if(words[0] == 'Detector'){\r\n                        switch(attribute){\r\n                            case('position'):\r\n                                if(!this.checkFloat(params, detector.model.position, measurement)) alert(\"position incorrec format\");\r\n                                break;\r\n                            case('rotation'):\r\n                                if(!this.checkFloat(params, detector.model.rotation, measurement)) alert(\"rotation incorrec format\");\r\n\r\n                                break;\r\n                            case('scale'):\r\n                                if(!this.checkFloat(params, detector.model.scale, measurement)) alert(\"scale incorrec format\");\r\n\r\n                                break;\r\n                            case('material'):\r\n                                if(!this.checkString(params)) alert(\"meterial incorrect format\");\r\n                                detector.material = params.trim().substring(1,params.trim().length-1);\r\n                                break;\r\n                            case('name'):\r\n                                if(!this.checkString(params)) alert(\"name incorrect format\");\r\n                                detector.name = params.trim().substring(1,params.trim().length-1);\r\n                                break;\r\n                            default:\r\n                                alert(\"No such property: \" + attribute);\r\n                                break;\r\n                        }\r\n                    }\r\n                    if(words[0] == 'Source'){\r\n                        switch(attribute){\r\n                            case('position'):\r\n                                if(!this.checkFloat(params, source.model.position, measurement)) alert(\"position incorrec format\");\r\n                                break;\r\n                            case('material'):\r\n                                if(!this.checkString(params)) alert(\"material incorrect format\");\r\n                                source.material = params.trim().substring(1,params.trim().length-1);\r\n                                break;\r\n                            case('name'):\r\n                                if(!this.checkString(params)) alert(\"name incorrect format\");\r\n                                source.name = params.trim().substring(1,params.trim().length-1);\r\n                                break;\r\n                            default:\r\n                                alert(\"No such property: \" + attribute);\r\n                                break;\r\n                        }   \r\n                    }\r\n                    if(words[0] == 'Gun'){\r\n                        switch(attribute){\r\n                            case('position'):\r\n                                if(!this.checkFloat(params, gun.model.position, measurement)) alert(\"position incorrec format\");\r\n                                break;\r\n                            case('direction'):\r\n                                if(!this.checkFloat(params, gun.direction, measurement)) alert(\"direction incorrec format\");\r\n                                break;\r\n                            case('energy'):\r\n                                alert(measurement);\r\n                                gun.energy = parseFloat(params) * measurement;\r\n                                break;\r\n                            case('name'):\r\n                                if(!this.checkString(params)) alert(\"name incorrect format\");\r\n                                gun.name = params.trim().substring(1,params.trim().length-1);\r\n                                break;\r\n                            default:\r\n                                alert(\"No such property: \" + attribute);\r\n                                break;\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n                \r\n            }\r\n\r\n            if(gun != null){\r\n\r\n                createGun(gun.name, gun.model.position.x,gun.model.position.y,gun.model.position.z,gun.direction.x,gun.direction.y, gun.direction.z,gun.energy, false);\r\n            }\r\n            if(source != null) {\r\n\r\n                createSource(source.name,source.model.position.x, source.model.position.y,source.model.position.z,source.material,false);\r\n            }\r\n            if(detector != null){\r\n\r\n                createDetector(detector.name, detector.model.position.x,detector.model.position.y,detector.model.position.z,\r\n                    detector.model.rotation.x,detector.model.rotation.y,detector.model.rotation.z,\r\n                    detector.model.scale.x,detector.model.scale.y,detector.model.scale.z,detector.material,'cube',Cube.vertices, new Vector3(.5,.5,.5), false);\r\n                \r\n            }\r\n        } \r\n    }\r\n}\r\n\r\nexport default Parser;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Vector3} from '../utils/maths';\r\nimport MaterialList from './MaterialList';\r\nimport ConfirmDialog from '../graphics/ConfirmDialog';\r\nimport Parser from '../utils/Parser';\r\n\r\nclass DetectorEditDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.confirmDialog = React.createRef();\r\n\r\n    this.state = {show: false, \r\n      detname: this.props.detector.name,\r\n      detposx: this.props.detector.model.position.x,\r\n      detposy: this.props.detector.model.position.y,\r\n      detposz: this.props.detector.model.position.z,\r\n      detrotx: this.props.detector.model.rotation.x,\r\n      detroty: this.props.detector.model.rotation.y,\r\n      detrotz: this.props.detector.model.rotation.z,\r\n      detscalex: this.props.detector.model.scale.x,\r\n      detscaley: this.props.detector.model.scale.y,\r\n      detscalez: this.props.detector.model.scale.z,\r\n      detmat: this.props.detector.material,\r\n      showError: 'none',\r\n      color: this.props.detector.model.color }\r\n    this.materials = [];\r\n    \r\n  }\r\n  hexToRgb(hex) {\r\n    hex = hex.substr(1);\r\n    var bigint = parseInt(hex, 16);\r\n    var r = (bigint >> 16) & 255;\r\n    var g = (bigint >> 8) & 255;\r\n    var b = bigint & 255;\r\n\r\n    return new Vector3(r / 255, g / 255, b / 255);\r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n      this.setState({showError: 'none'});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    const handleDelete = ()=>{\r\n      this.hideDialog();\r\n      this.props.removebutton(this.props.detector, this.props.button);\r\n    }\r\n    return <>\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete this component?\" fun={handleDelete}></ConfirmDialog>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify Detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <hr />\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>Rotation</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detrotx}\r\n            onChange={(event)=>{this.setState({detrotx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detroty}\r\n            onChange={(event)=>{this.setState({detroty: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detrotz}\r\n            onChange={(event)=>{this.setState({detrotz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>Scale</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscalex}\r\n            onChange={(event)=>{this.setState({detscalex: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscaley}\r\n            onChange={(event)=>{this.setState({detscaley: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscalez}\r\n            onChange={(event)=>{this.setState({detscalez: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>\r\n          <Form.Group controlId=\"exampleForm.SelectCustom\">\r\n          <Form.Label>Material</Form.Label>\r\n            <Form.Control\r\n            className=\"material\"\r\n            required\r\n            value='0'\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detmat}\r\n            onChange={(event)=>{this.setState({detmat: event.target.value});}} />\r\n          </Form.Group>\r\n          <span style={{'display': this.state.showError, 'color' : 'red', 'font-weight': 'bold'}}>\r\n            No such material\r\n          </span>\r\n          </Row>\r\n          <hr />\r\n          <Row>\r\n          Color: <span style={{'padding-left':'20px'}}>\r\n          <input type=\"color\"\r\n          onInput={(evt)=>{\r\n            this.setState({color: this.hexToRgb(evt.target.value)});\r\n          }}></input>\r\n            </span>\r\n        </Row>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{\r\n            this.confirmDialog.current.showDialog();\r\n          }} style={{backgroundColor: 'red', color: 'white'}}>\r\n            Delete\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n            if(!MaterialList.check(this.state.detmat)){\r\n              this.setState({showError: 'block'})\r\n              return;\r\n            } \r\n            this.hideDialog();\r\n\r\n            this.props.detector.model.position.x = this.state.detposx;\r\n            this.props.detector.model.position.y = this.state.detposy;\r\n            this.props.detector.model.position.z = this.state.detposz;\r\n            \r\n            this.props.detector.model.rotation.x = this.state.detrotx;\r\n            this.props.detector.model.rotation.y = this.state.detroty;\r\n            this.props.detector.model.rotation.z = this.state.detrotz;\r\n            \r\n            this.props.detector.model.scale.x = this.state.detscalex;\r\n            this.props.detector.model.scale.y = this.state.detscaley;\r\n            this.props.detector.model.scale.z = this.state.detscalez;\r\n            \r\n            this.props.detector.material = this.state.detmat;\r\n\r\n            this.props.detector.model.color = this.state.color;\r\n            \r\n            let text = \"\";\r\n            for(let i = 0;i<Parser.chunks.length;i++){\r\n              if(this.props.buttonid == Parser.chunks[i].id){\r\n                Parser.chunks[i].code = \"\\\\Detector{\\n\" +\r\n                \"\\tname: \" + '\"' + this.props.name + '\";\\n' + \r\n                \"\\tposition[cm]: \" + this.state.detposx + \", \" + this.state.detposy + \", \" + this.state.detposz + \";\\n\" + \r\n                \"\\trotation[rad]: \" + this.state.detrotx + \", \" + this.state.detroty + \", \" + this.state.detrotz + \";\\n\" +\r\n                \"\\tscale[cm]: \" + this.state.detscalex + \", \" + this.state.detscaley + \", \" + this.state.detscalez + \";\\n\" + \r\n                \"\\tmaterial: \" + '\"' +  this.state.detmat + '\";\\n' + \r\n              \"}\\n\";\r\n              }\r\n              text += Parser.chunks[i].code;\r\n            }\r\n\r\n            this.props.codeeditor.current.updateText(text);\r\n            \r\n            this.props.updatedetails(\r\n<>\r\n              <Row>\r\n                    <Col>Position: </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col>x: {this.state.detposx} cm</Col>\r\n                      <Col>y: {this.state.detposy} cm</Col>\r\n                      <Col>z: {this.state.detposz} cm</Col>\r\n                    </Row>\r\n                    <Row>\r\n                    <Col>Rotation: </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col>x: {this.state.detrotx} deg</Col>\r\n                      <Col>y: {this.state.detroty} deg</Col>\r\n                      <Col>z: {this.state.detrotz} deg</Col>\r\n                    </Row>\r\n                    <Row>\r\n                    <Col>Scale: </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col>x: {this.state.detscalex}</Col>\r\n                      <Col>y: {this.state.detscaley}</Col>\r\n                      <Col>z: {this.state.detscalez}</Col>\r\n                    </Row>\r\n                    <Row>\r\n                    <Col>Material: </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col>{this.state.detmat}</Col>\r\n                    </Row>\r\n</>\r\n            );            \r\n            }}>\r\n            Modify\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport image from '../images/editicon.png';\r\nimport DetectorEditDialog from './DetectorEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\n\r\nclass DetectorButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.state = {details: this.props.details};\r\n    this.id = this.props.id;\r\n  }\r\n  static id = 0;\r\n  componentDidMount(){\r\n    \r\n  }\r\n  updateDetails(d){\r\n    this.setState({details: d});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <DetectorEditDialog name={this.props.name} buttonid={this.id} codeeditor={this.props.codeeditor} updatedetails={this.updateDetails} button={this} removebutton={this.props.removebutton}\r\n      detector={this.props.detector} ref={this.editdialog} buttons={this.props.buttons} details={this.props.details}></DetectorEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} onClick={()=>{\r\n          if(RenderSystem.active_id == this.props.detector.id){\r\n            RenderSystem.active_id = -1;\r\n            return;\r\n          }\r\n          RenderSystem.active_id = this.props.detector.id;\r\n          }} variant=\"link\" eventKey={this.id}>\r\n          {this.props.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog();}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey={this.id}>\r\n        <Card.Body>{this.state.details}</Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default DetectorButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Modal, Button, Table, Container, Col} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport MaterialList from '../detector/MaterialList';\r\n\r\nclass MaterialTable extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false};\r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  showDialog(){\r\n    this.setState({show: true});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  render(){\r\n    const mats = [];\r\n    let rows = 20;\r\n    for(let i = 0;i<rows;i++){\r\n      let tmp = [];  \r\n      for(let j = Math.floor((i/rows)*MaterialList.materials.length);j<Math.floor(((i+1)/rows)*MaterialList.materials.length);j++){\r\n            tmp.push(<th style={{'border':'gray solid 1px', 'text-align' : 'center'}}>\r\n              {MaterialList.materials[j]}\r\n              </th>);\r\n      }\r\n      mats.push(<tr>{tmp}</tr>);\r\n    }\r\n   \r\n\r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Choose a material</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Table style={{'margin':'auto'}}>\r\n            <tbody>\r\n                {mats}\r\n            </tbody>\r\n        </Table>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default MaterialTable;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport DetectorButton from './DetectorButton';\r\nimport MaterialList from './MaterialList';\r\nimport { Vector3 } from '../utils/maths';\r\nimport MaterialTable from '../graphics/MaterialTable';\r\n\r\nclass DetectorDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.table = React.createRef();\r\n    this.state = {show: false, \r\n      detname: 'Detector',\r\n      detposx: 0,\r\n      detposy: 0,\r\n      detposz: 0,\r\n      detrotx: 0,\r\n      detroty: 0,\r\n      detrotz: 0,\r\n      detscalex: 10,\r\n      detscaley: 10,\r\n      detscalez: 10,\r\n      detmat: 'Pb',\r\n      geomrty: 'cube',\r\n      display: 'none',\r\n      filelabel: 'Path to STL',\r\n      modeldata: null,\r\n      showError: 'none',\r\n      color: new Vector3(.5,.5,.5),\r\n      options: []\r\n     }\r\n     \r\n  }\r\n  componentDidMount(){\r\n   \r\n    \r\n  }\r\n  hexToRgb(hex) {\r\n    hex = hex.substr(1);\r\n    var bigint = parseInt(hex, 16);\r\n    var r = (bigint >> 16) & 255;\r\n    var g = (bigint >> 8) & 255;\r\n    var b = bigint & 255;\r\n\r\n    return new Vector3(r / 255, g / 255, b / 255);\r\n  }\r\n  addMaterial(ann, mat){\r\n    this.materials.push(<option value={ann}>{mat}</option>)\r\n  }\r\n  async showDialog(){\r\n      this.setState({show: true});\r\n      let detectorName = 'Detector' + this.props.buttons.length;\r\n      this.setState({detname: detectorName});\r\n\r\n      let response = await fetch(\"http://localhost/database\", {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'POST',\r\n      body: JSON.stringify({name: \"\"})\r\n      });\r\n      let json = await response.json();\r\n      let opt = [];\r\n      for(var i = 0;i<json.length;i++){\r\n        opt.push(<option value={json[i].name}>{json[i].name}</option>);\r\n      }\r\n      this.setState({options: opt});\r\n    }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    \r\n    return <>\r\n        <MaterialTable ref={this.table}></MaterialTable>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Create detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <hr />\r\n            <Row>\r\n              Geometry\r\n            </Row>\r\n\r\n            <Form.Control as=\"select\" value={this.state.geomrty} onChange={(evt)=>{\r\n              this.setState({geomrty: evt.target.value});\r\n              if(evt.target.value == \"stl\") this.setState({display: 'block'});\r\n              else this.setState({display: 'none'});}}>\r\n\r\n            {/* <option value=\"cube\">Cube</option>\r\n            <option value=\"cylinder\">Cylinder</option>\r\n            <option value=\"sphere\">Sphere</option> */}\r\n            {this.state.options}\r\n\r\n            <option value=\"stl\">Custom (.STL)</option>\r\n            </Form.Control>\r\n\r\n            <Form.File \r\n            style={{'display':this.state.display}}\r\n            id=\"stl-file\"\r\n            label={this.state.filelabel}\r\n            data-browse=\"Open\"\r\n            custom\r\n            onChange={(evt)=>{\r\n\r\n\r\n              var r = new FileReader();\r\n\r\n              r.onload = ()=>{\r\n                var data = r.result;\r\n                this.setState({modeldata: data});\r\n              }\r\n              r.readAsBinaryString(evt.target.files[0]);\r\n\r\n              let path = evt.target.value;\r\n              path = path.split(\"\\\\\")[path.split(\"\\\\\").length-1];\r\n              this.setState({filelabel: path});\r\n            }}\r\n          />\r\n            <hr />\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>Rotation</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detrotx}\r\n            onChange={(event)=>{this.setState({detrotx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detroty}\r\n            onChange={(event)=>{this.setState({detroty: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detrotz}\r\n            onChange={(event)=>{this.setState({detrotz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>Scale</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscalex}\r\n            onChange={(event)=>{this.setState({detscalex: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscaley}\r\n            onChange={(event)=>{this.setState({detscaley: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detscalez}\r\n            onChange={(event)=>{this.setState({detscalez: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <hr />\r\n          <Row>\r\n            \r\n          <Form.Group controlId=\"exampleForm.SelectCustom\">\r\n            <Button onClick={()=>{this.table.current.showDialog();}}></Button>\r\n            <Form.Label>Material</Form.Label>\r\n            <Form.Control\r\n            className=\"material\"\r\n            required\r\n            value='0'\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detmat}\r\n            onChange={(event)=>{this.setState({detmat: event.target.value});}} />\r\n          </Form.Group>\r\n          <span style={{'display': this.state.showError, 'color' : 'red', 'font-weight': 'bold'}}>\r\n            No such material\r\n          </span>\r\n          </Row>\r\n          <hr />\r\n          <Row>\r\n          Color: <span style={{'padding-left':'20px'}}>\r\n          <input type=\"color\"\r\n          onInput={(evt)=>{\r\n            this.setState({color: this.hexToRgb(evt.target.value)});\r\n          }}></input>\r\n            </span>\r\n        </Row>\r\n          </Container>\r\n        </Form>\r\n      \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n          if(!MaterialList.check(this.state.detmat)){\r\n            this.setState({showError: 'block'})\r\n            return;\r\n          } \r\n          this.hideDialog();\r\n          this.props.createbutton(this.state.detname, this.state.detposx, this.state.detposy,this.state.detposz,\r\n            this.state.detrotx, this.state.detroty, this.state.detrotz, this.state.detscalex, this.state.detscaley, this.state.detscalez, this.state.detmat, this.state.geomrty,\r\n            this.state.modeldata,this.state.color);}}>\r\n            Create\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default DetectorDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport ConfirmDialog from '../graphics/ConfirmDialog';\r\nimport Parser from '../utils/Parser';\r\n\r\nclass GunEditDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.confirmDialog = React.createRef();\r\n\r\n    this.state = {show: false, \r\n      detname: this.props.detector.name,\r\n      detposx: this.props.detector.model.position.x,\r\n      detposy: this.props.detector.model.position.y,\r\n      detposz: this.props.detector.model.position.z,\r\n      detdirx: this.props.detector.direction.x,\r\n      detdiry: this.props.detector.direction.y,\r\n      detdirz: this.props.detector.direction.z,\r\n      energy: this.props.detector.energy}\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    const handleDelete = ()=>{\r\n      this.hideDialog();\r\n      this.props.removebutton(this.props.detector, this.props.button);\r\n    }\r\n    return <>\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete this component?\" fun={handleDelete}></ConfirmDialog>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify Detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <Row>Direction</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirx}\r\n            onChange={(event)=>{this.setState({detdirx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdiry}\r\n            onChange={(event)=>{this.setState({detdiry: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirz}\r\n            onChange={(event)=>{this.setState({detdirz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          \r\n          <br/>\r\n          <Row>\r\n            Energy <Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.energy}\r\n            onChange={(event)=>{this.setState({energy: event.target.value});}} />\r\n            </Col> keV\r\n          </Row>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{\r\n            this.confirmDialog.current.showDialog();\r\n          }} style={{backgroundColor: 'red', color: 'white'}}>\r\n            Delete\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();\r\n\r\n            this.props.detector.name = this.state.name;\r\n\r\n            this.props.detector.model.position.x = this.state.detposx;\r\n            this.props.detector.model.position.y = this.state.detposy;\r\n            this.props.detector.model.position.z = this.state.detposz;\r\n            \r\n            this.props.detector.direction.x = this.state.detdirx;\r\n            this.props.detector.direction.y = this.state.detdiry;\r\n            this.props.detector.direction.z = this.state.detdirz;\r\n            \r\n            \r\n            this.props.detector.energy = this.state.energy;\r\n\r\n            let text = \"\";\r\n            for(let i = 0;i<Parser.chunks.length;i++){\r\n              if(this.props.buttonid == Parser.chunks[i].id){\r\n                Parser.chunks[i].code = \"\\\\Gun{\\n\" +\r\n                \"\\tname: \" + '\"' + this.props.name + '\";\\n' + \r\n                \"\\tposition[cm]: \" + this.state.detposx + \", \" + this.state.detposy + \", \" + this.state.detposz + \";\\n\" + \r\n                \"\\tdirection: \" + this.state.detdirx + \", \" + this.state.detdiry + \", \" + this.state.detdirz + \";\\n\" + \r\n                \"\\tenergy[keV]: \" +  this.state.energy + ';\\n' + \r\n                \"}\\n\";\r\n              }\r\n              text += Parser.chunks[i].code;\r\n            }\r\n\r\n            this.props.codeeditor.current.updateText(text);\r\n\r\n            this.props.updatedetails(\r\n            <Container>\r\n                  <Row>\r\n                  <Col>Position: </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col>x: {this.state.detposx} cm</Col>\r\n                    <Col>y: {this.state.detposy} cm</Col>\r\n                    <Col>z: {this.state.detposz} cm</Col>\r\n                  </Row>\r\n                  <Row>\r\n                  <Col>Direction: </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col>x: {this.state.detdirx} </Col>\r\n                    <Col>y: {this.state.detdiry} </Col>\r\n                    <Col>z: {this.state.detdirz} </Col>\r\n                  </Row>\r\n                  <Row>\r\n                  <Col>Energy: {this.state.energy} keV</Col>\r\n                  </Row>\r\n                  </Container>\r\n            );            \r\n            }}>\r\n            Modify\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default GunEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure, Row, Col, Container} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport image from '../images/editicon.png';\r\nimport GunEditDialog from './GunEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport DetectorButton from '../detector/DetectorButton';\r\n\r\nclass GunButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.state = {details: this.props.details};\r\n    this.id = this.props.id;\r\n  }\r\n  static id = 0;\r\n  updateDetails(d){\r\n    this.setState({details: d});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <GunEditDialog buttonid={this.id} codeeditor={this.props.codeeditor} name={this.props.name} updatedetails={this.updateDetails} button={this} removebutton={this.props.removebutton}\r\n      detector={this.props.detector} ref={this.editdialog} buttons={this.props.buttons} details={this.props.details}></GunEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} onClick={()=>{\r\n          if(RenderSystem.acitve_id == this.id){\r\n            RenderSystem.acitve_id = -1;\r\n            return;\r\n          }\r\n          RenderSystem.acitve_id = this.id;\r\n          }} variant=\"link\" eventKey={this.id}>\r\n          {this.props.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog();}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey={this.id}>\r\n        <Card.Body><Container>\r\n      <Row>\r\n      <Col>Position: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.props.detector.model.position.x} cm</Col>\r\n        <Col>y: {this.props.detector.model.position.y} cm</Col>\r\n        <Col>z: {this.props.detector.model.position.z} cm</Col>\r\n      </Row>\r\n      <Row>\r\n      <Col>Direction: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.props.detector.direction.x} </Col>\r\n        <Col>y: {this.props.detector.direction.y} </Col>\r\n        <Col>z: {this.props.detector.direction.z} </Col>\r\n      </Row>\r\n      <Row>\r\n      <Col>Energy: {this.props.detector.energy} keV</Col>\r\n      </Row>\r\n      </Container></Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default GunButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport GunButton from '../gun/GunButton';\r\n\r\nclass GunDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false, \r\n      detname: 'Detector',\r\n      detposx: 0,\r\n      detposy: 0,\r\n      detposz: 0,\r\n      detdirx: 0,\r\n      detdiry: 0,\r\n      detdirz: 0,\r\n      energy: 100 }\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Create Particle Gun</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          <Row>Direction</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirx}\r\n            onChange={(event)=>{this.setState({detdirx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdiry}\r\n            onChange={(event)=>{this.setState({detdiry: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detdirz}\r\n            onChange={(event)=>{this.setState({detdirz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          \r\n          <Row>\r\n            Energy <Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.energy}\r\n            onChange={(event)=>{this.setState({energy: event.target.value});}} />\r\n            </Col> keV\r\n          </Row>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();this.props.createbutton(this.state.detname, this.state.detposx, this.state.detposy, this.state.detposz,\r\n            this.state.detdirx, this.state.detdiry, this.state.detdirz, this.state.energy);}}>\r\n            Create\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default GunDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport ConfirmDialog from '../graphics/ConfirmDialog';\r\nimport Parser from '../utils/Parser';\r\n\r\nclass SourceEditDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.confirmDialog = React.createRef();\r\n\r\n\r\n    this.state = {show: false, \r\n      detname: this.props.detector.name,\r\n      detposx: this.props.detector.model.position.x,\r\n      detposy: this.props.detector.model.position.y,\r\n      detposz: this.props.detector.model.position.z,\r\n      material: this.props.detector.material}\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    const handleDelete = ()=>{\r\n      this.hideDialog();\r\n      this.props.removebutton(this.props.detector, this.props.button);\r\n    }\r\n    return <>\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete this component?\" fun={handleDelete}></ConfirmDialog>\r\n\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Modify Detector</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          <br/>\r\n          \r\n          <br/>\r\n          <Row>\r\n            Material <Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.material}\r\n            onChange={(event)=>{this.setState({material: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{\r\n             this.confirmDialog.current.showDialog();\r\n          }} style={{backgroundColor: 'red', color: 'white'}}>\r\n            Delete\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();\r\n\r\n            this.props.detector.name = this.state.name;\r\n\r\n            this.props.detector.model.position.x = this.state.detposx;\r\n            this.props.detector.model.position.y = this.state.detposy;\r\n            this.props.detector.model.position.z = this.state.detposz;\r\n            \r\n            \r\n            this.props.detector.material = this.state.material;\r\n\r\n            let text = \"\";\r\n            for(let i = 0;i<Parser.chunks.length;i++){\r\n              if(this.props.buttonid == Parser.chunks[i].id){\r\n                Parser.chunks[i].code = \"\\\\Source{\\n\" +\r\n                \"\\tname: \" + '\"' + this.props.name + '\";\\n' + \r\n                \"\\tposition[cm]: \" + this.state.detposx + \", \" + this.state.detposy + \", \" + this.state.detposz + \";\\n\" + \r\n                \"\\tmaterial: \" + '\"' + this.state.material + '\";\\n' + \r\n              \"}\\n\";\r\n              }\r\n              text += Parser.chunks[i].code;\r\n            }\r\n\r\n            this.props.codeeditor.current.updateText(text);\r\n\r\n            this.props.updatedetails(<Container>\r\n                <Row>\r\n                <Col>Position: </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>x: {this.state.detposx} cm</Col>\r\n                  <Col>y: {this.state.detposy} cm</Col>\r\n                  <Col>z: {this.state.detposz} cm</Col>\r\n                </Row>\r\n                <Row>\r\n                <Col>Material: {this.state.material}</Col>\r\n                </Row>\r\n                </Container>);            \r\n            }}>\r\n            Modify\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default SourceEditDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Card, Accordion, Figure, Row, Container, Col} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport image from '../images/editicon.png';\r\nimport SourceEditDialog from './SourceEditDialog';\r\nimport RenderSystem from '../rendering/renderSystem';\r\nimport DetectorButton from '../detector/DetectorButton';\r\n\r\nclass SourceButton extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.editdialog = React.createRef();\r\n    this.updateDetails = this.updateDetails.bind(this);\r\n    this.state = {details: this.props.details};\r\n    this.id = this.props.id;\r\n  }\r\n  static id = 0;\r\n  componentDidMount(){\r\n  }\r\n  updateDetails(d){\r\n    this.setState({details: d});\r\n  }\r\n  render(){\r\n    return <div>\r\n    <SourceEditDialog codeeditor={this.props.codeeditor} name={this.props.name} buttonid={this.id} updatedetails={this.updateDetails} button={this} removebutton={this.props.removebutton}\r\n      detector={this.props.detector} ref={this.editdialog} buttons={this.props.buttons} details={this.props.details}></SourceEditDialog>\r\n    <Card className='button'>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} onClick={()=>{\r\n          if(RenderSystem.acitve_id == this.id){\r\n            RenderSystem.acitve_id = -1;\r\n            return;\r\n          }\r\n          RenderSystem.acitve_id = this.id;\r\n          }} variant=\"link\" eventKey={this.id}>\r\n          {this.props.name}\r\n        </Accordion.Toggle>\r\n        <Button onClick={()=>{this.editdialog.current.showDialog();}} className=\"editButton\">EDIT</Button>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey={this.id}>\r\n        <Card.Body><Container>\r\n      <Row>\r\n      <Col>Position: </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>x: {this.props.detector.model.position.x} cm</Col>\r\n        <Col>y: {this.props.detector.model.position.y} cm</Col>\r\n        <Col>z: {this.props.detector.model.position.z} cm</Col>\r\n      </Row>\r\n      <Row>\r\n      <Col>Material: {this.props.detector.material}</Col>\r\n      </Row>\r\n      </Container>\r\n      </Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  </div>\r\n    \r\n  }\r\n}\r\n\r\nexport default SourceButton;\r\n","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport SourceButton from '../source/SourceButton';\r\n\r\nclass SourceDialog extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.showDialog = this.showDialog.bind(this);\r\n    this.hideDialog = this.hideDialog.bind(this);\r\n    this.state = {show: false, \r\n      detname: 'Detector',\r\n      detposx: 0,\r\n      detposy: 0,\r\n      detposz: 0,\r\n      material: 'Co60' }\r\n    \r\n  }\r\n  componentDidMount(){\r\n    \r\n  }\r\n  showDialog(){\r\n      this.setState({show: true});\r\n      let detectorName = 'Source' + this.props.buttons.length;\r\n      this.setState({detname: detectorName});\r\n  }\r\n  hideDialog(){\r\n    this.setState({show: false});\r\n  }\r\n  \r\n  static id = 0;\r\n  render(){\r\n    \r\n    return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Create Particle Source</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n          <Container>\r\n          <Row>\r\n            Name <Col><Form.Control\r\n            className=\"name\"\r\n            required\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detname}\r\n            onChange={(event)=>{this.setState({detname: event.target.value});}} />\r\n            </Col>\r\n            </Row>\r\n            <Row>Position</Row>\r\n          <Row>\r\n            x<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposx}\r\n            onChange={(event)=>{this.setState({detposx: event.target.value});}} />\r\n            </Col>\r\n            y<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposy}\r\n            onChange={(event)=>{this.setState({detposy: event.target.value});}} />\r\n            </Col>\r\n            z<Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"number\"\r\n            maxLength=\"10\"\r\n            value = {this.state.detposz}\r\n            onChange={(event)=>{this.setState({detposz: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          \r\n          <br/>\r\n          \r\n          <Row>\r\n            Material <Col><Form.Control\r\n            className=\"numspinner\"\r\n            required\r\n            value='0'\r\n            type=\"text\"\r\n            maxLength=\"10\"\r\n            value = {this.state.material}\r\n            onChange={(event)=>{this.setState({material: event.target.value});}} />\r\n            </Col>\r\n          </Row>\r\n          </Container>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{this.hideDialog();this.props.createbutton(this.state.detname,  this.state.detposx, this.state.detposy, this.state.detposz,\r\n            this.state.material);}}>\r\n            Create\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default SourceDialog;\r\n","import React, { Component, createRef } from 'react';\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal, Spinner} from 'react-bootstrap';\r\n\r\nclass RunDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {numberOfParticles: 100,show: false, loading: false}\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.setLoading = this.setLoading.bind(this);\r\n    }\r\n    hideDialog(){\r\n        this.setState({show: false});\r\n    }\r\n    showDialog(){\r\n        this.setState({show: true,loading: false});\r\n    }\r\n    setLoading(b){\r\n      this.setState({loading: b});\r\n    }\r\n    render(){\r\n      if(this.state.loading){\r\n        return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Run simulation</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Row style={{margin: '5px'}}>\r\n                Runnig simulation\r\n            </Row>\r\n            <Spinner animation=\"border\" role=\"status\">\r\n            </Spinner>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n            this.props.runsim(this.state.numberOfParticles);}}>\r\n            Run\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n      }\r\n        return <>\r\n    <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n    <Modal.Header closeButton>\r\n      <Modal.Title>Run simulation</Modal.Title>\r\n    </Modal.Header>\r\n    <Modal.Body>\r\n        <Row style={{margin: '5px'}}>\r\n            Number of particles: \r\n        </Row>\r\n    <Form>\r\n        <Form.Control required\r\n        type=\"number\"\r\n        value={this.state.numberOfParticles}\r\n        onChange={(evt)=>{this.setState({numberOfParticles: evt.target.value});}}>\r\n        </Form.Control>\r\n    </Form>\r\n    </Modal.Body>\r\n    <Modal.Footer>\r\n    <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n        Cancel\r\n      </Button>\r\n      <Button variant=\"primary\" onClick={()=>{\r\n        this.setLoading(true);\r\n        this.props.runsim(this.state.numberOfParticles, this.hideDialog);}}>\r\n        Run\r\n      </Button>\r\n    </Modal.Footer>\r\n  </Modal>\r\n</> \r\n    \r\n      \r\n        \r\n    }\r\n}\r\nexport default RunDialog;","import React, { Component, createRef } from 'react';\r\nimport {Button, Nav, Navbar, FormControl, Container,Col,Row, Form, Dropdown, OverlayTrigger, Tooltip, Modal, ProgressBar, Spinner} from 'react-bootstrap';\r\n\r\nclass SpectrumDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {numberofparticles: 1000, detector: 0,show: false, loading: false, now: 60, binsize: 1}\r\n        this.hideDialog = this.hideDialog.bind(this);\r\n        this.showDialog = this.showDialog.bind(this);\r\n        this.setLoading = this.setLoading.bind(this);\r\n    }\r\n    hideDialog(){\r\n        this.setState({show: false});\r\n    }\r\n    setLoading(b){\r\n        this.setState({loading: b});\r\n    }\r\n    showDialog(){\r\n        this.setState({show: true, loading: false});\r\n    }\r\n    render(){\r\n        if(this.state.loading){\r\n            return <Modal show={this.state.show}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Configure Spectroscopy</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n            <Row style={{margin: '5px'}}>\r\n                Runnig simulation\r\n            </Row>\r\n            <Spinner animation=\"border\" role=\"status\">\r\n            </Spinner>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n        }\r\n        let options = [];\r\n        for(let i = 0;i<this.props.detectors.length;i++){\r\n            options.push(<option value={this.props.detectors[i].id}>{this.props.detectors[i].name}</option>)\r\n        }\r\n\r\n        return <>\r\n        <Modal show={this.state.show} onHide={()=>{this.hideDialog();}}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Configure Spectroscopy</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n            <Row style={{margin: '5px'}}>\r\n                Select detector \r\n            </Row>\r\n        <Form>\r\n        <Form.Control as=\"select\" value={this.state.detector} onChange={(evt)=>{this.setState({detector: evt.target.value});}}>\r\n            {options}\r\n            </Form.Control>\r\n            <hr />\r\n            <Row style={{margin: '5px'}}>\r\n                Number of particles\r\n            </Row>\r\n        <Form.Control\r\n        className=\"numspinner\"\r\n        required\r\n        value='0'\r\n        type=\"number\"\r\n        maxLength=\"10\"\r\n        value = {this.state.numberofparticles}\r\n        onChange={(event)=>{this.setState({numberofparticles: event.target.value});}} />\r\n        <hr />\r\n        <Row style={{margin: '5px'}}>\r\n                Bin size\r\n            </Row>\r\n            <Row>\r\n            <Form.Control\r\n        className=\"numspinner\"\r\n        required\r\n        value='0'\r\n        type=\"number\"\r\n        maxLength=\"10\"\r\n        value = {this.state.binsize}\r\n        style={{'width':'20%','margin':'15px'}}\r\n        onChange={(event)=>{this.setState({binsize: event.target.value});}} />\r\n        <span style={{'padding':'20px'}}>\r\n        keV\r\n\r\n        </span>\r\n            </Row>\r\n        \r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={()=>{this.hideDialog();}}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={()=>{\r\n              this.setLoading(true);\r\n              this.props.runsim(this.state.numberofparticles, this.state.detector, this.hideDialog, this.state.binsize);}}>\r\n            Run\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </> \r\n    }\r\n}\r\nexport default SpectrumDialog;","import React, { Component, createRef } from 'react';\r\nimport '../App.css';\r\n\r\nimport {Button, Nav, Navbar, FormControl, Form, Dropdown, OverlayTrigger, Tooltip, Modal } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport DetectorDialog from '../detector/DetectorDialog';\r\nimport GunDialog from '../gun/GunDialog';\r\nimport SourceDialog from '../source/SourceDialog';\r\nimport RunDialog from './RunDialog';\r\nimport SpectrumDialog from './SpectrumDialog';\r\nimport ConfirmDialog from './ConfirmDialog';\r\n\r\nclass NavigationBar extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.dialog = React.createRef();\r\n    this.gundialog = React.createRef();\r\n    this.sourcedialog = React.createRef();\r\n    this.rundialog = React.createRef();\r\n    this.spectrumdialog = React.createRef();\r\n    this.confirmDialog = React.createRef();\r\n    this.showRun = this.showRun.bind(this);\r\n    this.state = {showTracks: true, showParticles: true, showAxes: true, showGrid: false, showrun: \"none\", showclearsetup: \"none\", showclearparticles: \"none\"};\r\n  }\r\n  static id = 0;\r\n  showRun(b){\r\n    if(b) this.setState({showrun: \"block\"});\r\n    else this.setState({showrun: \"none\"});\r\n  }\r\n  showClearParticles(b){\r\n    if(b) this.setState({showclearparticles: \"block\"});\r\n    else this.setState({showclearparticles: \"none\"});\r\n  }\r\n  showClearSetup(b){\r\n    if(b) this.setState({showclearsetup: \"block\"});\r\n    else this.setState({showclearsetup: \"none\"});\r\n  }\r\n  render(){\r\n\r\n    const handleDelete = ()=>{\r\n      this.props.clearSetup();\r\n      this.showClearSetup(false);\r\n    }\r\n\r\n    return <>\r\n    <ConfirmDialog ref={this.confirmDialog} title=\"Confirm\" content=\"Are you sure you want to delete all components?\" fun={handleDelete}>\r\n\r\n    </ConfirmDialog>\r\n   <DetectorDialog ref={this.dialog} createbutton={this.props.createbutton} buttons={this.props.buttons}></DetectorDialog>\r\n   <GunDialog ref={this.gundialog} createbutton={this.props.creategunbutton} buttons={this.props.buttons}></GunDialog>\r\n   <SourceDialog ref={this.sourcedialog} createbutton={this.props.createsourcebutton} buttons={this.props.buttons}></SourceDialog>\r\n   <RunDialog ref={this.rundialog} runsim={this.props.run}></RunDialog>\r\n   <SpectrumDialog ref={this.spectrumdialog} runsim={this.props.runspectroscopy} detectors={this.props.detectors}></SpectrumDialog>\r\n   \r\n   <Navbar bg=\"light\" variant=\"light\" style={{position: 'fixed', 'z-index': '4'}}>\r\n        <Navbar.Brand>Geant4</Navbar.Brand>\r\n        <Button style={{\"display\": this.state.showrun}} variant=\"primary\" onClick={()=>{\r\n          this.rundialog.current.showDialog();}} >Run</Button>\r\n\r\n        <Button variant=\"primary\" style={{backgroundColor: 'green', \"display\" : this.state.showrun}} onClick={()=>{\r\n          this.spectrumdialog.current.showDialog();}}>Spectroscopy</Button>\r\n\r\n        <Button variant=\"primary\" style={{\"display\" : this.state.showclearparticles, backgroundColor: 'red'}} onClick={()=>{\r\n                  this.props.clearrun();\r\n                  this.showClearParticles(false);\r\n                  }}>Clear particles</Button>\r\n\r\n        <Button variant=\"primary\" style={{\"display\" : this.state.showclearsetup, backgroundColor: 'red'}} onClick={()=>{\r\n                  this.confirmDialog.current.showDialog();\r\n                  \r\n                  }}>Clear setup</Button>\r\n\r\n        <Nav className=\"mr-auto\">\r\n        <Dropdown>\r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={{backgroundColor: 'white', border: 'none', color: 'black'}}>\r\n          Add\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">Detector Geometry</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{this.dialog.current.showDialog();}}>Detector</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        <br/>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">General Particle Source</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{this.sourcedialog.current.showDialog();}}>GPS</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        <br/>\r\n        <OverlayTrigger overlay={<Tooltip id=\"tooltip-disabled\">Directed Particle Gun</Tooltip>}>\r\n        <span className=\"d-inline-block\">\r\n          <Dropdown.Item className='detectoroption' onClick={()=>{this.gundialog.current.showDialog();}}>Gun</Dropdown.Item>\r\n          </span>\r\n        </OverlayTrigger>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n      <Dropdown>\r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={{backgroundColor: 'white', border: 'none', color: 'black'}}>\r\n          View\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu>\r\n        <Form.Check type=\"checkbox\" label=\"Show Tracks\" checked={this.state.showTracks} onChange={(evt)=>{\r\n          this.setState({showTracks: evt.target.checked});\r\n          this.props.setshowtracks(this.state.showTracks);}} style={{margin: '12px'}} />\r\n        <Form.Check type=\"checkbox\" label=\"Show Particles\" checked={this.state.showParticles} onChange={(evt)=>{\r\n          this.setState({showParticles: evt.target.checked});\r\n          this.props.setshowparticles(this.state.showParticles);}}\r\n          style={{margin: '12px'}}/>\r\n\r\n<Form.Check type=\"checkbox\" label=\"Show Axes\" checked={this.state.showAxes} onChange={(evt)=>{\r\n          this.setState({showAxes: evt.target.checked});\r\n          this.props.setshowaxes(this.state.showAxes);}}\r\n          style={{margin: '12px'}}/>\r\n\r\n<Form.Check type=\"checkbox\" label=\"Show Grid\" checked={this.state.showGrid} onChange={(evt)=>{\r\n          this.setState({showGrid: evt.target.checked});\r\n          if(this.state.showGrid) this.props.canvas.current.updateHint(\" \");\r\n          this.props.setshowgrid(this.state.showGrid);}}\r\n          style={{margin: '12px'}}/>\r\n        \r\n\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n        </Nav>\r\n        <Form inline>\r\n          <FormControl type=\"text\" placeholder=\"Search\" className=\"mr-sm-2\" />\r\n          <Button variant=\"outline-primary\">Search</Button>\r\n        </Form>\r\n      </Navbar>\r\n    </> \r\n  }\r\n}\r\n\r\nexport default NavigationBar;\r\n","import { Vector3 } from '../utils/maths';\r\n\r\nclass Particle {\r\n    constructor(){\r\n        this.track_id = 0;\r\n        this.parent_id = 0;\r\n        this.position = new Vector3(0,0,0);\r\n        this.color = new Vector3(1,1,1);\r\n        this.totalEnergy = 0;\r\n        this.energyDeposit = 0;\r\n        this.definition = \"\";\r\n        this.id = \"\";\r\n\r\n    }\r\n    \r\n};\r\n\r\nexport default Particle;","import React, { Component, createRef } from 'react';\r\nimport Chart from 'chart.js';\r\nimport 'chartjs-plugin-zoom';\r\n\r\nclass Spectrum extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.canvas = React.createRef();\r\n        \r\n    }\r\n    componentDidMount(){\r\n        this.chart = new Chart(this.canvas.current.getContext(\"2d\"), {\r\n            // The type of chart we want to create\r\n            type: 'bar',\r\n        \r\n            // The data for our dataset\r\n            data: {\r\n                labels: [],\r\n                datasets: [{\r\n                    label: 'counts',\r\n                    backgroundColor: 'rgb(0, 99, 132)',\r\n                    borderColor: 'rgb(0, 99, 132)',\r\n                    data: []\r\n                }]\r\n            },\r\n        \r\n            // Configuration options go here\r\n            options: { responsive: true,\r\n                plugins: {\r\n                    zoom: {\r\n                        // Container for pan options\r\n                        pan: {\r\n                            // Boolean to enable panning\r\n                            enabled: true,\r\n        \r\n                            // Panning directions. Remove the appropriate direction to disable \r\n                            // Eg. 'y' would only allow panning in the y direction\r\n                            mode: 'xy'\r\n                        },\r\n        \r\n                        // Container for zoom options\r\n                        zoom: {\r\n                            // Boolean to enable zooming\r\n                            enabled: true,\r\n        \r\n                            // Zooming directions. Remove the appropriate direction to disable \r\n                            // Eg. 'y' would only allow zooming in the y direction\r\n                            mode: 'xy',\r\n                        }\r\n                    }\r\n                }\r\n             }\r\n        });\r\n    }\r\n    render(){\r\n        return <div>\r\n            <canvas ref={this.canvas}></canvas>\r\n        </div>\r\n    }\r\n    energies = [];\r\n    numberofenergies = [];\r\n    add(e){\r\n        if(isNaN(e)) return;\r\n        if(this.contains(e)){\r\n            this.numberofenergies[this.getIndex(e)]++;\r\n        }else{\r\n            this.energies.push(e);\r\n            this.numberofenergies.push(1);\r\n        }\r\n    }\r\n    contains(e){\r\n        for(var i = 0;i<this.energies.length;i++){\r\n            if(this.energies[i] == e) return true;\r\n        }\r\n        return false;\r\n    }\r\n    getIndex(e){\r\n        for(var i = 0;i<this.energies.length;i++){\r\n            if(Math.abs(this.energies[i] - e) == 0) return i;\r\n        }\r\n        return -1;\r\n    }\r\n    sort(bin){\r\n        var list = [];\r\n        let max = this.energies[this.energies.length - 1];\r\n        for(let i = 0;i<max;i+=bin){\r\n            this.add(i);\r\n        }\r\n        for (var j = 0; j < this.energies.length; j++)\r\n            list.push({ 'hit': this.energies[j], 'no': this.numberofenergies[j] });\r\n\r\n        list.sort(function (a, b) {\r\n            return ((a.hit < b.hit) ? -1 : ((a.hit == b.hit) ? 0 : 1));\r\n        });\r\n        \r\n        for (var k = 0; k < list.length; k++) {\r\n            this.energies[k] = list[k].hit;\r\n            this.numberofenergies[k] = list[k].no;\r\n        }\r\n        for(var i = 0;i<this.energies.length;i++){\r\n            this.addData(\"[\" + this.energies[i] + \"-\" + (this.energies[i]+ +bin).toString() + \"]\",this.numberofenergies[i]-1);\r\n        }\r\n        \r\n        \r\n    }\r\n    clear(){\r\n        this.chart.destroy();\r\n        let ctx = this.canvas.current.getContext(\"2d\");\r\n        this.chart = new Chart(ctx, {\r\n            // The type of chart we want to create\r\n            type: 'bar',\r\n        \r\n            // The data for our dataset\r\n            data: {\r\n                labels: [],\r\n                datasets: [{\r\n                    label: 'counts',\r\n                    backgroundColor: 'rgb(0, 99, 132)',\r\n                    borderColor: 'rgb(0, 99, 132)',\r\n                    data: []\r\n                }]\r\n            },\r\n        \r\n            // Configuration options go here\r\n            options: { responsive: true,\r\n                scales: {\r\n                    yAxes: [{\r\n                        scaleLabel: {\r\n                            display: true,\r\n                            labelString: 'counts'\r\n                        }\r\n                    }],\r\n                    xAxes: [{\r\n                        scaleLabel: {\r\n                            display: true,\r\n                            labelString: 'bins'\r\n                        }\r\n                    }]\r\n                },\r\n                plugins: {\r\n                    zoom: {\r\n                        // Container for pan options\r\n                        pan: {\r\n                            // Boolean to enable panning\r\n                            enabled: true,\r\n        \r\n                            // Panning directions. Remove the appropriate direction to disable \r\n                            // Eg. 'y' would only allow panning in the y direction\r\n                            mode: 'xy'\r\n                        },\r\n        \r\n                        // Container for zoom options\r\n                        zoom: {\r\n                            // Boolean to enable zooming\r\n                            enabled: true,\r\n        \r\n                            // Zooming directions. Remove the appropriate direction to disable \r\n                            // Eg. 'y' would only allow zooming in the y direction\r\n                            mode: 'xy',\r\n                        }\r\n                    }\r\n                }\r\n             }\r\n        });\r\n        this.energies = [];\r\n        this.numberofenergies = [];\r\n        \r\n    }\r\n    static save(){\r\n        \r\n    }\r\n    addData(label, data) {\r\n        this.chart.data.labels.push(label);\r\n        this.chart.data.datasets.forEach((dataset) => {\r\n            dataset.data.push(data);\r\n        });\r\n        this.chart.update();\r\n    }\r\n}\r\nexport default Spectrum;","import React, {Component} from 'react';\r\nimport {Form, Button} from 'react-bootstrap';\r\nimport AceEditor from 'react-ace';\r\nimport 'brace/mode/elixir';\r\nimport 'brace/theme/monokai';\r\nimport Parser from '../utils/Parser';\r\n\r\nclass CodeEditor extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {text: '', width: '20%'}\r\n        this.editor = React.createRef();\r\n    }\r\n    updateText(s){\r\n        this.setState({text: s});\r\n    }\r\n    render(){\r\n        return <div \r\n        style={{'width':this.state.width,'height':'100%', 'top':'50px',\r\n         'position': 'fixed', 'right':'0', 'z-index':'3', 'border': '0', 'borderRadius' : '0', 'padding':'0', 'margin':'0', 'background-color' : 'white'}}> \r\n\r\n<Button style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}\r\nonClick={()=>{\r\n   this.setState({text: \"Write your code here\"});\r\n}}>New</Button>\r\n<Button style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}>Open</Button>\r\n            <Button \r\n            onClick={()=>{\r\n                let tmp = this.state.text;\r\n                Parser.parse(this.state.text,this.props.canvas.current, this.props.clearSetup,this.props.createDetector, this.props.createSource, this.props.createGun);\r\n                this.setState({text: tmp});\r\n                }}\r\n            style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}>Run script</Button>\r\n            <Button style={{'border' : '0','position':'relative','background-color': 'gray', 'z-index':'3', 'bottom':'0', 'border-radius' : '0', 'border':'solid 1px white'}}\r\nonClick={()=>{\r\n    window.location = \"Help\";\r\n}}>Help</Button>\r\n            <AceEditor style={{'z-index' : '2','width':'100%'}} \r\n            ref={this.editor}\r\n            value={this.state.text}\r\n            mode=\"elixir\"\r\n            theme=\"monokai\"\r\n            fontSize={16}\r\n            onChange={(evt)=>{\r\n                this.setState({text: evt});\r\n            }}>\r\n            </AceEditor>\r\n\r\n        <Button \r\n        onClick={()=>{\r\n            if(this.state.width == '30%'){\r\n                this.setState({width: '0'});\r\n            }else{\r\n                this.setState({width: '30%'});\r\n            }\r\n        }}\r\n        style={{'right': this.state.width, 'position' : 'fixed', 'top': '50%', 'z-index': '3', 'height':'50px', 'background-color': 'gray', 'border' : '0'}}>\r\n        </Button>\r\n        <div style={{'position':'fixed','z-index':'1','background-color' : 'black', 'height' : '100%', 'top' : '0' , 'width' : this.state.width}} />\r\n\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default CodeEditor;","import React, { Component, createRef } from 'react';\nimport './App.css';\n\nimport Canvas from './graphics/Canvas.js';\nimport {Button, Card, Accordion,Container, Row, Col, Tabs, Tab, Nav} from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport DetectorButton from './detector/DetectorButton';\nimport NavigationBar from './graphics/NavigationBar';\nimport GunButton from './gun/GunButton';\nimport SourceButton from './source/SourceButton';\nimport Particle from './entities/Particle';\nimport {Vector3} from './utils/maths';\nimport Model from './rendering/model';\nimport Spectrum from './graphics/spectrum';\nimport STLParser from './utils/STLParser';\nimport CodeEditor from './graphics/CodeEditor';\nimport Parser from './utils/Parser';\n\nclass App extends Component{\n  constructor(props){\n    super(props);\n    this.spectrum = React.createRef();\n    this.navbar = React.createRef();\n    this.codeeditor = React.createRef();\n    this.state = {buttons: [], gunbuttons: [], sourcebuttons: [], spectrum: true, page: 'first'}\n    this.createDetector = this.createDetector.bind(this);\n    this.createSource = this.createSource.bind(this);\n    this.createGun = this.createGun.bind(this);\n\n    this.removeDetector = this.removeDetector.bind(this);\n    this.removeGun = this.removeGun.bind(this);\n    this.removeSource = this.removeSource.bind(this);\n\n    this.runSim = this.runSim.bind(this);\n    this.runSpectroscopy = this.runSpectroscopy.bind(this);\n\n    this.setShowParticles = this.setShowParticles.bind(this);\n    this.setShowTracks = this.setShowTracks.bind(this);\n    this.setShowAxes = this.setShowAxes.bind(this);\n    this.setShowGrid = this.setShowGrid.bind(this);\n\n    this.clearRun = this.clearRun.bind(this);\n    this.clearSetup = this.clearSetup.bind(this);\n\n\n    this.accordion = React.createRef();\n    this.canvas = React.createRef();\n\n    \n\n    this.detectors = [];\n    this.guns = [];\n    this.sources = [];\n    this.particles = [];\n    this.tracks = [];\n  }\n  clearRun(){\n    this.canvas.current.clearRun();\n  }\n  runSpectroscopy(number_of_particles, detector, hideDialog, binsize){\n    let message_data = [];\n\n    // particle gun stuff\n    message_data.push(0);\n\n    message_data.push(1);\n\n\n    message_data.push(0);\n    message_data.push(0);\n    message_data.push(0);\n\n    message_data.push(0);\n    message_data.push(0);\n    message_data.push(0);\n\n    message_data.push(0);\n\n    // detector stuff\n    var number_of_detectors = this.detectors.length;\n\n    message_data.push(number_of_detectors);\n\n    for (var i = 0; i < number_of_detectors; i++) {\n\n        message_data.push(\"G4_\" + this.detectors[i].material);\n        message_data.push(this.detectors[i].id);\n        message_data.push(this.detectors[i].model.position.x);\n        message_data.push(this.detectors[i].model.position.y);\n        message_data.push(this.detectors[i].model.position.z);\n\n        message_data.push(this.detectors[i].model.rotation.x);\n        message_data.push(this.detectors[i].model.rotation.y);\n        message_data.push(this.detectors[i].model.rotation.z);\n\n        message_data.push(this.detectors[i].model.scale.x);\n        message_data.push(this.detectors[i].model.scale.y);\n        message_data.push(this.detectors[i].model.scale.z);\n\n        message_data.push(this.detectors[i].model.vertices.length);\n        for (var j = 0; j < this.detectors[i].model.vertices.length; j++) {\n            message_data.push(this.detectors[i].model.vertices[j]);\n        }\n    }\n    //sources\n    var number_of_sources = this.sources.length;\n    message_data.push(number_of_sources);\n    for(var i = 0;i<number_of_sources;i++){\n\n        message_data.push(this.sources[i].material);\n        //message_data.push(detectors[i].id);\n\n        message_data.push(this.sources[i].model.position.x);\n        message_data.push(this.sources[i].model.position.y);\n        message_data.push(this.sources[i].model.position.z);\n    }\n    //guns\n    var number_of_guns = this.guns.length;\n    message_data.push(number_of_guns);\n    for(var i = 0;i<number_of_guns;i++){\n        message_data.push(this.guns[i].model.position.x);\n        message_data.push(this.guns[i].model.position.y);\n        message_data.push(this.guns[i].model.position.z);\n\n        message_data.push(this.guns[i].direction.x);\n        message_data.push(this.guns[i].direction.y);\n        message_data.push(this.guns[i].direction.z);\n\n        message_data.push(this.guns[i].energy);\n    }\n    message_data.push(detector); //selected detector id\n    message_data.push(number_of_particles); //number of particles\n    message_data.push('end');\n    this.sendGamma(message_data, hideDialog, binsize);\n  }\n  runSim(number_of_particles, hidedialog){\n    let message_data = [];\n\n    // particle gun stuff\n    message_data.push(1);\n\n    message_data.push(1);\n\n\n    message_data.push(0);\n    message_data.push(0);\n    message_data.push(0);\n\n    message_data.push(0);\n    message_data.push(0);\n    message_data.push(0);\n\n    message_data.push(0);\n\n    // detector stuff\n    var number_of_detectors = this.detectors.length;\n\n    message_data.push(number_of_detectors);\n\n    for (var i = 0; i < number_of_detectors; i++) {\n\n        message_data.push(\"G4_\" + this.detectors[i].material);\n        message_data.push(this.detectors[i].id);\n        message_data.push(this.detectors[i].model.position.x);\n        message_data.push(this.detectors[i].model.position.y);\n        message_data.push(this.detectors[i].model.position.z);\n\n        message_data.push(this.detectors[i].model.rotation.x);\n        message_data.push(this.detectors[i].model.rotation.y);\n        message_data.push(this.detectors[i].model.rotation.z);\n\n        message_data.push(this.detectors[i].model.scale.x);\n        message_data.push(this.detectors[i].model.scale.y);\n        message_data.push(this.detectors[i].model.scale.z);\n\n        message_data.push(this.detectors[i].model.vertices.length);\n        for (var j = 0; j < this.detectors[i].model.vertices.length; j++) {\n            message_data.push(this.detectors[i].model.vertices[j]);\n        }\n    }\n    //sources\n    var number_of_sources = this.sources.length;\n    message_data.push(number_of_sources);\n    for(var i = 0;i<number_of_sources;i++){\n\n        message_data.push(this.sources[i].material);\n        //message_data.push(detectors[i].id);\n\n        message_data.push(this.sources[i].model.position.x);\n        message_data.push(this.sources[i].model.position.y);\n        message_data.push(this.sources[i].model.position.z);\n    }\n    //guns\n    var number_of_guns = this.guns.length;\n    message_data.push(number_of_guns);\n    for(var i = 0;i<number_of_guns;i++){\n        message_data.push(this.guns[i].model.position.x);\n        message_data.push(this.guns[i].model.position.y);\n        message_data.push(this.guns[i].model.position.z);\n\n        message_data.push(this.guns[i].direction.x);\n        message_data.push(this.guns[i].direction.y);\n        message_data.push(this.guns[i].direction.z);\n\n        message_data.push(this.guns[i].energy);\n    }\n    message_data.push(number_of_particles); //number of particles\n    message_data.push('end');\n    this.send(message_data, hidedialog);\n  }\n  sendGamma(data, hideDialog, binsize){\n    alert(data);\n    var message = '';\n    for(var i = 0;i<data.length;i++){\n      message += data[i];\n      message += ',';\n    }\n    fetch('http://localhost:80/gammaAPI',{\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify({data: message})\n    })\n    .then(response => response.text())\n    .then(response => {\n      this.processGammaSpectrum(response, binsize);\n      hideDialog();\n    this.setState({spectrum: false,page: \"second\"});});\n  }\n  send(data, hidedialog){\n    var message = '';\n    for(var i = 0;i<data.length;i++){\n      message += data[i];\n      message += ',';\n    }\n    fetch('http://localhost:80/gammaAPI',{\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify({data: message})\n    })\n    .then(response => response.text())\n    .then(response => {\n      this.processResponse(response);\n      hidedialog();\n     });\n  }\n  processGammaSpectrum(response, binsize){\n    \n    let message = response;\n\n    message = message.split(\" \");\n    this.spectrum.current.clear();\n    for(var i = 0;i<message.length;i++){\n        this.spectrum.current.add(Math.floor(parseFloat(message[i]) / binsize) * binsize);\n    }\n    this.spectrum.current.sort(binsize);\n  }\n  processResponse(response){\n    var message = response;\n    \n    var floats = message.split(' ');\n    var index = 0;\n    var j = 0;\n    function toNode(p, l) {\n        if (p == 'gamma') return '\"' + l + '\"';\n        if (p == 'e-') return '\"' + l + '\"';\n        if (p == 'e+') return '\"' + l + '\"';\n    }\n    this.particles = [];\n    while (index < floats.length - 1 - this.detectors.length - 1) {\n        var track_data = [];\n        var numberOfSteps = parseInt(floats[index]);\n        if (numberOfSteps == 0) break;\n        var definition = floats[index + 1];\n        for (var i = 0; i < numberOfSteps; i++) {\n            var particle = new Particle();\n            particle.position.x = parseFloat(floats[index + i * 7 + 2]) * .1;\n            particle.position.y = parseFloat(floats[index + i * 7 + 3]) * .1;\n            particle.position.z = parseFloat(floats[index + i * 7 + 4]) * .1;\n            \n            track_data.push(parseFloat(floats[index + i * 7 + 2]) * .1);\n            track_data.push(parseFloat(floats[index + i * 7 + 3]) * .1);\n            track_data.push(parseFloat(floats[index + i * 7 + 4]) * .1);\n\n            particle.definition = definition;\n            particle.track_id = parseInt(floats[index + i * 7 + 5]);\n            particle.parent_id = parseInt(floats[index + i * 7 + 6]);\n            particle.totalEnergy = parseFloat(floats[index + i * 7 + 7]);\n            particle.energyDeposit = parseFloat(floats[index + i * 7 + 8]);\n            \n            particle.color = new Vector3(1,0,0);\n            particle.id = j;\n\n\n            j++;\n            \n            \n            this.particles.push(particle);\n        }\n        index += numberOfSteps * 7 + 2;\n\n        var t_norm = [];\n        for (var k = 0; k < track_data.length; k++) {\n            t_norm.push(1);\n        }\n        \n        var tm = this.canvas.current.addModel(track_data, t_norm);\n        if (definition == \"e-\") tm.color = new Vector3(1, 0, 1);\n        if (definition == \"gamma\") tm.color = new Vector3(1, 1, 1);\n        if (definition == \"e+\") tm.color = new Vector3(1, 1, 0);\n        tm.drawLines = true;\n        this.tracks.push(tm);\n    }\n    \n    \n    let tmp_particles = [];\n    for(var i = 0;i<this.particles.length;i+=Math.ceil(this.particles.length / 10000)){\n        tmp_particles.push(this.particles[i]);\n    }\n    this.particles = tmp_particles.slice();\n\n    function get_average(particles){\n        var max = 0;\n        for(var i = 0;i<particles.length;i++){\n            max += +particles[i].totalEnergy;\n        }\n        max = max / particles.length;\n\n        return max;\n    }\n    let max = get_average(this.particles) * 2;\n\n    \n    \n    \n    for(let i = 0;i<this.particles.length;i++){\n        if(this.particles[i].totalEnergy > max) this.particles[i].totalEnergy = max;\n        this.particles[i].color.x = 2 * (this.particles[i].totalEnergy / max);\n        this.particles[i].color.y = 1 - this.particles[i].color.x;\n\n        let d = this.particles[i].color.x / 100;\n        this.particles[i].scale = new Vector3(d,d,d);\n        this.canvas.current.addParticle(this.particles[i]);\n    }\n    if(this.particles.length > 0) this.navbar.current.showClearParticles(true);\n  }\n  modifyDetector(detector){\n    \n  }\n  createSource(n,x,y,z,mat, code){\n    if(this.detectors.length > 0) this.navbar.current.showRun(true);\n    this.navbar.current.showClearSetup(true);\n    if(!code)this.codeeditor.current.updateText(\n      this.codeeditor.current.state.text + \n      \"\\\\Source{\\n\" +\n        \"\\tname: \" + '\"' + n + '\";\\n' + \n        \"\\tposition[cm]: \" + x + \", \" + y + \", \" + z + \";\\n\" + \n        \"\\tmaterial: \" + '\"' + mat + '\";\\n' + \n      \"}\\n\"\n    );\n    \n    let bs = this.state.sourcebuttons;\n    let details = <Container>\n      <Row>\n      <Col>Position: </Col>\n      </Row>\n      <Row>\n        <Col>x: {x} cm</Col>\n        <Col>y: {y} cm</Col>\n        <Col>z: {z} cm</Col>\n      </Row>\n      <Row>\n      <Col>Material: {mat}</Col>\n      </Row>\n      </Container>;\n    let source = this.canvas.current.addSource(x,y,z,mat);\n    source.id = +DetectorButton.id;\n    Parser.chunks.push({id: source.id, code:  \"\\\\Source{\\n\" +\n    \"\\tname: \" + '\"' + n + '\";\\n' + \n    \"\\tposition[cm]: \" + x + \", \" + y + \", \" + z + \";\\n\" + \n    \"\\tmaterial: \" + '\"' + mat + '\";\\n' + \n  \"}\\n\"});\n    source.name = n;\n    this.sources.push(source);\n    bs.push(<SourceButton codeeditor={this.codeeditor} name={n} removebutton={this.removeSource} id={DetectorButton.id} detector={source} details={details} key={++DetectorButton.id} buttons={this.state.sourcebuttons}></SourceButton>);\n    this.setState({sourcebuttons: bs});\n  }\n  createGun(n, px, py, pz, dx, dy, dz, energy, code){\n    if(this.detectors.length > 0) this.navbar.current.showRun(true);\n    this.navbar.current.showClearSetup(true);\n\n    if(!code) this.codeeditor.current.updateText(\n      this.codeeditor.current.state.text + \n      \"\\\\Gun{\\n\" +\n        \"\\tname: \" + '\"' + n + '\";\\n' + \n        \"\\tposition[cm]: \" + px + \", \" + py + \", \" + pz + \";\\n\" + \n        \"\\tdirection: \" + dx + \", \" + dy + \", \" + dz + \";\\n\" + \n        \"\\tenergy[keV]: \" + energy + ';\\n' + \n      \"}\\n\"\n    );\n\n    let bs = this.state.gunbuttons;\n    let details = <Container>\n      <Row>\n      <Col>Position: </Col>\n      </Row>\n      <Row>\n        <Col>x: {px} cm</Col>\n        <Col>y: {py} cm</Col>\n        <Col>z: {pz} cm</Col>\n      </Row>\n      <Row>\n      <Col>Direction: </Col>\n      </Row>\n      <Row>\n        <Col>x: {dx} </Col>\n        <Col>y: {dy} </Col>\n        <Col>z: {dz} </Col>\n      </Row>\n      <Row>\n      <Col>Energy: {energy} keV</Col>\n      </Row>\n      </Container>;\n\n    let gun = this.canvas.current.addGun(px,py,pz,dx,dy,dz,energy);\n    gun.id = +DetectorButton.id;\n    Parser.chunks.push({id: gun.id, code: \"\\\\Gun{\\n\" +\n\"\\tname: \" + '\"' + n + '\";\\n' + \n\"\\tposition[cm]: \" + px + \", \" + py + \", \" + pz + \";\\n\" + \n\"\\tdirection: \" + dx + \", \" + dy + \", \" + dz + \";\\n\" + \n\"\\tenergy[keV]: \" + energy + ';\\n' + \n\"}\\n\"});\n    gun.name = n;\n    this.guns.push(gun);\n    bs.push(<GunButton codeeditor={this.codeeditor} name={n} removebutton={this.removeGun} id={DetectorButton.id} detector={gun} details={details} key={++DetectorButton.id} buttons={this.state.buttons}></GunButton>);\n    this.setState({gunbuttons: bs});\n  }\n  createDetector(n, px, py, pz, rx, ry, rz, sx, sy, sz, material, type, data, color, code){\n    if(this.sources.length > 0 || this.guns.length > 0) this.navbar.current.showRun(true);\n    this.navbar.current.showClearSetup(true);\n    if(!code)this.codeeditor.current.updateText(\n      this.codeeditor.current.state.text + \n      \"\\\\Detector{\\n\" +\n        \"\\tname: \" + '\"' + n + '\";\\n' + \n        \"\\tposition[cm]: \" + px + \", \" + py + \", \" + pz + \";\\n\" + \n        \"\\trotation[rad]: \" + rx + \", \" + ry + \", \" + rz + \";\\n\" +\n        \"\\tscale[cm]: \" + sx + \", \" + sy + \", \" + sz + \";\\n\" + \n        \"\\tmaterial: \" + '\"' + material + '\";\\n' + \n      \"}\\n\"\n    );\n    \n    let bs = this.state.buttons;\n    let details = <Container>\n      <Row>\n      <Col>Position: </Col>\n      </Row>\n      <Row>\n        <Col>x: {px} cm</Col>\n        <Col>y: {py} cm</Col>\n        <Col>z: {pz} cm</Col>\n      </Row>\n      <Row>\n      <Col>Rotation: </Col>\n      </Row>\n      <Row>\n        <Col>x: {rx} deg</Col>\n        <Col>y: {ry} deg</Col>\n        <Col>z: {rz} deg</Col>\n      </Row>\n      <Row>\n      <Col>Scale: </Col>\n      </Row>\n      <Row>\n        <Col>x: {sx}</Col>\n        <Col>y: {sy}</Col>\n        <Col>z: {sz}</Col>\n      </Row>\n      <Row>\n      <Col>Material: </Col>\n      </Row>\n      <Row>\n        <Col>{material}</Col>\n      </Row>\n      </Container>;\n    let paramterize = (detector) => {\n      detector.id = +DetectorButton.id;\n      Parser.chunks.push({id: detector.id, code: \"\\\\Detector{\\n\" +\n    \"\\tname: \" + '\"' + n + '\";\\n' + \n    \"\\tposition[cm]: \" + px + \", \" + py + \", \" + pz + \";\\n\" + \n    \"\\trotation[rad]: \" + rx + \", \" + ry + \", \" + rz + \";\\n\" +\n    \"\\tscale[cm]: \" + sx + \", \" + sy + \", \" + sz + \";\\n\" + \n    \"\\tmaterial: \" + '\"' + material + '\";\\n' + \n  \"}\\n\"});\n      detector.name = n;\n      detector.model.color = color;\n      this.detectors.push(detector);\n      bs.push(<DetectorButton codeeditor={this.codeeditor} name={n} removebutton={this.removeDetector} id={DetectorButton.id} detector={detector} details={details} key={++DetectorButton.id} buttons={this.state.buttons}></DetectorButton>);\n      this.setState({buttons: bs});\n    }\n    let detector = null;\n    if(type==\"stl\"){\n      let modelData = STLParser.parseData(data);\n      detector = this.canvas.current.addSTLDetector(px,py,pz,rx,ry,rz,sx,sy,sz,material,modelData);\n      paramterize(detector);\n\n    }else{\n      this.canvas.current.addDetector(px,py,pz,rx,ry,rz,sx,sy,sz,material, type).then(det => {\n        paramterize(det);\n      });\n    }\n    \n  }\n  clearSetup(){\n    Parser.chunks = [];\n    this.codeeditor.current.updateText(\" \");\n    DetectorButton.id = 0;\n    this.setState({buttons: [], gunbuttons: [], sourcebuttons: []});\n    for(let i = 0;i<this.detectors.length;i++){\n      this.canvas.current.removeDetector(this.detectors[i]);\n    }\n    for(let i = 0;i<this.sources.length;i++){\n      this.canvas.current.removeSource(this.sources[i]);\n    }\n    for(let i = 0;i<this.guns.length;i++){\n      this.canvas.current.removeGun(this.guns[i]);\n    }\n    this.detectors = [];\n    this.sources = [];\n    this.guns = [];\n    this.state.buttons = [];\n    this.state.gunbuttons = [];\n    this.state.sourcebuttons = [];\n    this.clearRun();\n    \n  }\n  removeSource(source, button){\n    if(this.detectors.length < 1 || (this.sources.length < 1 && this.guns.length < 1)) this.navbar.current.showRun(false);\n\n    if(this.sourceslength == 0 || this.guns.length == 0 || this.guns.length == 0) this.navbar.current.showClearSetup(false);\n\n    this.canvas.current.removeSource(source);\n    this.codeeditor.current.updateText(Parser.removeChunk(source.id));\n\n    for(var i = 0;i<this.state.sourcebuttons.length;i++){\n      if(this.state.sourcebuttons[i].key-1 == button.id){\n        let bs = this.state.sourcebuttons;\n        bs.splice(i,1);\n        this.sources.splice(i,1);\n        this.setState({sourcebuttons: bs});\n        return;\n      }\n    }\n  }\n  removeGun(gun, button){\n    if(this.detectors.length < 1 || (this.sources.length < 1 && this.guns.length < 1)) this.navbar.current.showRun(false);\n\n    if(this.sourceslength == 0 || this.guns.length == 0 || this.guns.length == 0) this.navbar.current.showClearSetup(false);\n\n    this.canvas.current.removeGun(gun);\n    this.codeeditor.current.updateText(Parser.removeChunk(gun.id));\n\n    for(var i = 0;i<this.state.gunbuttons.length;i++){\n      if(this.state.gunbuttons[i].key-1 == button.id){\n        let bs = this.state.gunbuttons;\n        bs.splice(i,1);\n        this.guns.splice(i,1);\n        this.setState({gunbuttons: bs});\n        return;\n      }\n    }\n  }\n  removeDetector(detector, button){\n    if(this.detectors.length < 1 || (this.sources.length < 1 && this.guns.length < 1)) this.navbar.current.showRun(false);\n    if(this.sourceslength == 0 || this.guns.length == 0 || this.guns.length == 0) this.navbar.current.showClearSetup(false);\n    \n    \n    this.canvas.current.removeDetector(detector);\n    this.codeeditor.current.updateText(Parser.removeChunk(detector.id));\n\n    for(var i = 0;i<this.state.buttons.length;i++){\n      if(this.state.buttons[i].key-1 == button.id){\n        let bs = this.state.buttons;\n        bs.splice(i,1);\n        this.detectors.splice(i,1);\n        this.setState({buttons: bs});\n        return;\n      }\n    }\n    \n  }\n  setShowTracks(b){\n    this.canvas.current.setShowTracks(!b);\n  }\n  setShowParticles(b){\n    this.canvas.current.drawParticles = !b;\n  }\n  setShowAxes(b){\n    this.canvas.current.setShowAxes(!b);\n  }\n  setShowGrid(b){\n    this.canvas.current.drawGrid = !b;\n  }\n  componentDidMount(){\n    this.createDetector(\"Cube\",0,0,0,0,0,0,1,1,1,\"Pb\",'cube',null,new Vector3(1,1,1));\n    \n  }\n  render(){\n\n\n    const items = this.state.buttons.map(function(item){\n      return <div> {item} </div>;\n    });\n    const gunButtons = this.state.gunbuttons.map(function(item){\n      return <div> {item} </div>\n    });\n    const sourceButtons = this.state.sourcebuttons.map(function(item){\n      return <div> {item} </div>\n    });\n    return <div>\n    <Tab.Container id=\"left-tabs-example\" defaultActiveKey=\"first\" activeKey={this.state.page}>\n    <Col sm={3}>\n      <Nav variant=\"pills\" className=\"flex-column\"  className='page'>\n        <Nav.Item>\n          <Nav.Link eventKey=\"first\" onClick={()=>{this.setState({page: 'first'});}}>simulation</Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link eventKey=\"second\"  disabled={this.state.spectrum} onClick={()=>{this.setState({page: 'second'});}}>spectrum</Nav.Link>\n        </Nav.Item>\n      </Nav>\n    </Col>\n      <Tab.Content>\n        <Tab.Pane eventKey=\"first\">\n        <Canvas ref={this.canvas} style={{overflow: 'hidden'}}></Canvas>\n    <CodeEditor ref={this.codeeditor} createGun={this.createGun} clearSetup={this.clearSetup} createSource={this.createSource} createDetector={this.createDetector} canvas={this.canvas} />\n\n        <NavigationBar run={this.runSim} \n        ref={this.navbar}\n        canvas={this.canvas}\n        className=\"navbar\"\n        runspectroscopy={this.runSpectroscopy}\n        createbutton={this.createDetector} \n        creategunbutton={this.createGun} \n        createsourcebutton={this.createSource} \n        setshowtracks={this.setShowTracks}\n        setshowparticles={this.setShowParticles}\n        setshowaxes={this.setShowAxes}\n        setshowgrid={this.setShowGrid}\n        clearrun={this.clearRun}\n        clearSetup={this.clearSetup}\n        detectors={this.detectors}\n        buttons={this.state.buttons}></NavigationBar>\n        <div className='buttonbackground'>\n        </div>\n        <div className=\"accordion\">\n        <Accordion ref={this.accordion} defaultActiveKey=\"0\" className='accordion'>\n          <div style={{color: 'white', 'text-align':'center', 'background-color' : 'gray', 'border' : '1px solid white'}}>\n          Detectors\n          </div>\n          {items}\n          <div style={{color: 'white', 'text-align':'center', 'background-color' : 'gray', 'border' : '1px solid white'}}>\n          Sources\n          </div>\n          {sourceButtons}\n          <div style={{color: 'white', 'text-align':'center', 'background-color' : 'gray', 'border' : '1px solid white'}}>\n          Guns\n          </div>\n          {gunButtons}\n        </Accordion>\n        </div>\n        </Tab.Pane>\n        <Tab.Pane eventKey=\"second\">\n          <Spectrum ref={this.spectrum}></Spectrum>\n        </Tab.Pane>\n      </Tab.Content>\n</Tab.Container>\n\n    \n  </div>\n    \n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}